(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6af6a938"],{"004f3":function(e,t,i){"use strict";var l=i("d966"),a=i.n(l);a.a},"0d2b":function(e,t,i){"use strict";var l=i("2a95");function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t["a"]={props:{options:{type:Array,default:function(){return[]}},value:{type:String|Number,default:""},placeholder:{type:String,default:""},title:{type:String,default:""},type:{type:String,default:"text"},suffix:{type:String,default:""},prefix:{type:String,default:""},styleModel:{type:String,default:""},className:{type:String,default:""},field:{type:String,default:""},info:{type:String,default:""},on:{type:Object,default:function(){return{}}},validate:{type:Object,default:function(){return{}}},errorsValidate:{type:Array,default:function(){return[]}}},data:function(){return{valueModel:this.value,errorMessage:""}},watch:{errorsValidate:{handler:function(e){var t=this;if(e){var i=e.find((function(e){return e.field===t.field}));this.errorMessage=i?i.message:""}else this.errorMessage=""},deep:!0}},methods:{getClassName:function(){var e=["input-build-"+this.field];this.errorMessage&&e.push("ivu-form-item-error");var t=this.validate[this.field]?this.validate[this.field].filter((function(e){return!0===e.required})):[];return t.length&&e.push("ivu-form-item-required"),e},changeEvent:function(e,t){"change"===e&&this.$emit("changeValue",{field:this.field,value:this.valueModel}),this.on[e]&&this.on[e](t),this.validator(e)},validator:function(e){var t=this,i=this.validate[this.field]?this.validate[this.field].filter((function(t){return t.trigger===e})):[];if(i.length){var s=new l["a"](this.validate),o=a({},this.field,this.valueModel);s.validate(o,(function(e,i){if(e){var l=e.find((function(e){return e.field===t.field}));t.errorMessage=l?l.message:""}else t.errorMessage=""}))}}}}},"36c4":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FormItem",{staticClass:"input-build upload-build",class:e.getClassName(),attrs:{label:e.title}},[e.multiple?e._l(e.valueModel,(function(t,l){return i("div",{staticClass:"demo-upload-list"},[i("img",{attrs:{src:t}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(i){return e.handleView(t)}}}),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){return e.handleRemove(l)}}})],1)])})):e._e(),i("div",{staticClass:"input-error-wrapper"},[e.disabledSeleteImage?i("div",{staticClass:"ivu-upload",staticStyle:{display:"inline-block",width:"58px"},on:{click:e.selectImage}},[i("div",{staticClass:"ivu-upload ivu-upload-drag"},[i("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[i("i",{staticClass:"ivu-icon",class:e.icon?"ivu-icon-"+e.icon:"ivu-icon-ios-image",staticStyle:{"font-size":"20px"}})])])]):e._e(),e.errorMessage?i("div",{staticClass:"error-wrapper"},[e._v(e._s(e.errorMessage))]):e._e()]),e.valueModel&&!1===e.multiple?i("div",{staticClass:"demo-upload-list"},[i("img",{attrs:{src:e.valueModel}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(t){return e.handleView(e.valueModel)}}}),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){return e.handleRemove(e.valueModel)}}})],1)]):e._e(),e.info?i("div",{staticClass:"info-wrapper"},[e._v(e._s(e.info))]):e._e(),i("Modal",{attrs:{title:"选择图片",styles:{height:e.upload.height?e.upload.height:"500px"},width:e.upload.width?e.upload.width:"900px","footer-hide":""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",{style:"height:"+(e.upload.height?e.upload.height:"500px")},[e.visible?i("iframe",{attrs:{src:e.upload.url,frameborder:"0",width:"100%",height:"100%"}}):e._e()])]),i("look-image",{ref:"lookImage",attrs:{imageUrl:e.imageUrl}})],2)},a=[],s=i("0d2b"),o=i("5613");function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var r={name:"uploadFrameBuild",mixins:[s["a"]],components:{lookImage:o["a"]},props:{upload:{type:Object,default:function(){return{url:"",width:"800px",height:"900px",field:"",maxNum:1}}},icon:{type:String,default:""}},data:function(){return{visible:!1,multiple:!1,imageUrl:"",disabledSeleteImage:!0,baseUrl:""}},watch:{valueModel:{handler:function(e){this.multiple?(this.getUploadUrl(),e.length>=this.upload.maxNum?this.disabledSeleteImage=!1:this.disabledSeleteImage=!0):this.disabledSeleteImage=!e,this.changeValue()},deep:!0}},created:function(){this.multiple=this.upload.maxNum>1,this.baseUrl=this.upload.url,this.getUploadUrl(),this.multiple?"object"!==n(this.valueModel)&&(this.valueModel=[]):"string"!==typeof this.valueModel&&(this.valueModel=""),this.multiple?this.valueModel.length>=this.upload.maxNum?this.disabledSeleteImage=!1:this.disabledSeleteImage=!0:this.disabledSeleteImage=!this.valueModel},methods:{getUploadUrl:function(){var e=this.multiple?this.upload.maxNum-this.valueModel.length:1;this.upload.url=this.baseUrl+(-1!==this.baseUrl.indexOf("?")?"&fodder="+this.field:"?fodder="+this.field)+"&maxLength="+e,this.upload.url+=this.multiple?"&type=many":"type=0"},handleView:function(e){this.imageUrl=e,this.$refs.lookImage.open()},handleRemove:function(e){this.multiple?this.valueModel.splice(e,1):this.valueModel=""},changeValue:function(){this.$emit("changeValue",{field:this.field,value:this.valueModel}),this.on["change"]&&this.on["change"](this.valueModel)},selectImage:function(){this.visible=!0},closeUploadFrame:function(){this.visible=!1},setValue:function(e){this.multiple?"object"===n(e)&&(this.valueModel=e):this.valueModel=e[this.upload.field]||""}},mounted:function(){var e=this;void 0===window.$fromSubmit&&(window.$fromSubmit={}),window.$fromSubmit[this.field]={closeUploadFrame:null,setValue:null,getValue:null},window.$fromSubmit[this.field].closeUploadFrame=function(){return e.closeUploadFrame()},window.$fromSubmit[this.field].getValue=function(){return e.valueModel},window.$fromSubmit[this.field].setValue=function(t){return e.setValue(t)}}},u=r,d=(i("004f3"),i("2877")),f=Object(d["a"])(u,l,a,!1,null,"88fd5896",null);t["default"]=f.exports},5613:function(e,t,i){"use strict";var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{title:e.title,"footer-hide":""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",{staticClass:"image"},[e.visible?i("img",{style:e.styleImg?e.styleImg:"width: 100%;",attrs:{src:e.imageUrl}}):e._e()]),i("div",{attrs:{slot:"footer"},slot:"footer"})])},a=[],s={name:"lookImage",props:{imageUrl:{type:String,default:""},styleImg:{type:String,default:""},title:{type:String,default:"查看图片"}},data:function(){return{visible:!1}},methods:{clear:function(){this.visible=!1},open:function(){this.visible=!0}}},o=s,n=(i("fa1f"),i("2877")),r=Object(n["a"])(o,l,a,!1,null,"1f543f1a",null);t["a"]=r.exports},aad5:function(e,t,i){},d966:function(e,t,i){},fa1f:function(e,t,i){"use strict";var l=i("aad5"),a=i.n(l);a.a}}]);