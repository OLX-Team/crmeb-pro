(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59042d09"],{"0b65":function(t,e,n){"use strict";e["a"]={shortcuts:[{text:"今天",value:function(){var t=new Date,e=new Date;return e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),[e,t]}},{text:"昨天",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),[e,t]}},{text:"最近7天",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-6))),[e,t]}},{text:"最近30天",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-29))),[e,t]}},{text:"本月",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),1))),[e,t]}},{text:"本年",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),0,1))),[e,t]}}]}},"12a0":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"i-layout-page-header"},[n("PageHeader",{staticClass:"product_tabs",attrs:{"hidden-breadcrumb":""}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("div",{staticStyle:{float:"left"}},[n("router-link",{attrs:{to:{path:"/admin/work/client/group"}}},[n("div",{staticClass:"font-sm after-line"},[n("span",{staticClass:"iconfont iconfanhui"}),n("span",{staticClass:"pl10"},[t._v("返回")])])])],1),n("span",{staticClass:"mr20 ml16"},[t._v("新建群发")])])])],1),n("Card",{staticClass:"ivu-mt mb100",attrs:{bordered:!1,"dis-hover":""}},[n("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleValidate,"label-width":110,"label-colon":!0}},[n("FormItem",{attrs:{label:"名称",prop:"name"}},[n("Input",{staticStyle:{width:"460px"},attrs:{placeholder:"请输入名称"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),n("FormItem",{attrs:{label:"选择群发账号",required:""}},[n("Button",{on:{click:function(e){return t.addUser()}}},[t._v("选择成员")]),n("div",{staticStyle:{"margin-top":"10px"}},t._l(t.formItem.userids,(function(e,r){return n("Tag",{key:r,attrs:{closable:"",name:e.name,size:"medium"},on:{"on-close":t.handleDel}},[t._v(t._s(e.name))])})),1)],1),n("FormItem",{attrs:{label:"选择客户",prop:"client_type"}},[n("RadioGroup",{model:{value:t.formItem.client_type,callback:function(e){t.$set(t.formItem,"client_type",e)},expression:"formItem.client_type"}},[n("Radio",{attrs:{label:"0"}},[t._v("全部客户")]),n("Radio",{attrs:{label:"1"}},[t._v("筛选客户")])],1),n("div",{staticClass:"desc"},[t._v("预计群发\n          "),n("span",{staticClass:"client_count"},[t._v("["+t._s(t.clientCount)+"]")]),t._v("人。\n          "),n("span",{directives:[{name:"show",rawName:"v-show",value:1==t.formItem.client_type,expression:"formItem.client_type == 1"}]},[t._v("将消息发送给符合条件的客户")])])],1),1==t.formItem.client_type?[n("FormItem",{attrs:{label:"添加时间"}},[n("DatePicker",{staticStyle:{width:"460px"},attrs:{editable:!1,value:t.timeVal,format:"yyyy/MM/dd",type:"datetimerange",placement:"bottom-start",placeholder:"自定义时间",options:t.options},on:{"on-change":t.onchangeTime}})],1),n("FormItem",{attrs:{label:"标签"}},[n("TreeSelect",{directives:[{name:"width",rawName:"v-width",value:460,expression:"460"}],attrs:{data:t.labelList,multiple:""},model:{value:t.formItem.where_label,callback:function(e){t.$set(t.formItem,"where_label",e)},expression:"formItem.where_label"}})],1),n("FormItem",{attrs:{label:"排除标签"}},[n("TreeSelect",{directives:[{name:"width",rawName:"v-width",value:460,expression:"460"}],attrs:{data:t.newLabelList,multiple:""},model:{value:t.formItem.where_not_label,callback:function(e){t.$set(t.formItem,"where_not_label",e)},expression:"formItem.where_not_label"}}),n("div",{staticClass:"desc"},[t._v("\n          可根据标签选择客户，群发时将不会发送给该标签内的客户\n        ")])],1)]:t._e(),n("FormItem",{attrs:{label:"群发内容"}},[n("Input",{staticStyle:{width:"460px"},attrs:{type:"textarea",rows:4},model:{value:t.formItem.welcome_words.text.content,callback:function(e){t.$set(t.formItem.welcome_words.text,"content",e)},expression:"formItem.welcome_words.text.content"}})],1),n("FormItem",[n("Poptip",{attrs:{trigger:"hover"}},[n("template",{slot:"content"},[n("div",{staticClass:"poptip_content"},[n("div",{on:{click:function(e){return t.modalPicTap("image")}}},[n("div",{staticClass:"add_img acea-row row-center-wrapper"},[n("span",{staticClass:"iconfont icontupian4"})]),n("span",{staticClass:"tip_tit"},[t._v("图片")])]),n("div",{on:{click:function(e){return t.addRoutine()}}},[n("div",{staticClass:"add_routine acea-row row-center-wrapper"},[n("span",{staticClass:"iconfont iconxiaochengxu"})]),n("span",{staticClass:"tip_tit"},[t._v("小程序")])])])]),n("Button",{attrs:{type:"success"}},[t._v("添加图片/小程序")])],2)],1),n("FormItem",t._l(t.formItem.welcome_words.attachments,(function(e,r){return n("div",{key:r},[n("div",{staticClass:"\n              ivu-tag\n              ivu-tag-dot\n              ivu-tag-size-default\n              ivu-tag-closable\n              ivu-tag-checked\n            "},["image"==e.msgtype?n("span",{staticClass:"iconfont icontupian4 tag_icon"}):t._e(),"miniprogram"==e.msgtype?n("span",{staticClass:"iconfont iconxiaochengxu tag_icon"}):t._e(),"image"==e.msgtype?n("span",{staticClass:"ivu-tag-text"},[t._v(t._s(e.image.pic_url))]):t._e(),"miniprogram"==e.msgtype?n("span",{staticClass:"ivu-tag-text"},[t._v(t._s(e.miniprogram.title))]):t._e(),"image"==e.msgtype?n("i",{staticClass:"ivu-icon ivu-icon-ios-close",on:{click:function(n){return t.wordsDel(e.image.pic_url)}}}):t._e(),"miniprogram"==e.msgtype?n("i",{staticClass:"ivu-icon ivu-icon-ios-close",on:{click:function(n){return t.wordsDel(e.miniprogram.title)}}}):t._e()])])})),0),n("FormItem",{attrs:{label:"发送类型",prop:"template_type"}},[n("RadioGroup",{model:{value:t.formItem.template_type,callback:function(e){t.$set(t.formItem,"template_type",e)},expression:"formItem.template_type"}},[n("Radio",{attrs:{label:"0"}},[t._v("立即发送")]),n("Radio",{attrs:{label:"1"}},[t._v("定时发送")])],1)],1),1==t.formItem.template_type?n("FormItem",{attrs:{label:"定时发送时间"}},[n("DatePicker",{staticStyle:{width:"460px"},attrs:{type:"datetime",placeholder:"请选择发送时间"},on:{"on-change":t.snedChangeTime},model:{value:t.formItem.send_time,callback:function(e){t.$set(t.formItem,"send_time",e)},expression:"formItem.send_time"}})],1):t._e()],2)],1),n("Card",{staticClass:"fixed-card",attrs:{bordered:!1,"dis-hover":""}},[n("div",{staticClass:"acea-row row-center-wrapper"},[n("Button",{staticClass:"step_btn",attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1)]),n("Modal",{attrs:{width:"960px",scrollable:"","footer-hide":"",closable:"",title:"logo","mask-closable":!1,"z-index":9},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?n("uploadPictures",{attrs:{isChoice:t.isChoice,gridBtn:t.gridBtn,gridPic:t.gridPic},on:{getPic:t.getPic}}):t._e()],1),n("Modal",{attrs:{title:"添加小程序消息","z-index":1},on:{"on-ok":t.routineConfirm},model:{value:t.modalRoutine,callback:function(e){t.modalRoutine=e},expression:"modalRoutine"}},[n("Form",{attrs:{model:t.formItem,"label-width":110}},[n("FormItem",{attrs:{label:"封面图:"}},[n("div",{staticClass:"picBox",on:{click:function(e){return t.modalPicTap("routine")}}},[t.rontineObj.miniprogram.pic_url?n("div",{staticClass:"pictrue"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.rontineObj.miniprogram.pic_url,expression:"rontineObj.miniprogram.pic_url"}]})]):n("div",{staticClass:"upLoad"},[n("div",{staticClass:"iconfont"},[t._v("+")])])])]),n("FormItem",{attrs:{label:"小程序消息标题:"}},[n("Input",{model:{value:t.rontineObj.miniprogram.title,callback:function(e){t.$set(t.rontineObj.miniprogram,"title",e)},expression:"rontineObj.miniprogram.title"}})],1),n("FormItem",{attrs:{label:"小程序Appid:"}},[n("Input",{model:{value:t.rontineObj.miniprogram.appid,callback:function(e){t.$set(t.rontineObj.miniprogram,"appid",e)},expression:"rontineObj.miniprogram.appid"}})],1),n("FormItem",{attrs:{label:"小程序功能页:"}},[n("Input",{model:{value:t.rontineObj.miniprogram.page,callback:function(e){t.$set(t.rontineObj.miniprogram,"page",e)},expression:"rontineObj.miniprogram.page"}})],1)],1)],1),n("department",{ref:"department",attrs:{"active-department":t.activeDepartment,"is-site":t.isSite,userList:t.userList,"only-department":t.onlyDepartment},on:{changeMastart:t.changeMastart}})],1)},o=[],a=n("2f62"),i=n("b0e7"),c=n("c297"),u=n("9b41"),s=n("0b65"),l=n("90e7");function m(t){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={data:function(){return{formItem:{template_type:"0",name:"",type:"0",client_type:"0",where_time:"",where_label:[],userids:[],send_time:"",welcome_words:{text:{content:""},attachments:[]}},ruleValidate:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],client_type:[{required:!0,message:"请选择客户类型",trigger:"change"}],template_type:[{required:!0,message:"请选择发送类型",trigger:"change"}]},options:s["a"],timeVal:[],labelList:[],newLabelList:[],gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},rontineObj:{msgtype:"miniprogram",miniprogram:{pic_url:"",pic_media_id:"",title:"",appid:"",page:""}},imageObj:{msgtype:"image",image:{media_id:"",pic_url:""}},picTit:"",modalPic:!1,modalRoutine:!1,isChoice:"单选",activeDepartment:{},isSite:!0,onlyDepartment:!1,openType:"",userList:[],clientCount:0}},components:{uploadPictures:i["a"],department:c["a"]},computed:f({},Object(a["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:80},labelPosition:function(){return this.isMobile?"top":"left"}}),watch:{"formItem.where_label":function(t,e){t!==e&&this.getClientCount()},"formItem.where_not_label":function(t,e){t!==e&&this.getClientCount()},"formItem.where_time":function(t,e){t!==e&&this.getClientCount()},"formItem.userids":function(t,e){t!==e&&this.getClientCount()}},mounted:function(){this.setCopyrightShow({value:!1}),this.getWorkLabel(),this.getClientCount()},destroyed:function(){this.setCopyrightShow({value:!0})},methods:f({},Object(a["d"])("admin/layout",["setCopyrightShow"]),{onchangeTime:function(t){this.timeVal=t,this.formItem.where_time=this.timeVal.join("-")},snedChangeTime:function(t){this.formItem.send_time=t},modalPicTap:function(t){this.modalPic=!0,this.picTit=t},getWorkLabel:function(){var t=this;Object(u["P"])().then((function(e){t.labelList=e.data.map((function(e){return t.mapTree(e)})),t.newLabelList=t.deepClone(t.labelList)}))},mapTree:function(t){var e=this,n=Array.isArray(t.children)&&t.children.length>0;return{title:t.label,expand:!0,value:t.value,selected:!1,checked:!1,children:n?t.children.map((function(t){return e.mapTree(t)})):[]}},addRoutine:function(){var t=this;Object(l["u"])("routine").then((function(e){var n=e.data;t.rontineObj.miniprogram.pic_url="",t.rontineObj.miniprogram.title=n.routine_name.value,t.rontineObj.miniprogram.appid=n.routine_appId.value,t.rontineObj.miniprogram.page="/pages/index/index"})),this.modalRoutine=!0},addUser:function(){this.userList=this.formItem.userids,this.$refs.department.memberStatus=!0},handleDel:function(t,e){var n=this.formItem.userids.indexOf(e);this.formItem.userids.splice(n,1),this.getClientCount()},wordsDel:function(t){var e=this.formItem.welcome_words.attachments.indexOf(t);this.formItem.welcome_words.attachments.splice(e,1)},changeMastart:function(t,e){this.formItem.userids=t.map((function(t){return{userid:t.userid,name:t.name}}))},getPic:function(t){switch(this.picTit){case"image":this.imageObj.image.pic_url=t.att_dir,this.formItem.welcome_words.attachments.push(this.imageObj);break;case"routine":this.rontineObj.miniprogram.pic_url=t.att_dir;break}this.modalPic=!1},insertName:function(){this.formItem.welcome_words.text.content=this.formItem.welcome_words.text.content.concat("##客户名称##")},routineConfirm:function(){var t=this.deepClone(this.rontineObj);this.formItem.welcome_words.attachments.push(t)},submit:function(){var t=this;if(!this.formItem.userids.length)return this.$Message.error("请选择成员");var e=this.deepClone(this.formItem);e.userid=e.userids.map((function(t){return t.userid})),this.$refs.formItem.validate((function(n){n&&Object(u["N"])(e).then((function(e){t.$Message.success(e.msg),t.$router.push("/admin/work/client/group")})).catch((function(e){t.$Message.error(e.msg)}))}))},deepClone:function(t){var e=Array.isArray(t)?[]:{};if(t&&"object"===m(t))for(var n in t)t.hasOwnProperty(n)&&(e[n]=t&&"object"===m(t[n])?this.deepClone(t[n]):t[n]);return e},getClientCount:function(){var t=this;Object(u["B"])({is_all:1==this.formItem.client_type?0:1,label:this.formItem.where_label,notLabel:this.formItem.where_not_label,time:this.formItem.where_time,userid:this.formItem.userids.map((function(t){return t.userid}))}).then((function(e){t.clientCount=e.data.sum_count}))}})},b=p,g=(n("f349"),n("2877")),w=Object(g["a"])(b,r,o,!1,null,"52715680",null);e["default"]=w.exports},"90e7":function(t,e,n){"use strict";n.d(e,"v",(function(){return o})),n.d(e,"k",(function(){return a})),n.d(e,"Cb",(function(){return i})),n.d(e,"Bb",(function(){return c})),n.d(e,"j",(function(){return u})),n.d(e,"Z",(function(){return s})),n.d(e,"gb",(function(){return l})),n.d(e,"cb",(function(){return m})),n.d(e,"db",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"ab",(function(){return h})),n.d(e,"Gb",(function(){return p})),n.d(e,"eb",(function(){return b})),n.d(e,"n",(function(){return g})),n.d(e,"m",(function(){return w})),n.d(e,"c",(function(){return _})),n.d(e,"S",(function(){return v})),n.d(e,"ib",(function(){return O})),n.d(e,"R",(function(){return j})),n.d(e,"jb",(function(){return k})),n.d(e,"tb",(function(){return y})),n.d(e,"I",(function(){return C})),n.d(e,"sb",(function(){return x})),n.d(e,"q",(function(){return I})),n.d(e,"o",(function(){return D})),n.d(e,"p",(function(){return T})),n.d(e,"r",(function(){return S})),n.d(e,"s",(function(){return L})),n.d(e,"V",(function(){return P})),n.d(e,"W",(function(){return $})),n.d(e,"T",(function(){return F})),n.d(e,"U",(function(){return M})),n.d(e,"K",(function(){return U})),n.d(e,"C",(function(){return E})),n.d(e,"G",(function(){return N})),n.d(e,"F",(function(){return R})),n.d(e,"x",(function(){return A})),n.d(e,"H",(function(){return B})),n.d(e,"z",(function(){return G})),n.d(e,"E",(function(){return z})),n.d(e,"y",(function(){return V})),n.d(e,"w",(function(){return J})),n.d(e,"J",(function(){return Y})),n.d(e,"i",(function(){return q})),n.d(e,"e",(function(){return H})),n.d(e,"f",(function(){return W})),n.d(e,"Db",(function(){return K})),n.d(e,"Eb",(function(){return Q})),n.d(e,"Fb",(function(){return X})),n.d(e,"hb",(function(){return Z})),n.d(e,"ub",(function(){return tt})),n.d(e,"L",(function(){return et})),n.d(e,"wb",(function(){return nt})),n.d(e,"vb",(function(){return rt})),n.d(e,"xb",(function(){return ot})),n.d(e,"yb",(function(){return at})),n.d(e,"zb",(function(){return it})),n.d(e,"Ab",(function(){return ct})),n.d(e,"Hb",(function(){return ut})),n.d(e,"Ib",(function(){return st})),n.d(e,"M",(function(){return lt})),n.d(e,"g",(function(){return mt})),n.d(e,"Jb",(function(){return dt})),n.d(e,"kb",(function(){return ft})),n.d(e,"lb",(function(){return ht})),n.d(e,"D",(function(){return pt})),n.d(e,"A",(function(){return bt})),n.d(e,"fb",(function(){return gt})),n.d(e,"mb",(function(){return wt})),n.d(e,"nb",(function(){return _t})),n.d(e,"ob",(function(){return vt})),n.d(e,"B",(function(){return Ot})),n.d(e,"bb",(function(){return jt})),n.d(e,"Y",(function(){return kt})),n.d(e,"N",(function(){return yt})),n.d(e,"Q",(function(){return Ct})),n.d(e,"O",(function(){return xt})),n.d(e,"P",(function(){return It})),n.d(e,"h",(function(){return Dt})),n.d(e,"u",(function(){return Tt})),n.d(e,"t",(function(){return St})),n.d(e,"X",(function(){return Lt})),n.d(e,"pb",(function(){return Pt})),n.d(e,"rb",(function(){return $t})),n.d(e,"b",(function(){return Ft})),n.d(e,"qb",(function(){return Mt})),n.d(e,"l",(function(){return Ut})),n.d(e,"a",(function(){return Et}));var r=n("b6bd");function o(t){return Object(r["a"])({url:"setting/config/header_basics",method:"get",params:t})}function a(t,e){return Object(r["a"])({url:e,method:"get",params:t})}function i(t){return Object(r["a"])({url:t.url,method:"get",params:t.data})}function c(){return Object(r["a"])({url:"notify/sms/temp/create",method:"get"})}function u(t){return Object(r["a"])({url:"serve/login",method:"post",data:t})}function s(){return Object(r["a"])({url:"serve/info",method:"get"})}function l(t){return Object(r["a"])({url:"serve/sms/open",method:"get",params:t})}function m(t){return Object(r["a"])({url:"serve/opn_express",method:"post",data:t})}function d(t){return Object(r["a"])({url:"serve/open",method:"get",params:t})}function f(t){return Object(r["a"])({url:"serve/checkCode",method:"post",data:t})}function h(t){return Object(r["a"])({url:"serve/modify",method:"post",data:t})}function p(t){return Object(r["a"])({url:"serve/update_phone",method:"post",data:t})}function b(t){return Object(r["a"])({url:"serve/record",method:"get",params:t})}function g(t){return Object(r["a"])({url:"serve/export_temp",method:"get",params:t})}function w(){return Object(r["a"])({url:"serve/export_all",method:"get"})}function _(t){return Object(r["a"])({url:"serve/captcha",method:"post",data:t})}function v(t){return Object(r["a"])({url:"serve/register",method:"post",data:t})}function O(t){return Object(r["a"])({url:"serve/meal_list",method:"get",params:t})}function j(t){return Object(r["a"])({url:"serve/pay_meal",method:"post",data:t})}function k(t){return Object(r["a"])({url:"notify/sms/record",method:"get",params:t})}function y(){return Object(r["a"])({url:"merchant/store",method:"GET"})}function C(){return Object(r["a"])({url:"merchant/store/address",method:"GET"})}function x(t){return Object(r["a"])({url:"merchant/store/".concat(t.id),method:"POST",data:t})}function I(t){return Object(r["a"])({url:"freight/express",method:"get",params:t})}function D(){return Object(r["a"])({url:"/freight/express/create",method:"get"})}function T(t){return Object(r["a"])({url:"freight/express/".concat(t,"/edit"),method:"get"})}function S(t){return Object(r["a"])({url:"freight/express/set_status/".concat(t.id,"/").concat(t.status),method:"PUT"})}function L(){return Object(r["a"])({url:"freight/express/sync_express",method:"get"})}function P(t){return Object(r["a"])({url:"setting/role",method:"GET",params:t})}function $(t){return Object(r["a"])({url:"setting/role/set_status/".concat(t.id,"/").concat(t.status),method:"PUT"})}function F(t){return Object(r["a"])({url:"setting/role/".concat(t.id),method:"post",data:t})}function M(t){return Object(r["a"])({url:"setting/role/".concat(t,"/edit"),method:"get"})}function U(){return Object(r["a"])({url:"setting/role/create",method:"get"})}function E(t){return Object(r["a"])({url:"app/wechat/kefu",method:"get",params:t})}function N(t){return Object(r["a"])({url:"app/wechat/kefu/create",method:"get",params:t})}function R(){return Object(r["a"])({url:"app/wechat/kefu/add",method:"get"})}function A(t){return Object(r["a"])({url:"app/wechat/kefu",method:"post",data:t})}function B(t){return Object(r["a"])({url:"app/wechat/kefu/set_status/".concat(t.id,"/").concat(t.account_status),method:"PUT"})}function G(t){return Object(r["a"])({url:"app/wechat/kefu/".concat(t,"/edit"),method:"GET"})}function z(t,e){return Object(r["a"])({url:"app/wechat/kefu/record/".concat(e),method:"GET",params:t})}function V(t){return Object(r["a"])({url:"app/wechat/kefu/chat_list",method:"GET",params:t})}function J(){return Object(r["a"])({url:"notify/sms/is_login",method:"GET"})}function Y(){return Object(r["a"])({url:"notify/sms/logout",method:"GET"})}function q(t){return Object(r["a"])({url:"setting/city/list/".concat(t),method:"get"})}function H(t){return Object(r["a"])({url:"setting/city/add/".concat(t),method:"get"})}function W(t){return Object(r["a"])({url:"setting/city/".concat(t,"/edit"),method:"get"})}function K(t){return Object(r["a"])({url:"setting/shipping_templates/list",method:"get",params:t})}function Q(t){return Object(r["a"])({url:"setting/shipping_templates/city_list",method:"get"})}function X(t,e){return Object(r["a"])({url:"setting/shipping_templates/save/".concat(t),method:"post",data:e})}function Z(t){return Object(r["a"])({url:"setting/shipping_templates/".concat(t,"/edit"),method:"get"})}function tt(){return Object(r["a"])({url:"merchant/store/get_header",method:"get"})}function et(t){return Object(r["a"])({url:"merchant/store",method:"get",params:t})}function nt(t,e){return Object(r["a"])({url:"merchant/store/set_show/".concat(t,"/").concat(e),method:"put"})}function rt(t){return Object(r["a"])({url:"merchant/store/get_info/".concat(t),method:"get"})}function ot(t){return Object(r["a"])({url:"merchant/store_staff",method:"get",params:t})}function at(){return Object(r["a"])({url:"merchant/store_staff/create",method:"get"})}function it(t){return Object(r["a"])({url:"merchant/store_staff/".concat(t,"/edit"),method:"get"})}function ct(t,e){return Object(r["a"])({url:"merchant/store_staff/set_show/".concat(t,"/").concat(e),method:"put"})}function ut(t){return Object(r["a"])({url:"merchant/verify_order",method:"get",params:t})}function st(t){return Object(r["a"])({url:"merchant/verify/spread_info/".concat(t),method:"get"})}function lt(){return Object(r["a"])({url:"merchant/store_list",method:"get"})}function mt(){return Object(r["a"])({url:"setting/city/clean_cache",method:"get"})}function dt(t){return Object(r["a"])({url:"app/wechat/speechcraft",method:"get",params:t})}function ft(t){return Object(r["a"])({url:"app/wechat/speechcraft/create",method:"get",params:t})}function ht(t){return Object(r["a"])({url:"app/wechat/speechcraft/".concat(t,"/edit"),method:"get"})}function pt(t){return Object(r["a"])({url:"app/wechat/kefu/login/".concat(t),method:"get"})}function bt(t){return Object(r["a"])({url:"app/feedback",method:"get",params:t})}function gt(t){return Object(r["a"])({url:"serve/sms/sign",method:"PUT",data:t})}function wt(){return Object(r["a"])({url:"app/wechat/speechcraftcate",method:"get"})}function _t(){return Object(r["a"])({url:"app/wechat/speechcraftcate/create",method:"get"})}function vt(t){return Object(r["a"])({url:"app/wechat/speechcraftcate/".concat(t,"/edit"),method:"get"})}function Ot(t){return Object(r["a"])({url:"app/feedback/".concat(t,"/edit"),method:"get"})}function jt(){return Object(r["a"])({url:"serve/open",method:"get"})}function kt(){return Object(r["a"])({url:"serve/dump_open",method:"get"})}function yt(t){return Object(r["a"])({url:"setting/system_out/index",method:"get",params:t})}function Ct(t,e){return Object(r["a"])({url:"setting/system_out/set_status/".concat(t,"/").concat(e),method:"put"})}function xt(t){return Object(r["a"])({url:"setting/system_out/save",method:"post",params:t})}function It(t,e){return Object(r["a"])({url:"setting/system_out/update/".concat(t),method:"post",params:e})}function Dt(t){return Object(r["a"])({url:"city",method:"get",params:t})}function Tt(t){return Object(r["a"])({url:"setting/config/edit_new_build/"+t,method:"get"})}function St(){return Object(r["a"])({url:"/setting/config/image",method:"get"})}function Lt(t){return Object(r["a"])({url:"setting/config/save_basics",method:"post",data:t})}function Pt(t){return Object(r["a"])({url:"/setting/config/storage",method:"get",params:t})}function $t(t){return Object(r["a"])({url:"/setting/config/storage/synch/".concat(t),method:"put"})}function Ft(t){return Object(r["a"])({url:"/setting/config/storage/create/".concat(t),method:"get"})}function Mt(t){return Object(r["a"])({url:"/setting/config/storage/status/".concat(t),method:"put"})}function Ut(t){return Object(r["a"])({url:"/setting/config/storage/domain/".concat(t),method:"get"})}function Et(t){return Object(r["a"])({url:"/setting/config/storage/form/".concat(t),method:"get"})}},"9b41":function(t,e,n){"use strict";n.d(e,"V",(function(){return o})),n.d(e,"P",(function(){return a})),n.d(e,"U",(function(){return i})),n.d(e,"y",(function(){return c})),n.d(e,"v",(function(){return u})),n.d(e,"x",(function(){return s})),n.d(e,"w",(function(){return l})),n.d(e,"z",(function(){return m})),n.d(e,"s",(function(){return d})),n.d(e,"k",(function(){return f})),n.d(e,"j",(function(){return h})),n.d(e,"E",(function(){return p})),n.d(e,"u",(function(){return b})),n.d(e,"F",(function(){return g})),n.d(e,"Q",(function(){return w})),n.d(e,"G",(function(){return _})),n.d(e,"J",(function(){return v})),n.d(e,"W",(function(){return O})),n.d(e,"h",(function(){return j})),n.d(e,"g",(function(){return k})),n.d(e,"t",(function(){return y})),n.d(e,"m",(function(){return C})),n.d(e,"c",(function(){return x})),n.d(e,"b",(function(){return I})),n.d(e,"a",(function(){return D})),n.d(e,"i",(function(){return T})),n.d(e,"d",(function(){return S})),n.d(e,"D",(function(){return L})),n.d(e,"H",(function(){return P})),n.d(e,"I",(function(){return $})),n.d(e,"f",(function(){return F})),n.d(e,"N",(function(){return M})),n.d(e,"M",(function(){return U})),n.d(e,"l",(function(){return E})),n.d(e,"T",(function(){return N})),n.d(e,"e",(function(){return R})),n.d(e,"L",(function(){return A})),n.d(e,"K",(function(){return B})),n.d(e,"O",(function(){return G})),n.d(e,"B",(function(){return z})),n.d(e,"r",(function(){return V})),n.d(e,"q",(function(){return J})),n.d(e,"n",(function(){return Y})),n.d(e,"o",(function(){return q})),n.d(e,"p",(function(){return H})),n.d(e,"A",(function(){return W})),n.d(e,"R",(function(){return K})),n.d(e,"S",(function(){return Q})),n.d(e,"C",(function(){return X}));var r=n("b6bd");function o(){return Object(r["a"])({url:"work/tree",method:"get"})}function a(){return Object(r["a"])({url:"work/label",method:"get"})}function i(){return Object(r["a"])({url:"work/synchMember",method:"post"})}function c(){return Object(r["a"])({url:"work/channel/cate",method:"get"})}function u(){return Object(r["a"])({url:"work/channel/cate/create",method:"get"})}function s(t){return Object(r["a"])({url:"/work/channel/cate/".concat(t,"/edit"),method:"get"})}function l(t){return Object(r["a"])({url:"/work/channel/cate/".concat(t),method:"delete"})}function m(t){return Object(r["a"])({url:"work/channel/code",method:"get",params:t})}function d(t){return Object(r["a"])({url:"work/channel/code",method:"post",data:t})}function f(t){return Object(r["a"])({url:"work/channel/code/".concat(t),method:"get"})}function h(t){return Object(r["a"])({url:"work/channel/code/client",method:"get",params:t})}function p(t,e){return Object(r["a"])({url:"work/channel/code/".concat(t),method:"put",data:e})}function b(t){return Object(r["a"])({url:"work/channel/code/bactch/cate",method:"post",data:t})}function g(){return Object(r["a"])({url:"work/department",method:"get"})}function w(t){return Object(r["a"])({url:"work/member",method:"get",params:t})}function _(t){return Object(r["a"])({url:"work/group_chat",method:"get",params:t})}function v(){return Object(r["a"])({url:"work/group_chat/synch",method:"post"})}function O(t){return Object(r["a"])({url:"work/welcome",method:"post",data:t})}function j(t){return Object(r["a"])({url:"work/welcome",method:"get",params:t})}function k(t){return Object(r["a"])({url:"work/welcome/".concat(t),method:"get"})}function y(t,e){return Object(r["a"])({url:"work/welcome/".concat(t),method:"put",data:e})}function C(t){return Object(r["a"])({url:"work/group_chat_auth",method:"post",data:t})}function x(t){return Object(r["a"])({url:"work/group_chat_auth",method:"get",params:t})}function I(t){return Object(r["a"])({url:"work/group_chat_auth/".concat(t),method:"get"})}function D(t,e){return Object(r["a"])({url:"work/group_chat_auth/".concat(t),method:"put",data:e})}function T(t){return Object(r["a"])({url:"work/client",method:"get",params:t})}function S(t){return Object(r["a"])({url:"work/group_chat/member",method:"get",params:t})}function L(){return Object(r["a"])({url:"work/client/synch",method:"get"})}function P(t){return Object(r["a"])({url:"work/group_chat/statistics",method:"get",params:t})}function $(t){return Object(r["a"])({url:"work/group_chat/statisticsList",method:"get",params:t})}function F(t){return Object(r["a"])({url:"work/group_template",method:"get",params:t})}function M(t){return Object(r["a"])({url:"work/group_template",method:"post",data:t})}function U(t){return Object(r["a"])({url:"work/group_template/".concat(t),method:"get"})}function E(t){return Object(r["a"])({url:"work/moment",method:"get",params:t})}function N(t){return Object(r["a"])({url:"/work/moment",method:"post",data:t})}function R(t){return Object(r["a"])({url:"work/group_template_chat",method:"get",params:t})}function A(t){return Object(r["a"])({url:"work/group_template_chat",method:"post",data:t})}function B(t){return Object(r["a"])({url:"work/group_template_chat/".concat(t),method:"get"})}function G(t){return Object(r["a"])({url:"work/group_template/sendMessage",method:"post",data:t})}function z(t){return Object(r["a"])({url:"work/client/count",method:"post",data:t})}function V(t,e){return Object(r["a"])({url:"work/group_template/memberList/".concat(t),method:"get",params:e})}function J(t,e){return Object(r["a"])({url:"work/group_template/clientList/".concat(t),method:"get",params:e})}function Y(t,e){return Object(r["a"])({url:"work/group_template_chat/groupChatList/".concat(t),method:"get",params:e})}function q(t,e){return Object(r["a"])({url:"work/group_template_chat/groupChatOwnerList/".concat(t),method:"get",params:e})}function H(t){return Object(r["a"])({url:"work/group_template_chat/getOwnerChatList",method:"get",params:t})}function W(t){return Object(r["a"])({url:"work/client/batchLabel",method:"post",data:t})}function K(t){return Object(r["a"])({url:"work/moment/".concat(t),method:"get"})}function Q(t){return Object(r["a"])({url:"work/moment_list",method:"get",params:t})}function X(t,e){return Object(r["a"])({url:"work/client/".concat(t),method:"put",data:e})}},a493:function(t,e,n){},af30:function(t,e,n){},c297:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex"},[n("Modal",{attrs:{width:"680px",title:"选择成员","mask-closable":!1,"z-index":9},on:{"on-ok":t.handleConfirm,"on-cancel":t.handleConcel},model:{value:t.memberStatus,callback:function(e){t.memberStatus=e},expression:"memberStatus"}},[t.isShow?n("div",{staticClass:"container"},[n("Row",[n("Col",{staticClass:"search-p",attrs:{span:24}},[n("Input",{staticClass:"input-with-select",attrs:{placeholder:"搜索成员",search:""},on:{"on-search":t.searchData},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),n("div",{ref:"treeScoll",staticClass:"tree-box",on:{scroll:t.scroll}},[t.isAppoint?t._e():n("el-tree",{ref:"tree",attrs:{data:t.treeData,props:t.defaultProps,"highlight-current":!0,"default-expand-all":!0,"expand-on-click-node":!1,"filter-node-method":t.filterNode},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.node,o=e.data;return n("div",{staticClass:"custom-tree-node"},[n("span",{staticClass:"flex-box",on:{click:function(){return t.append(r,o)}}},[n("Icon",{staticClass:"tree-icon",attrs:{type:"ios-folder",size:"15",color:"#FFCA28"}}),t._v("\n                "+t._s(r.label)+"\n                "),n("span",[t._v("("+t._s(o.member.length)+")")])],1),n("div",[o.member.length?n("div",{staticClass:"user-list"},t._l(o.member,(function(e,r){return n("div",{key:r,staticClass:"user-item",on:{click:function(n){return n.stopPropagation(),t.checkUser(e)}}},[""!==e.avatar?n("img",{attrs:{src:e.avatar,alt:""}}):t._e(),t._v("\n                    "+t._s(e.name)+"\n                  ")])})),0):t._e()])])}}],null,!1,1386218660)})],1)],1),n("div",{staticClass:"select-box"},[n("div",{staticClass:"title"},[t._v("已选择成员")]),n("div",{staticClass:"list-box"},t._l(t.checkUserList,(function(e,r){return n("div",{key:e.id,staticClass:"select-item"},[n("div",{staticClass:"left"},[n("span",[t._v(t._s(e.name))])]),e.isDelete?t._e():n("div",{staticClass:"right-box"},[n("span",{staticClass:"el-icon-close",on:{click:function(n){return t.handleDeleteUser(e,r)}}})])])})),0)])],1):t._e()])],1)},o=[],a=n("9b41"),i={name:"Department",props:{isEdit:{type:Number,default:0},activeDepartment:{type:Object,default:function(){return null}},userList:{type:Array,default:function(){return[]}},isAppoint:{type:Boolean,default:!1},appointList:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,treeData:[],selectList:{},isShow:!1,memberStatus:!1,checkUserList:[],scrollH:0,filterText:"",openType:"",defaultProps:{children:"children",label:"name"}}},watch:{userList:{handler:function(t,e){this.checkUserList=JSON.parse(JSON.stringify(t))},deep:!0},activeDepartment:{handler:function(t,e){var n=this;if(t){this.isShow=!1;var r=[],o=function(){var e=function e(n){r=n.map((function(n,r,o){return n.children?(t.hasOwnProperty(n.id)?n.isCheck=!0:n.isCheck=!1,e(n.children)):t.hasOwnProperty(n.id)?n.isCheck=!0:n.isCheck=!1,o}))};e(n.treeData)};o(),this.$nextTick((function(){n.$set(n,"treeData",r[0]),n.isShow=!0,n.selectList=t}))}},deep:!0},filterText:function(t){this.$refs.tree.filter(t)},isAppoint:{handler:function(t){console.log(this.appointList)},deep:!0}},mounted:function(){this.getTreeData()},methods:{getTreeData:function(){var t=this;Object(a["V"])().then((function(e){t.isShow=!0,t.treeData=e.data}))},handleClick:function(t,e){this.isShow=!1,this.$set(t,"isCheck",!0),this.isShow=!0,this.$set(this.selectList,t.id,t)},append:function(t,e){this.$Message.warning("只允许添加成员")},handleDelete:function(t){var e=this,n=[];this.isShow=!1,delete this.selectList[t.id];var r=function(){var r=function e(r){n=r.map((function(n,r,o){return n.children?(n.id===t.id&&(n.isCheck=!1),e(n.children)):n.id===t.id&&(n.isCheck=!1),o}))};r(e.treeData)};r(),this.$nextTick((function(){e.$set(e,"treeData",n[0]),e.isShow=!0}))},handleConfirm:function(){var t=this.checkUserList;this.$emit("changeMastart",t,this.openType),this.checkUserList=[]},reseatData:function(){var t=this;this.isShow=!1;var e=[],n=function(){var n=function t(n){e=n.map((function(e,n,r){return e.isCheck=!1,e.children?(e.user.forEach((function(t){t.isCheck=!1})),t(e.children)):e.user.forEach((function(t){t.isCheck=!1})),r}))};n(t.treeData)};n(),this.$nextTick((function(){t.checkUserList=JSON.parse(JSON.stringify(t.userList)),t.$set(t,"treeData",e[0]),t.isShow=!0}))},scroll:function(t){this.scrollH=t.target.scrollTop},checkUser:function(t){var e=this;if(0===this.checkUserList.length)this.$set(t,"isCheck",!0),this.checkUserList.push(t);else{var n=this.checkUserList.some((function(e,n){return e.userid===t.userid}));if(n)return this.$Message.warning("该人员已选择");this.$set(t,"isCheck",!0),this.checkUserList.push(t)}this.$nextTick((function(){e.isShow=!0,e.$nextTick((function(){e.$refs.treeScoll.scroll(0,e.scrollH)}))}))},handleDeleteUser:function(t,e){var n=this;this.checkUserList.splice(e,1);var r=function(){var e=function(e){e.forEach((function(e,n,r){e.member.forEach((function(e){e.id===t.id&&(e.isCheck=!1)}))}))};e(n.treeData)};r(),this.$nextTick((function(){n.isShow=!0}))},filterNode:function(t,e,n){return!t||(-1!==e.label.indexOf(t)||this.checkBelongToChooseNode(t,e,n))},checkBelongToChooseNode:function(t,e,n){var r=n.level;if(1===r)return!1;var o=n.parent;if(n.data.user.length>0)var a=n.data.user.map((function(e){return-1!==e.card.name.indexOf(t)}));if(void 0===a)return!1;for(var i=0;i<a.length;i++)if(!0===a[i])return!0;var c=0;while(c<r-1){if(-1!==o.data.label.indexOf(t))return!0;o=o.parent,c++}return!1},getItemTree:function(t){var e=this;return t&&t.forEach((function(t,n){void 0!=t.user&&t.user.length>0&&t.user.forEach((function(t){t.label=t.card.name,t.children=t})),t.children&&t.children.length>0&&e.getItemTree(t.children)})),t},searchData:function(){},handleConcel:function(){}}},c=i,u=(n("ea8a"),n("2877")),s=Object(u["a"])(c,r,o,!1,null,"c541e030",null);e["a"]=s.exports},ea8a:function(t,e,n){"use strict";var r=n("a493"),o=n.n(r);o.a},f349:function(t,e,n){"use strict";var r=n("af30"),o=n.n(r);o.a}}]);