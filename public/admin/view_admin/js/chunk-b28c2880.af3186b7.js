(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b28c2880"],{"134a":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"i-layout-page-header"},[r("PageHeader",{staticClass:"product_tabs",attrs:{"hidden-breadcrumb":""}},[r("div",{attrs:{slot:"title"},slot:"title"},[r("div",{staticStyle:{float:"left"}},[r("router-link",{attrs:{to:{path:"/admin/work/channel_code"}}},[r("div",{staticClass:"font-sm after-line"},[r("span",{staticClass:"iconfont iconfanhui"}),r("span",{staticClass:"pl10"},[t._v("返回")])])])],1),r("span",{staticClass:"mr20 ml16"},[t._v("添加企业渠道码")])])])],1),r("Card",{staticClass:"ivu-mt min-ht",attrs:{bordered:!1,"dis-hover":""}},[r("div",{staticClass:"acea-row row-center-wrapper"},[r("div",{staticClass:"step_container"},[r("Steps",{attrs:{current:t.current}},[r("Step",{attrs:{title:"基础设置"}}),r("Step",{attrs:{title:"企微成员设置"}}),r("Step",{attrs:{title:"欢迎语设置"}})],1)],1)]),0==t.current?r("div",[r("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":110,"label-colon":!0,rules:t.ruleValidate}},[r("FormItem",{attrs:{label:"二维码名称",prop:"name"}},[r("Input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入二维码名称"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),r("FormItem",{attrs:{label:"二维码分类",prop:"cate_id"}},[r("Select",{staticStyle:{width:"400px"},model:{value:t.formItem.cate_id,callback:function(e){t.$set(t.formItem,"cate_id",e)},expression:"formItem.cate_id"}},t._l(t.channelCateList,(function(e,n){return r("Option",{key:n,attrs:{value:e.id.toString()}},[t._v(t._s(e.name))])})),1)],1),r("FormItem",{attrs:{label:"客户标签",prop:"label_id"}},[r("TreeSelect",{directives:[{name:"width",rawName:"v-width",value:400,expression:"400"}],attrs:{data:t.labelList,multiple:""},model:{value:t.formItem.label_id,callback:function(e){t.$set(t.formItem,"label_id",e)},expression:"formItem.label_id"}})],1),r("FormItem",{attrs:{label:"自动添加好友"}},[r("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.formItem.skip_verify,callback:function(e){t.$set(t.formItem,"skip_verify",e)},expression:"formItem.skip_verify"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),r("div",{staticClass:"desc"},[t._v("\n            开启时，客户添加时无需企业成员确认，自动成为好友\n          ")])],1)],1)],1):t._e(),1==t.current?r("div",[r("Form",{attrs:{model:t.formItem,"label-width":110,"label-colon":!0}},[r("FormItem",{attrs:{label:"类型",prop:"type"}},[r("RadioGroup",{on:{"on-change":t.changeType},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[r("Radio",{attrs:{label:"0"}},[t._v("全天在线")]),r("Radio",{attrs:{label:"1"}},[t._v("自动上下线")])],1),r("div",{staticClass:"desc"},[t._v("\n            同一个二维码可选择多个客服成员进行接待，客户扫码后随机分配一名客服人员\n          ")])],1),"0"==t.formItem.type?[r("FormItem",{attrs:{label:"添加成员"}},[r("Button",{attrs:{icon:"md-add"},on:{click:function(e){return t.addUser("one")}}},[t._v("添加成员")]),r("div",{staticStyle:{"margin-top":"10px"}},t._l(t.formItem.userList,(function(e,n){return r("Tag",{key:n,attrs:{closable:"",name:e.name,size:"large"},on:{"on-close":t.handleDel}},[t._v(t._s(e.name))])})),1)],1)]:t._e(),"1"==t.formItem.type?t._l(t.formItem.cycle,(function(e,n){return r("div",{key:n},[r("FormItem",[r("div",{staticClass:"cycle acea-row row-between"},[r("span",[t._v("周期"+t._s(n+1))]),r("span",{staticClass:"danger_del",on:{click:function(r){return t.cycleDel(e)}}},[t._v("删除")])]),r("div",[r("div",{staticClass:"cycle_item"},[r("FormItem",{attrs:{label:"添加成员"}},[r("Button",{attrs:{icon:"md-add"},on:{click:function(e){return t.addUser("three",n)}}},[t._v("添加成员")]),r("div",{staticClass:"cycle_tag_content"},t._l(e.userids,(function(e,i){return r("div",{key:i,staticClass:"ivu-tag ivu-tag-size-large ivu-tag-default ivu-tag-closable ivu-tag-checked"},[r("span",{staticClass:"ivu-tag-text"},[t._v(t._s(e.name))]),r("i",{staticClass:"ivu-icon ivu-icon-ios-close",on:{click:function(r){return t.cycleItemDel(e.name,n)}}})])})),0)],1)],1),r("div",{staticClass:"cycle_item"},[r("FormItem",{attrs:{label:"工作周期"}},[r("Select",{staticStyle:{width:"360px"},attrs:{multiple:""},model:{value:e.wokr_time,callback:function(r){t.$set(e,"wokr_time",r)},expression:"item.wokr_time"}},t._l(t.weekList,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),r("div",{staticClass:"cycle_item"},[r("FormItem",{attrs:{label:"上班时间"}},[r("TimePicker",{staticStyle:{width:"360px"},attrs:{type:"timerange",format:"HH:mm",placement:"bottom-end",placeholder:"请选择上班时间"},model:{value:e.workTime,callback:function(r){t.$set(e,"workTime",r)},expression:"item.workTime"}})],1)],1)])])],1)})):t._e(),"1"==t.formItem.type?r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.pushCycle()}}},[t._v("添加工作周期")])],1):t._e(),r("FormItem",{attrs:{label:"员工添加上限"}},[r("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.formItem.add_upper_limit,callback:function(e){t.$set(t.formItem,"add_upper_limit",e)},expression:"formItem.add_upper_limit"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1),t.formItem.useridLimit.length&&t.formItem.add_upper_limit?r("FormItem",[r("Table",{attrs:{border:"",columns:t.reserveUser,data:t.formItem.useridLimit,width:"254",size:"small"},scopedSlots:t._u([{key:"name",fn:function(e){var n=e.row;return[r("span",[t._v(t._s(n.name))])]}},{key:"max",fn:function(e){var n=e.row,i=e.index;return[r("Input",{attrs:{type:"number"},on:{"on-change":function(e){return t.setData(e,i,"max")}},model:{value:n.max,callback:function(e){t.$set(n,"max",e)},expression:"row.max"}})]}}],null,!1,1970181206)})],1):t._e(),r("FormItem",{attrs:{label:"备用员工",required:""}},[r("Button",{attrs:{icon:"md-add"},on:{click:function(e){return t.addUser("two")}}},[t._v("添加成员")]),r("div",{staticStyle:{"margin-top":"10px"}},t._l(t.formItem.reserve_userid,(function(e,n){return r("Tag",{key:n,attrs:{closable:"",name:e.name,size:"large"},on:{"on-close":function(e){return t.handleClose(n)}}},[t._v(t._s(e.name))])})),1)],1)],2)],1):t._e(),2==t.current?r("div",[r("Form",{attrs:{model:t.formItem,"label-width":110,"label-colon":!0}},[r("FormItem",{attrs:{label:"开关",prop:"type"}},[r("RadioGroup",{model:{value:t.formItem.welcome_type,callback:function(e){t.$set(t.formItem,"welcome_type",e)},expression:"formItem.welcome_type"}},[r("Radio",{attrs:{label:"0"}},[t._v("渠道欢迎语")]),r("Radio",{attrs:{label:"1"}},[t._v("默认欢迎语")])],1),r("div",{staticClass:"desc"},[t._v("\n            关闭后，客户扫该渠道活码，依然可对该客户自动打标签，但仅收到系统的【欢迎语】消息\n          ")])],1),"0"==t.formItem.welcome_type?[r("FormItem",{attrs:{label:"欢迎语内容"}},[r("Input",{staticStyle:{width:"460px"},attrs:{type:"textarea",rows:4},model:{value:t.formItem.welcome_words.text.content,callback:function(e){t.$set(t.formItem.welcome_words.text,"content",e)},expression:"formItem.welcome_words.text.content"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary",ghost:""},on:{click:function(e){return t.insertName()}}},[t._v("插入客户名称")]),r("div",{staticClass:"desc"},[t._v("\n            可以插入客户名称，在发送给客户之前系统会自动解析成客户的名称\n          ")])],1),r("FormItem",[r("Poptip",{attrs:{trigger:"hover"}},[r("template",{slot:"content"},[r("div",{staticClass:"poptip_content"},[r("div",{on:{click:function(e){return t.modalPicTap("image")}}},[r("div",{staticClass:"add_img acea-row row-center-wrapper"},[r("span",{staticClass:"iconfont icontupian4"})]),r("span",{staticClass:"tip_tit"},[t._v("图片")])]),r("div",{on:{click:function(e){return t.addRoutine()}}},[r("div",{staticClass:"add_routine acea-row row-center-wrapper"},[r("span",{staticClass:"iconfont iconxiaochengxu"})]),r("span",{staticClass:"tip_tit"},[t._v("小程序")])])])]),r("Button",{attrs:{type:"success"}},[t._v("添加图片/小程序")])],2)],1),r("FormItem",t._l(t.formItem.welcome_words.attachments,(function(e,n){return r("div",{key:n},[r("div",{staticClass:"ivu-tag ivu-tag-dot ivu-tag-size-default ivu-tag-closable ivu-tag-checked"},["image"==e.msgtype?r("span",{staticClass:"iconfont icontupian4 tag_icon"}):t._e(),"miniprogram"==e.msgtype?r("span",{staticClass:"iconfont iconxiaochengxu tag_icon"}):t._e(),"image"==e.msgtype?r("span",{staticClass:"ivu-tag-text"},[t._v(t._s(e.image.pic_url))]):t._e(),"miniprogram"==e.msgtype?r("span",{staticClass:"ivu-tag-text"},[t._v(t._s(e.miniprogram.title))]):t._e(),"image"==e.msgtype?r("i",{staticClass:"ivu-icon ivu-icon-ios-close",on:{click:function(r){return t.wordsDel(e.image.pic_url)}}}):t._e(),"miniprogram"==e.msgtype?r("i",{staticClass:"ivu-icon ivu-icon-ios-close",on:{click:function(r){return t.wordsDel(e.miniprogram.title)}}}):t._e()])])})),0)]:t._e(),r("FormItem",{attrs:{label:"状态"}},[r("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.formItem.status,callback:function(e){t.$set(t.formItem,"status",e)},expression:"formItem.status"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],2)],1):t._e()]),r("Card",{staticClass:"fixed-card",style:{left:t.menuCollapse?t.isMobile?"0":"80px":"200px"},attrs:{bordered:!1,"dis-hover":""}},[r("div",{staticClass:"acea-row row-center-wrapper"},[r("Button",{directives:[{name:"show",rawName:"v-show",value:t.current>0,expression:"current > 0"}],on:{click:function(e){return t.back()}}},[t._v("上一步")]),r("Button",{directives:[{name:"show",rawName:"v-show",value:t.current<2,expression:"current < 2"}],staticClass:"step_btn",attrs:{type:"primary"},on:{click:function(e){return t.next("formItem")}}},[t._v("下一步")]),r("Button",{directives:[{name:"show",rawName:"v-show",value:2==t.current,expression:"current == 2"}],staticClass:"step_btn",attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1)]),r("Modal",{attrs:{width:"960px",scrollable:"","footer-hide":"",closable:"",title:"logo","mask-closable":!1,"z-index":9},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?r("uploadPictures",{attrs:{isChoice:t.isChoice,gridBtn:t.gridBtn,gridPic:t.gridPic},on:{getPic:t.getPic}}):t._e()],1),r("Modal",{attrs:{title:"添加小程序消息","z-index":1},on:{"on-ok":t.routineConfirm},model:{value:t.modalRoutine,callback:function(e){t.modalRoutine=e},expression:"modalRoutine"}},[r("Form",{attrs:{model:t.formItem,"label-width":110}},[r("FormItem",{attrs:{label:"封面图:"}},[r("div",{staticClass:"picBox",on:{click:function(e){return t.modalPicTap("routine")}}},[t.rontineObj.miniprogram.pic_url?r("div",{staticClass:"pictrue"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.rontineObj.miniprogram.pic_url,expression:"rontineObj.miniprogram.pic_url"}]})]):r("div",{staticClass:"upLoad"},[r("div",{staticClass:"iconfont"},[t._v("+")])])])]),r("FormItem",{attrs:{label:"小程序消息标题:"}},[r("Input",{model:{value:t.rontineObj.miniprogram.title,callback:function(e){t.$set(t.rontineObj.miniprogram,"title",e)},expression:"rontineObj.miniprogram.title"}})],1),r("FormItem",{attrs:{label:"小程序Appid:"}},[r("Input",{model:{value:t.rontineObj.miniprogram.appid,callback:function(e){t.$set(t.rontineObj.miniprogram,"appid",e)},expression:"rontineObj.miniprogram.appid"}})],1),r("FormItem",{attrs:{label:"小程序功能页:"}},[r("Input",{model:{value:t.rontineObj.miniprogram.page,callback:function(e){t.$set(t.rontineObj.miniprogram,"page",e)},expression:"rontineObj.miniprogram.page"}})],1)],1)],1),r("department",{ref:"department",attrs:{"active-department":t.activeDepartment,"is-site":t.isSite,userList:t.userList,"only-department":t.onlyDepartment},on:{changeMastart:t.changeMastart}})],1)},i=[],o=r("2f62"),a=r("b0e7"),c=r("c297"),u=r("90e7"),s=r("9b41");r("3022");function l(t){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function m(t){return p(t)||d(t)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function p(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(r,!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var v={name:"",data:function(){return{current:0,formItem:{userList:[],name:"",cate_id:0,label_id:[],type:"0",userids:[],skip_verify:0,add_upper_limit:0,useridLimit:[],reserve_userid:[],cycle:[{wokr_time:[],userids:[],workTime:""}],welcome_type:"0",welcome_words:{text:{content:""},attachments:[]},status:1},weekList:[{value:1,label:"周一"},{value:2,label:"周二"},{value:3,label:"周三"},{value:4,label:"周四"},{value:5,label:"周五"},{value:6,label:"周六"},{value:0,label:"周日"}],rontineObj:{msgtype:"miniprogram",miniprogram:{pic_url:"",pic_media_id:"",title:"",appid:"",page:""}},imageObj:{msgtype:"image",image:{media_id:"",pic_url:""}},picTit:"",ruleValidate:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],cate_id:[{required:!0,message:"请选择渠道码分类",trigger:"change"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],label_id:[{required:!0,message:"请选择客户标签",trigger:"change",type:"array"}]},labelList:[],reserveUser:[{title:"员工名称",slot:"name",minWidth:80,align:"center"},{title:"上限",slot:"max",minWidth:100,align:"center"}],cycleitemIndex:0,channelCateList:[],modalPic:!1,modalRoutine:!1,memberStatus:!1,isChoice:"单选",gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},treeData:[],frame_id:0,activeDepartment:{},isSite:!0,onlyDepartment:!1,openType:"",userList:[],userLimitAll:{},switchStatus:!1}},components:{uploadPictures:a["a"],department:c["a"]},computed:g({},Object(o["e"])("admin/layout",["isMobile","menuCollapse"]),{labelWidth:function(){return this.isMobile?void 0:80},labelPosition:function(){return this.isMobile?"top":"left"}}),created:function(){"0"!==this.$route.params.id&&this.$route.params.id&&this.getInfo(),this.getWorkLabel(),this.getWorkChannelCate()},watch:{"formItem.type":function(t,e){t!==e&&(this.formItem.userids=[])},"formItem.useridLimit":function(t,e){this.userLimitAll[parseInt(this.formItem.type)]=this.formItem.useridLimit}},methods:{changeType:function(t){this.formItem.useridLimit=this.userLimitAll[parseInt(t)]||[]},getWorkLabel:function(){var t=this;Object(s["P"])().then((function(e){t.labelList=e.data.map((function(e){return t.mapTree(e)}))}))},mapTree:function(t){var e=this,r=Array.isArray(t.children)&&t.children.length>0;return{title:t.label,expand:!0,value:t.value,selected:!1,checked:!1,children:r?t.children.map((function(t){return e.mapTree(t)})):[]}},getWorkChannelCate:function(){var t=this;Object(s["y"])().then((function(e){t.channelCateList=e.data}))},setData:function(t,e,r){t.target.value=t.target.value.replace(/\D/g,""),this.formItem.useridLimit[e][r]=t.target.value},changeMastart:function(t,e){if("one"==e)this.formItem.useridLimit=t.map((function(t){return{userid:t.userid,name:t.name,max:100}})),this.formItem.userList=t.map((function(t){return{userid:t.userid,name:t.name}}));else if("two"==e)this.formItem.reserve_userid=t.map((function(t){return{userid:t.userid,name:t.name}}));else if("three"==e){for(var r=0;r<this.formItem.cycle.length;r++)r==this.cycleitemIndex&&(this.formItem.cycle[r].userids=t.map((function(t){return{userid:t.userid,name:t.name}})));for(var n=0;n<t.length;n++){var i=t[n];this.formItem.useridLimit.push(Object.assign({max:100},i))}var o=this.unique(this.formItem.useridLimit,"name");this.$set(this.formItem,"useridLimit",o),this.this.userLimitAll[parseInt(this.formItem.type)]=o}},handleDel:function(t,e){var r=this.formItem.userList.findIndex((function(t){return t.name==e}));if(this.formItem.userList.splice(r,1),this.formItem.add_upper_limit){var n=this.formItem.useridLimit.findIndex((function(t){return t.name==e}));this.formItem.useridLimit.splice(n,1)}},handleClose:function(t){this.formItem.reserve_userid.splice(t,1)},cycleItemDel:function(t,e){this.formItem.cycle.forEach((function(r,n){if(e==n){var i=r.userids.indexOf(t);r.userids.splice(i,1)}}));var r=this.formItem.useridLimit.findIndex((function(e){return e.name==t}));this.formItem.useridLimit.splice(r,1)},wordsDel:function(t){var e=this.formItem.welcome_words.attachments.indexOf(t);this.formItem.welcome_words.attachments.splice(e,1)},pushCycle:function(){this.formItem.cycle.push({wokr_time:[],userids:"",workTime:""})},cycleDel:function(t,e){var r=this.formItem.cycle.indexOf(e);this.formItem.cycle.splice(r,1)},insertName:function(){this.formItem.welcome_words.text.content=this.formItem.welcome_words.text.content.concat("##客户名称##")},next:function(t){var e=this;if(0==this.current)this.$refs[t].validate((function(t){t&&e.current++}));else if(1==this.current){if("0"==this.formItem.type&&!this.formItem.userList.length)return this.$Message.error("请添加成员");if("1"==this.formItem.type&&!this.formItem.cycle.length)return this.$Message.error("请添加成员");if(!this.formItem.reserve_userid.length)return this.$Message.error("备用成员不能为空");this.current++}},back:function(){this.current--},getInfo:function(){var t=this;Object(s["k"])(this.$route.params.id).then((function(e){t.formItem=e.data,t.formItem.cate_id=t.formItem.cate_id.toString(),t.formItem.type=t.formItem.type.toString(),t.formItem.welcome_type=t.formItem.welcome_type.toString();var r=t.userParse(t.formItem.reserve_userid,t.formItem.reserve_user_list,"one");if(t.formItem.reserve_userid=r,t.formItem.useridLimit=e.data.useridLimit,t.userLimitAll[parseInt(t.formItem.type)]=e.data.useridLimit,t.formItem.userList=e.data.user_list,"0"==t.formItem.type){var n=t.userParse(t.formItem.presentUseUserIds,t.formItem.presentUseUserList,"one");t.formItem.userids=n,t.formItem.cycle[0]={userids:[],wokr_time:[],workTime:[]}}else t.formItem.cycle=t.formItem.cycle.map((function(t){return{channel_id:t.channel_id,wokr_time:t.wokr_time,workTime:[t.start_time,t.end_time],userids:t.userItem}}))}))},submit:function(){var t=this;if("0"==this.formItem.welcome_type&&""==this.formItem.welcome_words.text.content)return this.$Message.error("请插入客户名称");var e=this.deepClone(this.formItem);e.cycle.length&&(e.cycle=e.cycle.map((function(t){return{userids:t.userids.map((function(t){return t.userid})),wokr_time:t.wokr_time,start_time:t.workTime[0],end_time:t.workTime[1]}}))),e.useridLimit.length&&(e.useridLimit=e.useridLimit.map((function(t){return{userid:t.userid,max:t.max}}))),e.reserve_userid.length&&(e.reserve_userid=e.reserve_userid.map((function(t){return t.userid}))),e.userList.length&&(e.userids=e.userList.map((function(t){return t.userid}))),e.type=Number(e.type),e.welcome_type=Number(e.welcome_type),"0"!==this.$route.params.id&&this.$route.params.id?Object(s["E"])(this.$route.params.id,e).then((function(e){t.$Message.success("修改成功"),t.$router.push("/admin/work/channel_code")})).catch((function(e){t.$Message.error(e.msg),t.loading=!1})):this.$route.params.id||Object(s["s"])(e).then((function(e){t.$Message.success("渠道码新建成功"),t.$router.push("/admin/work/channel_code")})).catch((function(e){t.$Message.error(e.msg)}))},addRoutine:function(){var t=this;Object(u["u"])("routine").then((function(e){var r=e.data;t.rontineObj.miniprogram.pic_url="",t.rontineObj.miniprogram.title=r.routine_name.value,t.rontineObj.miniprogram.appid=r.routine_appId.value,t.rontineObj.miniprogram.page="/pages/index/index"})),this.modalRoutine=!0},modalPicTap:function(t){this.modalPic=!0,this.picTit=t},getPic:function(t){switch(this.picTit){case"image":this.imageObj.image.pic_url=t.att_dir,this.formItem.welcome_words.attachments.push(this.imageObj);break;case"routine":this.rontineObj.miniprogram.pic_url=t.att_dir;break}this.modalPic=!1},routineConfirm:function(){var t=this.deepClone(this.rontineObj);this.formItem.welcome_words.attachments.push(t)},addUser:function(t,e){switch(this.$refs.department.memberStatus=!0,t){case"one":this.userList=this.formItem.userList,this.$refs.department.openType="one";break;case"two":this.userList=this.formItem.reserve_userid,this.$refs.department.openType="two";break;case"three":this.cycleitemIndex=e,this.formItem.cycle[e].userids.length&&(this.userList=this.formItem.cycle[e].userids),this.$refs.department.openType="three";break;default:break}},unique:function(t,e){var r=new Map;return t.forEach((function(t,n){r.has(t[e])||r.set(t[e],t)})),m(r.values())},deepClone:function(t){var e=Array.isArray(t)?[]:{};if(t&&"object"===l(t))for(var r in t)t.hasOwnProperty(r)&&(e[r]=t&&"object"===l(t[r])?this.deepClone(t[r]):t[r]);return e},userParse:function(t,e,r){var n=[];return"one"==r?(n=t.map((function(t){return{userid:t}})),e.forEach((function(t,e){n[e].name=t})),n):(n=t.map((function(t){return{userid:t.userid,channel_id:t.channel_id,max:t.max}})),e.forEach((function(t,e){n[e].name=t})),n)}}},y=v,_=(r("bd62"),r("2877")),w=Object(_["a"])(y,n,i,!1,null,"64b54e28",null);e["default"]=w.exports},"28a0":function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},3022:function(t,e,r){(function(t){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},i=/%[sdj%]/g;e.format=function(t){if(!O(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(c(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,a=String(t).replace(i,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}})),u=n[r];r<o;u=n[++r])y(u)||!x(u)?a+=" "+u:a+=" "+c(u);return a},e.deprecate=function(r,n){if("undefined"!==typeof t&&!0===t.noDeprecation)return r;if("undefined"===typeof t)return function(){return e.deprecate(r,n).apply(this,arguments)};var i=!1;function o(){if(!i){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}return o};var o,a={};function c(t,r){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(r)?n.showHidden=r:r&&e._extend(n,r),k(n.showHidden)&&(n.showHidden=!1),k(n.depth)&&(n.depth=2),k(n.colors)&&(n.colors=!1),k(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),m(n,t,n.depth)}function u(t,e){var r=c.styles[e];return r?"["+c.colors[r][0]+"m"+t+"["+c.colors[r][1]+"m":t}function s(t,e){return t}function l(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}function m(t,r,n){if(t.customInspect&&r&&S(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return O(i)||(i=m(t,i,n)),i}var o=f(t,r);if(o)return o;var a=Object.keys(r),c=l(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),L(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(r);if(0===a.length){if(S(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(I(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(C(r))return t.stylize(Date.prototype.toString.call(r),"date");if(L(r))return d(r)}var s,v="",y=!1,_=["{","}"];if(b(r)&&(y=!0,_=["[","]"]),S(r)){var w=r.name?": "+r.name:"";v=" [Function"+w+"]"}return I(r)&&(v=" "+RegExp.prototype.toString.call(r)),C(r)&&(v=" "+Date.prototype.toUTCString.call(r)),L(r)&&(v=" "+d(r)),0!==a.length||y&&0!=r.length?n<0?I(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),s=y?p(t,r,n,c,a):a.map((function(e){return h(t,r,n,c,e,y)})),t.seen.pop(),g(s,v,_)):_[0]+v+_[1]}function f(t,e){if(k(e))return t.stylize("undefined","undefined");if(O(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return w(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,r,n,i){for(var o=[],a=0,c=e.length;a<c;++a)U(e,String(a))?o.push(h(t,e,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(t,e,r,n,i,!0))})),o}function h(t,e,r,n,i,o){var a,c,u;if(u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},u.get?c=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(c=t.stylize("[Setter]","special")),U(n,i)||(a="["+i+"]"),c||(t.seen.indexOf(u.value)<0?(c=y(r)?m(t,u.value,null):m(t,u.value,r-1),c.indexOf("\n")>-1&&(c=o?c.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+c.split("\n").map((function(t){return"   "+t})).join("\n"))):c=t.stylize("[Circular]","special")),k(a)){if(o&&i.match(/^\d+$/))return c;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+c}function g(t,e,r){var n=t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return n>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function b(t){return Array.isArray(t)}function v(t){return"boolean"===typeof t}function y(t){return null===t}function _(t){return null==t}function w(t){return"number"===typeof t}function O(t){return"string"===typeof t}function j(t){return"symbol"===typeof t}function k(t){return void 0===t}function I(t){return x(t)&&"[object RegExp]"===T(t)}function x(t){return"object"===typeof t&&null!==t}function C(t){return x(t)&&"[object Date]"===T(t)}function L(t){return x(t)&&("[object Error]"===T(t)||t instanceof Error)}function S(t){return"function"===typeof t}function P(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t}function T(t){return Object.prototype.toString.call(t)}function D(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(k(o)&&(o=Object({NODE_ENV:"production",VUE_APP_API_URL:"",VUE_APP_BUILD_TIME:"2022-5-17 18:48:48",VUE_APP_ENV:"production",VUE_APP_TITLE:"CRMEB",VUE_APP_VERSION:"2.0.0",VUE_APP_WS_ADMIN_URL:"",VUE_APP_WS_KEFU_URL:"",BASE_URL:"/admin/"}).NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(o)){var n=t.pid;a[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else a[r]=function(){};return a[r]},e.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=b,e.isBoolean=v,e.isNull=y,e.isNullOrUndefined=_,e.isNumber=w,e.isString=O,e.isSymbol=j,e.isUndefined=k,e.isRegExp=I,e.isObject=x,e.isDate=C,e.isError=L,e.isFunction=S,e.isPrimitive=P,e.isBuffer=r("d60a");var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function $(){var t=new Date,e=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),E[t.getMonth()],e].join(" ")}function U(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",$(),e.format.apply(e,arguments))},e.inherits=r("28a0"),e._extend=function(t,e){if(!e||!x(e))return t;var r=Object.keys(e),n=r.length;while(n--)t[r[n]]=e[r[n]];return t};var F="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function A(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function z(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!==typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,r).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(A,e,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,n(e)),r}e.promisify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');if(F&&t[F]){var e=t[F];if("function"!==typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,F,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,i)}catch(a){r(a)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),F&&Object.defineProperty(e,F,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=F,e.callbackify=z}).call(this,r("f28c"))},"8c67":function(t,e,r){},"90e7":function(t,e,r){"use strict";r.d(e,"v",(function(){return i})),r.d(e,"k",(function(){return o})),r.d(e,"Cb",(function(){return a})),r.d(e,"Bb",(function(){return c})),r.d(e,"j",(function(){return u})),r.d(e,"Z",(function(){return s})),r.d(e,"gb",(function(){return l})),r.d(e,"cb",(function(){return m})),r.d(e,"db",(function(){return f})),r.d(e,"d",(function(){return d})),r.d(e,"ab",(function(){return p})),r.d(e,"Gb",(function(){return h})),r.d(e,"eb",(function(){return g})),r.d(e,"n",(function(){return b})),r.d(e,"m",(function(){return v})),r.d(e,"c",(function(){return y})),r.d(e,"S",(function(){return _})),r.d(e,"ib",(function(){return w})),r.d(e,"R",(function(){return O})),r.d(e,"jb",(function(){return j})),r.d(e,"tb",(function(){return k})),r.d(e,"I",(function(){return I})),r.d(e,"sb",(function(){return x})),r.d(e,"q",(function(){return C})),r.d(e,"o",(function(){return L})),r.d(e,"p",(function(){return S})),r.d(e,"r",(function(){return P})),r.d(e,"s",(function(){return T})),r.d(e,"V",(function(){return D})),r.d(e,"W",(function(){return E})),r.d(e,"T",(function(){return $})),r.d(e,"U",(function(){return U})),r.d(e,"K",(function(){return F})),r.d(e,"C",(function(){return A})),r.d(e,"G",(function(){return z})),r.d(e,"F",(function(){return N})),r.d(e,"x",(function(){return M})),r.d(e,"H",(function(){return R})),r.d(e,"z",(function(){return B})),r.d(e,"E",(function(){return G})),r.d(e,"y",(function(){return V})),r.d(e,"w",(function(){return J})),r.d(e,"J",(function(){return H})),r.d(e,"i",(function(){return W})),r.d(e,"e",(function(){return q})),r.d(e,"f",(function(){return K})),r.d(e,"Db",(function(){return Z})),r.d(e,"Eb",(function(){return Q})),r.d(e,"Fb",(function(){return X})),r.d(e,"hb",(function(){return Y})),r.d(e,"ub",(function(){return tt})),r.d(e,"L",(function(){return et})),r.d(e,"wb",(function(){return rt})),r.d(e,"vb",(function(){return nt})),r.d(e,"xb",(function(){return it})),r.d(e,"yb",(function(){return ot})),r.d(e,"zb",(function(){return at})),r.d(e,"Ab",(function(){return ct})),r.d(e,"Hb",(function(){return ut})),r.d(e,"Ib",(function(){return st})),r.d(e,"M",(function(){return lt})),r.d(e,"g",(function(){return mt})),r.d(e,"Jb",(function(){return ft})),r.d(e,"kb",(function(){return dt})),r.d(e,"lb",(function(){return pt})),r.d(e,"D",(function(){return ht})),r.d(e,"A",(function(){return gt})),r.d(e,"fb",(function(){return bt})),r.d(e,"mb",(function(){return vt})),r.d(e,"nb",(function(){return yt})),r.d(e,"ob",(function(){return _t})),r.d(e,"B",(function(){return wt})),r.d(e,"bb",(function(){return Ot})),r.d(e,"Y",(function(){return jt})),r.d(e,"N",(function(){return kt})),r.d(e,"Q",(function(){return It})),r.d(e,"O",(function(){return xt})),r.d(e,"P",(function(){return Ct})),r.d(e,"h",(function(){return Lt})),r.d(e,"u",(function(){return St})),r.d(e,"t",(function(){return Pt})),r.d(e,"X",(function(){return Tt})),r.d(e,"pb",(function(){return Dt})),r.d(e,"rb",(function(){return Et})),r.d(e,"b",(function(){return $t})),r.d(e,"qb",(function(){return Ut})),r.d(e,"l",(function(){return Ft})),r.d(e,"a",(function(){return At}));var n=r("b6bd");function i(t){return Object(n["a"])({url:"setting/config/header_basics",method:"get",params:t})}function o(t,e){return Object(n["a"])({url:e,method:"get",params:t})}function a(t){return Object(n["a"])({url:t.url,method:"get",params:t.data})}function c(){return Object(n["a"])({url:"notify/sms/temp/create",method:"get"})}function u(t){return Object(n["a"])({url:"serve/login",method:"post",data:t})}function s(){return Object(n["a"])({url:"serve/info",method:"get"})}function l(t){return Object(n["a"])({url:"serve/sms/open",method:"get",params:t})}function m(t){return Object(n["a"])({url:"serve/opn_express",method:"post",data:t})}function f(t){return Object(n["a"])({url:"serve/open",method:"get",params:t})}function d(t){return Object(n["a"])({url:"serve/checkCode",method:"post",data:t})}function p(t){return Object(n["a"])({url:"serve/modify",method:"post",data:t})}function h(t){return Object(n["a"])({url:"serve/update_phone",method:"post",data:t})}function g(t){return Object(n["a"])({url:"serve/record",method:"get",params:t})}function b(t){return Object(n["a"])({url:"serve/export_temp",method:"get",params:t})}function v(){return Object(n["a"])({url:"serve/export_all",method:"get"})}function y(t){return Object(n["a"])({url:"serve/captcha",method:"post",data:t})}function _(t){return Object(n["a"])({url:"serve/register",method:"post",data:t})}function w(t){return Object(n["a"])({url:"serve/meal_list",method:"get",params:t})}function O(t){return Object(n["a"])({url:"serve/pay_meal",method:"post",data:t})}function j(t){return Object(n["a"])({url:"notify/sms/record",method:"get",params:t})}function k(){return Object(n["a"])({url:"merchant/store",method:"GET"})}function I(){return Object(n["a"])({url:"merchant/store/address",method:"GET"})}function x(t){return Object(n["a"])({url:"merchant/store/".concat(t.id),method:"POST",data:t})}function C(t){return Object(n["a"])({url:"freight/express",method:"get",params:t})}function L(){return Object(n["a"])({url:"/freight/express/create",method:"get"})}function S(t){return Object(n["a"])({url:"freight/express/".concat(t,"/edit"),method:"get"})}function P(t){return Object(n["a"])({url:"freight/express/set_status/".concat(t.id,"/").concat(t.status),method:"PUT"})}function T(){return Object(n["a"])({url:"freight/express/sync_express",method:"get"})}function D(t){return Object(n["a"])({url:"setting/role",method:"GET",params:t})}function E(t){return Object(n["a"])({url:"setting/role/set_status/".concat(t.id,"/").concat(t.status),method:"PUT"})}function $(t){return Object(n["a"])({url:"setting/role/".concat(t.id),method:"post",data:t})}function U(t){return Object(n["a"])({url:"setting/role/".concat(t,"/edit"),method:"get"})}function F(){return Object(n["a"])({url:"setting/role/create",method:"get"})}function A(t){return Object(n["a"])({url:"app/wechat/kefu",method:"get",params:t})}function z(t){return Object(n["a"])({url:"app/wechat/kefu/create",method:"get",params:t})}function N(){return Object(n["a"])({url:"app/wechat/kefu/add",method:"get"})}function M(t){return Object(n["a"])({url:"app/wechat/kefu",method:"post",data:t})}function R(t){return Object(n["a"])({url:"app/wechat/kefu/set_status/".concat(t.id,"/").concat(t.account_status),method:"PUT"})}function B(t){return Object(n["a"])({url:"app/wechat/kefu/".concat(t,"/edit"),method:"GET"})}function G(t,e){return Object(n["a"])({url:"app/wechat/kefu/record/".concat(e),method:"GET",params:t})}function V(t){return Object(n["a"])({url:"app/wechat/kefu/chat_list",method:"GET",params:t})}function J(){return Object(n["a"])({url:"notify/sms/is_login",method:"GET"})}function H(){return Object(n["a"])({url:"notify/sms/logout",method:"GET"})}function W(t){return Object(n["a"])({url:"setting/city/list/".concat(t),method:"get"})}function q(t){return Object(n["a"])({url:"setting/city/add/".concat(t),method:"get"})}function K(t){return Object(n["a"])({url:"setting/city/".concat(t,"/edit"),method:"get"})}function Z(t){return Object(n["a"])({url:"setting/shipping_templates/list",method:"get",params:t})}function Q(t){return Object(n["a"])({url:"setting/shipping_templates/city_list",method:"get"})}function X(t,e){return Object(n["a"])({url:"setting/shipping_templates/save/".concat(t),method:"post",data:e})}function Y(t){return Object(n["a"])({url:"setting/shipping_templates/".concat(t,"/edit"),method:"get"})}function tt(){return Object(n["a"])({url:"merchant/store/get_header",method:"get"})}function et(t){return Object(n["a"])({url:"merchant/store",method:"get",params:t})}function rt(t,e){return Object(n["a"])({url:"merchant/store/set_show/".concat(t,"/").concat(e),method:"put"})}function nt(t){return Object(n["a"])({url:"merchant/store/get_info/".concat(t),method:"get"})}function it(t){return Object(n["a"])({url:"merchant/store_staff",method:"get",params:t})}function ot(){return Object(n["a"])({url:"merchant/store_staff/create",method:"get"})}function at(t){return Object(n["a"])({url:"merchant/store_staff/".concat(t,"/edit"),method:"get"})}function ct(t,e){return Object(n["a"])({url:"merchant/store_staff/set_show/".concat(t,"/").concat(e),method:"put"})}function ut(t){return Object(n["a"])({url:"merchant/verify_order",method:"get",params:t})}function st(t){return Object(n["a"])({url:"merchant/verify/spread_info/".concat(t),method:"get"})}function lt(){return Object(n["a"])({url:"merchant/store_list",method:"get"})}function mt(){return Object(n["a"])({url:"setting/city/clean_cache",method:"get"})}function ft(t){return Object(n["a"])({url:"app/wechat/speechcraft",method:"get",params:t})}function dt(t){return Object(n["a"])({url:"app/wechat/speechcraft/create",method:"get",params:t})}function pt(t){return Object(n["a"])({url:"app/wechat/speechcraft/".concat(t,"/edit"),method:"get"})}function ht(t){return Object(n["a"])({url:"app/wechat/kefu/login/".concat(t),method:"get"})}function gt(t){return Object(n["a"])({url:"app/feedback",method:"get",params:t})}function bt(t){return Object(n["a"])({url:"serve/sms/sign",method:"PUT",data:t})}function vt(){return Object(n["a"])({url:"app/wechat/speechcraftcate",method:"get"})}function yt(){return Object(n["a"])({url:"app/wechat/speechcraftcate/create",method:"get"})}function _t(t){return Object(n["a"])({url:"app/wechat/speechcraftcate/".concat(t,"/edit"),method:"get"})}function wt(t){return Object(n["a"])({url:"app/feedback/".concat(t,"/edit"),method:"get"})}function Ot(){return Object(n["a"])({url:"serve/open",method:"get"})}function jt(){return Object(n["a"])({url:"serve/dump_open",method:"get"})}function kt(t){return Object(n["a"])({url:"setting/system_out/index",method:"get",params:t})}function It(t,e){return Object(n["a"])({url:"setting/system_out/set_status/".concat(t,"/").concat(e),method:"put"})}function xt(t){return Object(n["a"])({url:"setting/system_out/save",method:"post",params:t})}function Ct(t,e){return Object(n["a"])({url:"setting/system_out/update/".concat(t),method:"post",params:e})}function Lt(t){return Object(n["a"])({url:"city",method:"get",params:t})}function St(t){return Object(n["a"])({url:"setting/config/edit_new_build/"+t,method:"get"})}function Pt(){return Object(n["a"])({url:"/setting/config/image",method:"get"})}function Tt(t){return Object(n["a"])({url:"setting/config/save_basics",method:"post",data:t})}function Dt(t){return Object(n["a"])({url:"/setting/config/storage",method:"get",params:t})}function Et(t){return Object(n["a"])({url:"/setting/config/storage/synch/".concat(t),method:"put"})}function $t(t){return Object(n["a"])({url:"/setting/config/storage/create/".concat(t),method:"get"})}function Ut(t){return Object(n["a"])({url:"/setting/config/storage/status/".concat(t),method:"put"})}function Ft(t){return Object(n["a"])({url:"/setting/config/storage/domain/".concat(t),method:"get"})}function At(t){return Object(n["a"])({url:"/setting/config/storage/form/".concat(t),method:"get"})}},"9b41":function(t,e,r){"use strict";r.d(e,"V",(function(){return i})),r.d(e,"P",(function(){return o})),r.d(e,"U",(function(){return a})),r.d(e,"y",(function(){return c})),r.d(e,"v",(function(){return u})),r.d(e,"x",(function(){return s})),r.d(e,"w",(function(){return l})),r.d(e,"z",(function(){return m})),r.d(e,"s",(function(){return f})),r.d(e,"k",(function(){return d})),r.d(e,"j",(function(){return p})),r.d(e,"E",(function(){return h})),r.d(e,"u",(function(){return g})),r.d(e,"F",(function(){return b})),r.d(e,"Q",(function(){return v})),r.d(e,"G",(function(){return y})),r.d(e,"J",(function(){return _})),r.d(e,"W",(function(){return w})),r.d(e,"h",(function(){return O})),r.d(e,"g",(function(){return j})),r.d(e,"t",(function(){return k})),r.d(e,"m",(function(){return I})),r.d(e,"c",(function(){return x})),r.d(e,"b",(function(){return C})),r.d(e,"a",(function(){return L})),r.d(e,"i",(function(){return S})),r.d(e,"d",(function(){return P})),r.d(e,"D",(function(){return T})),r.d(e,"H",(function(){return D})),r.d(e,"I",(function(){return E})),r.d(e,"f",(function(){return $})),r.d(e,"N",(function(){return U})),r.d(e,"M",(function(){return F})),r.d(e,"l",(function(){return A})),r.d(e,"T",(function(){return z})),r.d(e,"e",(function(){return N})),r.d(e,"L",(function(){return M})),r.d(e,"K",(function(){return R})),r.d(e,"O",(function(){return B})),r.d(e,"B",(function(){return G})),r.d(e,"r",(function(){return V})),r.d(e,"q",(function(){return J})),r.d(e,"n",(function(){return H})),r.d(e,"o",(function(){return W})),r.d(e,"p",(function(){return q})),r.d(e,"A",(function(){return K})),r.d(e,"R",(function(){return Z})),r.d(e,"S",(function(){return Q})),r.d(e,"C",(function(){return X}));var n=r("b6bd");function i(){return Object(n["a"])({url:"work/tree",method:"get"})}function o(){return Object(n["a"])({url:"work/label",method:"get"})}function a(){return Object(n["a"])({url:"work/synchMember",method:"post"})}function c(){return Object(n["a"])({url:"work/channel/cate",method:"get"})}function u(){return Object(n["a"])({url:"work/channel/cate/create",method:"get"})}function s(t){return Object(n["a"])({url:"/work/channel/cate/".concat(t,"/edit"),method:"get"})}function l(t){return Object(n["a"])({url:"/work/channel/cate/".concat(t),method:"delete"})}function m(t){return Object(n["a"])({url:"work/channel/code",method:"get",params:t})}function f(t){return Object(n["a"])({url:"work/channel/code",method:"post",data:t})}function d(t){return Object(n["a"])({url:"work/channel/code/".concat(t),method:"get"})}function p(t){return Object(n["a"])({url:"work/channel/code/client",method:"get",params:t})}function h(t,e){return Object(n["a"])({url:"work/channel/code/".concat(t),method:"put",data:e})}function g(t){return Object(n["a"])({url:"work/channel/code/bactch/cate",method:"post",data:t})}function b(){return Object(n["a"])({url:"work/department",method:"get"})}function v(t){return Object(n["a"])({url:"work/member",method:"get",params:t})}function y(t){return Object(n["a"])({url:"work/group_chat",method:"get",params:t})}function _(){return Object(n["a"])({url:"work/group_chat/synch",method:"post"})}function w(t){return Object(n["a"])({url:"work/welcome",method:"post",data:t})}function O(t){return Object(n["a"])({url:"work/welcome",method:"get",params:t})}function j(t){return Object(n["a"])({url:"work/welcome/".concat(t),method:"get"})}function k(t,e){return Object(n["a"])({url:"work/welcome/".concat(t),method:"put",data:e})}function I(t){return Object(n["a"])({url:"work/group_chat_auth",method:"post",data:t})}function x(t){return Object(n["a"])({url:"work/group_chat_auth",method:"get",params:t})}function C(t){return Object(n["a"])({url:"work/group_chat_auth/".concat(t),method:"get"})}function L(t,e){return Object(n["a"])({url:"work/group_chat_auth/".concat(t),method:"put",data:e})}function S(t){return Object(n["a"])({url:"work/client",method:"get",params:t})}function P(t){return Object(n["a"])({url:"work/group_chat/member",method:"get",params:t})}function T(){return Object(n["a"])({url:"work/client/synch",method:"get"})}function D(t){return Object(n["a"])({url:"work/group_chat/statistics",method:"get",params:t})}function E(t){return Object(n["a"])({url:"work/group_chat/statisticsList",method:"get",params:t})}function $(t){return Object(n["a"])({url:"work/group_template",method:"get",params:t})}function U(t){return Object(n["a"])({url:"work/group_template",method:"post",data:t})}function F(t){return Object(n["a"])({url:"work/group_template/".concat(t),method:"get"})}function A(t){return Object(n["a"])({url:"work/moment",method:"get",params:t})}function z(t){return Object(n["a"])({url:"/work/moment",method:"post",data:t})}function N(t){return Object(n["a"])({url:"work/group_template_chat",method:"get",params:t})}function M(t){return Object(n["a"])({url:"work/group_template_chat",method:"post",data:t})}function R(t){return Object(n["a"])({url:"work/group_template_chat/".concat(t),method:"get"})}function B(t){return Object(n["a"])({url:"work/group_template/sendMessage",method:"post",data:t})}function G(t){return Object(n["a"])({url:"work/client/count",method:"post",data:t})}function V(t,e){return Object(n["a"])({url:"work/group_template/memberList/".concat(t),method:"get",params:e})}function J(t,e){return Object(n["a"])({url:"work/group_template/clientList/".concat(t),method:"get",params:e})}function H(t,e){return Object(n["a"])({url:"work/group_template_chat/groupChatList/".concat(t),method:"get",params:e})}function W(t,e){return Object(n["a"])({url:"work/group_template_chat/groupChatOwnerList/".concat(t),method:"get",params:e})}function q(t){return Object(n["a"])({url:"work/group_template_chat/getOwnerChatList",method:"get",params:t})}function K(t){return Object(n["a"])({url:"work/client/batchLabel",method:"post",data:t})}function Z(t){return Object(n["a"])({url:"work/moment/".concat(t),method:"get"})}function Q(t){return Object(n["a"])({url:"work/moment_list",method:"get",params:t})}function X(t,e){return Object(n["a"])({url:"work/client/".concat(t),method:"put",data:e})}},a493:function(t,e,r){},bd62:function(t,e,r){"use strict";var n=r("8c67"),i=r.n(n);i.a},c297:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex"},[r("Modal",{attrs:{width:"680px",title:"选择成员","mask-closable":!1,"z-index":9},on:{"on-ok":t.handleConfirm,"on-cancel":t.handleConcel},model:{value:t.memberStatus,callback:function(e){t.memberStatus=e},expression:"memberStatus"}},[t.isShow?r("div",{staticClass:"container"},[r("Row",[r("Col",{staticClass:"search-p",attrs:{span:24}},[r("Input",{staticClass:"input-with-select",attrs:{placeholder:"搜索成员",search:""},on:{"on-search":t.searchData},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),r("div",{ref:"treeScoll",staticClass:"tree-box",on:{scroll:t.scroll}},[t.isAppoint?t._e():r("el-tree",{ref:"tree",attrs:{data:t.treeData,props:t.defaultProps,"highlight-current":!0,"default-expand-all":!0,"expand-on-click-node":!1,"filter-node-method":t.filterNode},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,i=e.data;return r("div",{staticClass:"custom-tree-node"},[r("span",{staticClass:"flex-box",on:{click:function(){return t.append(n,i)}}},[r("Icon",{staticClass:"tree-icon",attrs:{type:"ios-folder",size:"15",color:"#FFCA28"}}),t._v("\n                "+t._s(n.label)+"\n                "),r("span",[t._v("("+t._s(i.member.length)+")")])],1),r("div",[i.member.length?r("div",{staticClass:"user-list"},t._l(i.member,(function(e,n){return r("div",{key:n,staticClass:"user-item",on:{click:function(r){return r.stopPropagation(),t.checkUser(e)}}},[""!==e.avatar?r("img",{attrs:{src:e.avatar,alt:""}}):t._e(),t._v("\n                    "+t._s(e.name)+"\n                  ")])})),0):t._e()])])}}],null,!1,1386218660)})],1)],1),r("div",{staticClass:"select-box"},[r("div",{staticClass:"title"},[t._v("已选择成员")]),r("div",{staticClass:"list-box"},t._l(t.checkUserList,(function(e,n){return r("div",{key:e.id,staticClass:"select-item"},[r("div",{staticClass:"left"},[r("span",[t._v(t._s(e.name))])]),e.isDelete?t._e():r("div",{staticClass:"right-box"},[r("span",{staticClass:"el-icon-close",on:{click:function(r){return t.handleDeleteUser(e,n)}}})])])})),0)])],1):t._e()])],1)},i=[],o=r("9b41"),a={name:"Department",props:{isEdit:{type:Number,default:0},activeDepartment:{type:Object,default:function(){return null}},userList:{type:Array,default:function(){return[]}},isAppoint:{type:Boolean,default:!1},appointList:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,treeData:[],selectList:{},isShow:!1,memberStatus:!1,checkUserList:[],scrollH:0,filterText:"",openType:"",defaultProps:{children:"children",label:"name"}}},watch:{userList:{handler:function(t,e){this.checkUserList=JSON.parse(JSON.stringify(t))},deep:!0},activeDepartment:{handler:function(t,e){var r=this;if(t){this.isShow=!1;var n=[],i=function(){var e=function e(r){n=r.map((function(r,n,i){return r.children?(t.hasOwnProperty(r.id)?r.isCheck=!0:r.isCheck=!1,e(r.children)):t.hasOwnProperty(r.id)?r.isCheck=!0:r.isCheck=!1,i}))};e(r.treeData)};i(),this.$nextTick((function(){r.$set(r,"treeData",n[0]),r.isShow=!0,r.selectList=t}))}},deep:!0},filterText:function(t){this.$refs.tree.filter(t)},isAppoint:{handler:function(t){console.log(this.appointList)},deep:!0}},mounted:function(){this.getTreeData()},methods:{getTreeData:function(){var t=this;Object(o["V"])().then((function(e){t.isShow=!0,t.treeData=e.data}))},handleClick:function(t,e){this.isShow=!1,this.$set(t,"isCheck",!0),this.isShow=!0,this.$set(this.selectList,t.id,t)},append:function(t,e){this.$Message.warning("只允许添加成员")},handleDelete:function(t){var e=this,r=[];this.isShow=!1,delete this.selectList[t.id];var n=function(){var n=function e(n){r=n.map((function(r,n,i){return r.children?(r.id===t.id&&(r.isCheck=!1),e(r.children)):r.id===t.id&&(r.isCheck=!1),i}))};n(e.treeData)};n(),this.$nextTick((function(){e.$set(e,"treeData",r[0]),e.isShow=!0}))},handleConfirm:function(){var t=this.checkUserList;this.$emit("changeMastart",t,this.openType),this.checkUserList=[]},reseatData:function(){var t=this;this.isShow=!1;var e=[],r=function(){var r=function t(r){e=r.map((function(e,r,n){return e.isCheck=!1,e.children?(e.user.forEach((function(t){t.isCheck=!1})),t(e.children)):e.user.forEach((function(t){t.isCheck=!1})),n}))};r(t.treeData)};r(),this.$nextTick((function(){t.checkUserList=JSON.parse(JSON.stringify(t.userList)),t.$set(t,"treeData",e[0]),t.isShow=!0}))},scroll:function(t){this.scrollH=t.target.scrollTop},checkUser:function(t){var e=this;if(0===this.checkUserList.length)this.$set(t,"isCheck",!0),this.checkUserList.push(t);else{var r=this.checkUserList.some((function(e,r){return e.userid===t.userid}));if(r)return this.$Message.warning("该人员已选择");this.$set(t,"isCheck",!0),this.checkUserList.push(t)}this.$nextTick((function(){e.isShow=!0,e.$nextTick((function(){e.$refs.treeScoll.scroll(0,e.scrollH)}))}))},handleDeleteUser:function(t,e){var r=this;this.checkUserList.splice(e,1);var n=function(){var e=function(e){e.forEach((function(e,r,n){e.member.forEach((function(e){e.id===t.id&&(e.isCheck=!1)}))}))};e(r.treeData)};n(),this.$nextTick((function(){r.isShow=!0}))},filterNode:function(t,e,r){return!t||(-1!==e.label.indexOf(t)||this.checkBelongToChooseNode(t,e,r))},checkBelongToChooseNode:function(t,e,r){var n=r.level;if(1===n)return!1;var i=r.parent;if(r.data.user.length>0)var o=r.data.user.map((function(e){return-1!==e.card.name.indexOf(t)}));if(void 0===o)return!1;for(var a=0;a<o.length;a++)if(!0===o[a])return!0;var c=0;while(c<n-1){if(-1!==i.data.label.indexOf(t))return!0;i=i.parent,c++}return!1},getItemTree:function(t){var e=this;return t&&t.forEach((function(t,r){void 0!=t.user&&t.user.length>0&&t.user.forEach((function(t){t.label=t.card.name,t.children=t})),t.children&&t.children.length>0&&e.getItemTree(t.children)})),t},searchData:function(){},handleConcel:function(){}}},c=a,u=(r("ea8a"),r("2877")),s=Object(u["a"])(c,n,i,!1,null,"c541e030",null);e["a"]=s.exports},d60a:function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},ea8a:function(t,e,r){"use strict";var n=r("a493"),i=r.n(n);i.a}}]);