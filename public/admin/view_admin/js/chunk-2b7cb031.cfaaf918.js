(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b7cb031"],{2721:function(t,e,n){},"6ed2":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"i-layout-page-header"},[n("PageHeader",{staticClass:"product_tabs",attrs:{"hidden-breadcrumb":""}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("div",{staticStyle:{float:"left"}},[n("router-link",{attrs:{to:{path:"/admin/work/auth_group"}}},[n("div",{staticClass:"font-sm after-line"},[n("span",{staticClass:"iconfont iconfanhui"}),n("span",{staticClass:"pl10"},[t._v("返回")])])])],1),n("span",{staticClass:"mr20 ml16"},[t._v("新建自动拉群")])])])],1),n("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[n("Form",{attrs:{model:t.formItem,"label-width":110,"label-colon":!0,rules:t.ruleValidate}},[n("FormItem",{attrs:{label:"二维码名称",prop:"name"}},[n("Input",{staticStyle:{width:"460px"},attrs:{placeholder:"请输入二维码名称"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),n("FormItem",{attrs:{label:"选择群聊",required:""}},[n("Button",{on:{click:function(e){return t.addGroup()}}},[t._v("添加群聊")]),n("div",{staticStyle:{"margin-top":"10px"}},t._l(t.formItem.chat_id,(function(e,r){return n("Tag",{key:r,attrs:{closable:"",name:e.name,size:"medium"},on:{"on-close":t.handleDel}},[t._v(t._s(e.name))])})),1)],1),n("FormItem",{attrs:{label:"自动建群"}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.formItem.auth_group_chat,callback:function(e){t.$set(t.formItem,"auth_group_chat",e)},expression:"formItem.auth_group_chat"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"desc"},[t._v("\n          开启时，选择群聊群人数达到上限后，将以原群主身份自动创建新群聊\n        ")])],1),t.formItem.auth_group_chat?n("FormItem",{attrs:{label:"设置群名称"}},[n("Input",{staticStyle:{width:"460px"},attrs:{placeholder:"请输入群名称"},model:{value:t.formItem.group_name,callback:function(e){t.$set(t.formItem,"group_name",e)},expression:"formItem.group_name"}})],1):t._e(),t.formItem.auth_group_chat?n("FormItem",{attrs:{label:"群序号"}},[n("InputNumber",{attrs:{"controls-outside":"",min:0,max:999},model:{value:t.formItem.group_num,callback:function(e){t.$set(t.formItem,"group_num",e)},expression:"formItem.group_num"}}),n("div",{staticClass:"desc"},[t._v("\n          群序列号将在自动创建群时自动增加，比如设置的群名为：西安客户群，设置的序列表为：5，那么自动建群的名称为：西安客户群5，西安客户群6，西安客户群7，西安客户群8。\n        ")])],1):t._e(),n("FormItem",{attrs:{label:"客户标签"}},[n("TreeSelect",{directives:[{name:"width",rawName:"v-width",value:400,expression:"400"}],attrs:{data:t.labelList,multiple:""},model:{value:t.formItem.label,callback:function(e){t.$set(t.formItem,"label",e)},expression:"formItem.label"}})],1)],1)],1),n("Card",{staticClass:"fixed-card",style:{left:t.menuCollapse?t.isMobile?"0":"80px":"200px"},attrs:{bordered:!1,"dis-hover":""}},[n("div",{staticClass:"acea-row row-center-wrapper"},[n("Button",{staticClass:"step_btn",attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("保存")])],1)]),n("Modal",{attrs:{width:"960px",scrollable:"","footer-hide":"",closable:"",title:"logo","mask-closable":!1,"z-index":9},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?n("uploadPictures",{attrs:{isChoice:t.isChoice,gridBtn:t.gridBtn,gridPic:t.gridPic},on:{getPic:t.getPic}}):t._e()],1),n("Modal",{attrs:{title:"添加小程序消息","z-index":1},on:{"on-ok":t.routineConfirm},model:{value:t.modalRoutine,callback:function(e){t.modalRoutine=e},expression:"modalRoutine"}},[n("Form",{attrs:{model:t.formItem,"label-width":110,"label-colon":!0}},[n("FormItem",{attrs:{label:"小程序功能页"}},[n("div",{staticClass:"picBox",on:{click:function(e){return t.modalPicTap("routine")}}},[t.rontineObj.miniprogram.pic_url?n("div",{staticClass:"pictrue"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.rontineObj.miniprogram.pic_url,expression:"rontineObj.miniprogram.pic_url"}]})]):n("div",{staticClass:"upLoad"},[n("div",{staticClass:"iconfont"},[t._v("+")])])])]),n("FormItem",{attrs:{label:"小程序消息标题"}},[n("Input",{model:{value:t.rontineObj.miniprogram.title,callback:function(e){t.$set(t.rontineObj.miniprogram,"title",e)},expression:"rontineObj.miniprogram.title"}})],1),n("FormItem",{attrs:{label:"小程序Appid"}},[n("Input",{model:{value:t.rontineObj.miniprogram.appid,callback:function(e){t.$set(t.rontineObj.miniprogram,"appid",e)},expression:"rontineObj.miniprogram.appid"}})],1),n("FormItem",{attrs:{label:"小程序功能页"}},[n("Input",{model:{value:t.rontineObj.miniprogram.page,callback:function(e){t.$set(t.rontineObj.miniprogram,"page",e)},expression:"rontineObj.miniprogram.page"}})],1)],1)],1),n("Modal",{attrs:{title:"客户群列表",width:"900"},on:{"on-ok":t.groupConfirm},model:{value:t.groupStatus,callback:function(e){t.groupStatus=e},expression:"groupStatus"}},[n("Table",{attrs:{columns:t.groupColumn,data:t.groupData.list,loading:t.userLoading},on:{"on-select-all":t.selectAll,"on-select-all-cancel":t.selectAll,"on-selection-change":t.handleSelectRow},scopedSlots:t._u([{key:"avatar",fn:function(t){var e=t.row;return[n("viewer",{staticClass:"acea-row row-center"},[n("div",{staticClass:"tabBox_img"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.client.avatar,expression:"row.client.avatar"}]})])])]}},{key:"ownerInfo",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.ownerInfo.name))])]}},{key:"admin_user_list",fn:function(e){var r=e.row;return t._l(r.admin_user_list,(function(e,r){return n("span",{key:r},[t._v(t._s(e.name))])}))}},{key:"notice",fn:function(e){var r=e.row;return[n("Tooltip",{attrs:{"max-width":"200",placement:"bottom"}},[n("span",{staticClass:"line2"},[t._v(t._s(r.notice))]),n("p",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(r.notice))])])]}},{key:"name",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.client.name))])]}}])}),n("div",{staticClass:"acea-row row-right page"},[n("Page",{attrs:{total:t.groupData.count,current:t.groupForm.page,"show-elevator":"","show-total":"","page-size":t.groupForm.limit},on:{"on-change":t.groupChange}})],1)],1),n("department",{ref:"department",attrs:{"active-department":t.activeDepartment,"is-site":t.isSite,userList:t.userList,"only-department":t.onlyDepartment},on:{changeMastart:t.changeMastart}})],1)},a=[],o=n("2f62"),i=n("b0e7"),c=n("c297"),s=n("9b41");function u(t){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={data:function(){return{formItem:{name:"",chat_id:[],group_name:"",group_num:0,label:[],auth_group_chat:0},labelList:[],gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},groupColumn:[{type:"selection",width:60,align:"center"},{title:"群名称",key:"name",minWidth:80,align:"center"},{title:"群主",slot:"ownerInfo",minWidth:100,align:"center"},{title:"群公告",slot:"notice",minWidth:100,align:"center"},{title:"管理员",slot:"admin_user_list",minWidth:80,align:"center"},{title:"创建时间",key:"group_create_time",minWidth:110,align:"center"},{title:"群人数",key:"member_num",minWidth:80,align:"center"},{title:"退群人数",key:"retreat_group_num",minWidth:80,align:"center"}],groupData:[],groupForm:{page:1,limit:15},rontineObj:{msgtype:"miniprogram",miniprogram:{pic_url:"",pic_media_id:"",title:"",appid:"",page:""}},imageObj:{msgtype:"image",image:{media_id:"",pic_url:""}},groupStatus:!1,userLoading:!1,picTit:"",modalPic:!1,modalRoutine:!1,isChoice:"单选",activeDepartment:{},isSite:!0,onlyDepartment:!1,openType:"",userList:[],selectGroup:[],ruleValidate:{name:[{required:!0,message:"二维码名称不能为空",trigger:"blur"}]}}},components:{uploadPictures:i["a"],department:c["a"]},computed:m({},Object(o["e"])("admin/layout",["isMobile","menuCollapse"]),{labelWidth:function(){return this.isMobile?void 0:80},labelPosition:function(){return this.isMobile?"top":"left"}}),mounted:function(){"0"!==this.$route.params.id&&this.$route.params.id&&this.getInfo(),this.getWorkGroupChat(),this.getWorkLabel()},methods:{getWorkGroupChat:function(){var t=this;this.userLoading=!0,Object(s["G"])(this.groupForm).then((function(e){t.groupData=e.data,t.userLoading=!1})).catch((function(e){t.$Message.error(e.msg),t.userLoading=!1}))},addGroup:function(){this.groupStatus=!0},selectAll:function(t){t.length&&(this.selectGroup=t)},handleSelectRow:function(t){this.selectGroup=t},groupConfirm:function(){this.formItem.chat_id=this.selectGroup.map((function(t){return{chat_id:t.chat_id,name:t.name}}))},groupChange:function(t){this.groupForm.page=t,this.getWorkGroupChat()},modalPicTap:function(t){this.modalPic=!0,this.picTit=t},addRoutine:function(){this.rontineObj.miniprogram.pic_url="",this.rontineObj.miniprogram.title="",this.rontineObj.miniprogram.appid="",this.rontineObj.miniprogram.page="",this.modalRoutine=!0},addUser:function(t,e){switch(this.$refs.department.memberStatus=!0,t){case"one":this.$refs.department.openType="one";break;case"two":this.$refs.department.openType="two";break;default:break}},changeMastart:function(t,e){if("one"==e)if(t.length&&t.length>1){this.$Message.warning("群主只能选择一个");var n=t.slice(0,1);this.formItem.owner=n.map((function(t){return{userid:t.userid,name:t.name}}))}else this.formItem.owner=t.map((function(t){return{userid:t.userid,name:t.name}}));else"two"==e&&(this.formItem.admin_user=t.map((function(t){return{userid:t.userid,name:t.name}})))},handleDel:function(t,e){var n=this.formItem.chat_id.findIndex((function(t){return t.name==e}));this.formItem.chat_id.splice(n,1)},wordsDel:function(t){var e=this.formItem.welcome_words.attachments.indexOf(t);this.formItem.welcome_words.attachments.splice(e,1)},getPic:function(t){switch(this.picTit){case"image":this.imageObj.image.pic_url=t.att_dir,this.formItem.welcome_words.attachments.push(this.imageObj);break;case"routine":this.rontineObj.miniprogram.pic_url=t.att_dir;break}this.modalPic=!1},insertName:function(){this.formItem.welcome_words.text.content="##客户名称##"},routineConfirm:function(){var t=this.deepClone(this.rontineObj);this.formItem.welcome_words.attachments.push(t)},routineCancel:function(){},getWorkLabel:function(){var t=this;Object(s["P"])().then((function(e){t.labelList=e.data.map((function(e){return t.mapTree(e)}))}))},mapTree:function(t){var e=this,n=Array.isArray(t.children)&&t.children.length>0;return{title:t.label,expand:!0,value:t.value,selected:!1,checked:!1,children:n?t.children.map((function(t){return e.mapTree(t)})):[]}},getInfo:function(){var t=this;Object(s["b"])(this.$route.params.id).then((function(e){t.formItem=e.data,t.formItem.chat_id=t.formItem.chatList}))},submit:function(){var t=this;if(!this.formItem.chat_id.length)return this.$Message.error("请添加群聊");var e=this.deepClone(this.formItem);e.chat_id=e.chat_id.map((function(t){return t.chat_id})),this.$route.params.id?(delete e.chatList,delete e.labelList,Object(s["a"])(this.$route.params.id,e).then((function(e){t.$Message.success("修改自动拉群成功"),t.$router.push("/admin/work/auth_group")}))):Object(s["m"])(e).then((function(e){t.$Message.success("保存成功"),t.$router.push("/admin/work/auth_group")})).catch((function(e){t.$Message.error(e.msg)}))},deepClone:function(t){var e=Array.isArray(t)?[]:{};if(t&&"object"===u(t))for(var n in t)t.hasOwnProperty(n)&&(e[n]=t&&"object"===u(t[n])?this.deepClone(t[n]):t[n]);return e}}},p=h,f=(n("e536"),n("2877")),g=Object(f["a"])(p,r,a,!1,null,"c3726832",null);e["default"]=g.exports},"9b41":function(t,e,n){"use strict";n.d(e,"V",(function(){return a})),n.d(e,"P",(function(){return o})),n.d(e,"U",(function(){return i})),n.d(e,"y",(function(){return c})),n.d(e,"v",(function(){return s})),n.d(e,"x",(function(){return u})),n.d(e,"w",(function(){return l})),n.d(e,"z",(function(){return m})),n.d(e,"s",(function(){return d})),n.d(e,"k",(function(){return h})),n.d(e,"j",(function(){return p})),n.d(e,"E",(function(){return f})),n.d(e,"u",(function(){return g})),n.d(e,"F",(function(){return b})),n.d(e,"Q",(function(){return w})),n.d(e,"G",(function(){return _})),n.d(e,"J",(function(){return v})),n.d(e,"W",(function(){return k})),n.d(e,"h",(function(){return O})),n.d(e,"g",(function(){return j})),n.d(e,"t",(function(){return C})),n.d(e,"m",(function(){return y})),n.d(e,"c",(function(){return x})),n.d(e,"b",(function(){return I})),n.d(e,"a",(function(){return S})),n.d(e,"i",(function(){return L})),n.d(e,"d",(function(){return $})),n.d(e,"D",(function(){return D})),n.d(e,"H",(function(){return P})),n.d(e,"I",(function(){return T})),n.d(e,"f",(function(){return M})),n.d(e,"N",(function(){return F})),n.d(e,"M",(function(){return U})),n.d(e,"l",(function(){return A})),n.d(e,"T",(function(){return N})),n.d(e,"e",(function(){return W})),n.d(e,"L",(function(){return z})),n.d(e,"K",(function(){return E})),n.d(e,"O",(function(){return B})),n.d(e,"B",(function(){return G})),n.d(e,"r",(function(){return R})),n.d(e,"q",(function(){return J})),n.d(e,"n",(function(){return H})),n.d(e,"o",(function(){return V})),n.d(e,"p",(function(){return q})),n.d(e,"A",(function(){return K})),n.d(e,"R",(function(){return Q})),n.d(e,"S",(function(){return X})),n.d(e,"C",(function(){return Y}));var r=n("b6bd");function a(){return Object(r["a"])({url:"work/tree",method:"get"})}function o(){return Object(r["a"])({url:"work/label",method:"get"})}function i(){return Object(r["a"])({url:"work/synchMember",method:"post"})}function c(){return Object(r["a"])({url:"work/channel/cate",method:"get"})}function s(){return Object(r["a"])({url:"work/channel/cate/create",method:"get"})}function u(t){return Object(r["a"])({url:"/work/channel/cate/".concat(t,"/edit"),method:"get"})}function l(t){return Object(r["a"])({url:"/work/channel/cate/".concat(t),method:"delete"})}function m(t){return Object(r["a"])({url:"work/channel/code",method:"get",params:t})}function d(t){return Object(r["a"])({url:"work/channel/code",method:"post",data:t})}function h(t){return Object(r["a"])({url:"work/channel/code/".concat(t),method:"get"})}function p(t){return Object(r["a"])({url:"work/channel/code/client",method:"get",params:t})}function f(t,e){return Object(r["a"])({url:"work/channel/code/".concat(t),method:"put",data:e})}function g(t){return Object(r["a"])({url:"work/channel/code/bactch/cate",method:"post",data:t})}function b(){return Object(r["a"])({url:"work/department",method:"get"})}function w(t){return Object(r["a"])({url:"work/member",method:"get",params:t})}function _(t){return Object(r["a"])({url:"work/group_chat",method:"get",params:t})}function v(){return Object(r["a"])({url:"work/group_chat/synch",method:"post"})}function k(t){return Object(r["a"])({url:"work/welcome",method:"post",data:t})}function O(t){return Object(r["a"])({url:"work/welcome",method:"get",params:t})}function j(t){return Object(r["a"])({url:"work/welcome/".concat(t),method:"get"})}function C(t,e){return Object(r["a"])({url:"work/welcome/".concat(t),method:"put",data:e})}function y(t){return Object(r["a"])({url:"work/group_chat_auth",method:"post",data:t})}function x(t){return Object(r["a"])({url:"work/group_chat_auth",method:"get",params:t})}function I(t){return Object(r["a"])({url:"work/group_chat_auth/".concat(t),method:"get"})}function S(t,e){return Object(r["a"])({url:"work/group_chat_auth/".concat(t),method:"put",data:e})}function L(t){return Object(r["a"])({url:"work/client",method:"get",params:t})}function $(t){return Object(r["a"])({url:"work/group_chat/member",method:"get",params:t})}function D(){return Object(r["a"])({url:"work/client/synch",method:"get"})}function P(t){return Object(r["a"])({url:"work/group_chat/statistics",method:"get",params:t})}function T(t){return Object(r["a"])({url:"work/group_chat/statisticsList",method:"get",params:t})}function M(t){return Object(r["a"])({url:"work/group_template",method:"get",params:t})}function F(t){return Object(r["a"])({url:"work/group_template",method:"post",data:t})}function U(t){return Object(r["a"])({url:"work/group_template/".concat(t),method:"get"})}function A(t){return Object(r["a"])({url:"work/moment",method:"get",params:t})}function N(t){return Object(r["a"])({url:"/work/moment",method:"post",data:t})}function W(t){return Object(r["a"])({url:"work/group_template_chat",method:"get",params:t})}function z(t){return Object(r["a"])({url:"work/group_template_chat",method:"post",data:t})}function E(t){return Object(r["a"])({url:"work/group_template_chat/".concat(t),method:"get"})}function B(t){return Object(r["a"])({url:"work/group_template/sendMessage",method:"post",data:t})}function G(t){return Object(r["a"])({url:"work/client/count",method:"post",data:t})}function R(t,e){return Object(r["a"])({url:"work/group_template/memberList/".concat(t),method:"get",params:e})}function J(t,e){return Object(r["a"])({url:"work/group_template/clientList/".concat(t),method:"get",params:e})}function H(t,e){return Object(r["a"])({url:"work/group_template_chat/groupChatList/".concat(t),method:"get",params:e})}function V(t,e){return Object(r["a"])({url:"work/group_template_chat/groupChatOwnerList/".concat(t),method:"get",params:e})}function q(t){return Object(r["a"])({url:"work/group_template_chat/getOwnerChatList",method:"get",params:t})}function K(t){return Object(r["a"])({url:"work/client/batchLabel",method:"post",data:t})}function Q(t){return Object(r["a"])({url:"work/moment/".concat(t),method:"get"})}function X(t){return Object(r["a"])({url:"work/moment_list",method:"get",params:t})}function Y(t,e){return Object(r["a"])({url:"work/client/".concat(t),method:"put",data:e})}},a493:function(t,e,n){},c297:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex"},[n("Modal",{attrs:{width:"680px",title:"选择成员","mask-closable":!1,"z-index":9},on:{"on-ok":t.handleConfirm,"on-cancel":t.handleConcel},model:{value:t.memberStatus,callback:function(e){t.memberStatus=e},expression:"memberStatus"}},[t.isShow?n("div",{staticClass:"container"},[n("Row",[n("Col",{staticClass:"search-p",attrs:{span:24}},[n("Input",{staticClass:"input-with-select",attrs:{placeholder:"搜索成员",search:""},on:{"on-search":t.searchData},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),n("div",{ref:"treeScoll",staticClass:"tree-box",on:{scroll:t.scroll}},[t.isAppoint?t._e():n("el-tree",{ref:"tree",attrs:{data:t.treeData,props:t.defaultProps,"highlight-current":!0,"default-expand-all":!0,"expand-on-click-node":!1,"filter-node-method":t.filterNode},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.node,a=e.data;return n("div",{staticClass:"custom-tree-node"},[n("span",{staticClass:"flex-box",on:{click:function(){return t.append(r,a)}}},[n("Icon",{staticClass:"tree-icon",attrs:{type:"ios-folder",size:"15",color:"#FFCA28"}}),t._v("\n                "+t._s(r.label)+"\n                "),n("span",[t._v("("+t._s(a.member.length)+")")])],1),n("div",[a.member.length?n("div",{staticClass:"user-list"},t._l(a.member,(function(e,r){return n("div",{key:r,staticClass:"user-item",on:{click:function(n){return n.stopPropagation(),t.checkUser(e)}}},[""!==e.avatar?n("img",{attrs:{src:e.avatar,alt:""}}):t._e(),t._v("\n                    "+t._s(e.name)+"\n                  ")])})),0):t._e()])])}}],null,!1,1386218660)})],1)],1),n("div",{staticClass:"select-box"},[n("div",{staticClass:"title"},[t._v("已选择成员")]),n("div",{staticClass:"list-box"},t._l(t.checkUserList,(function(e,r){return n("div",{key:e.id,staticClass:"select-item"},[n("div",{staticClass:"left"},[n("span",[t._v(t._s(e.name))])]),e.isDelete?t._e():n("div",{staticClass:"right-box"},[n("span",{staticClass:"el-icon-close",on:{click:function(n){return t.handleDeleteUser(e,r)}}})])])})),0)])],1):t._e()])],1)},a=[],o=n("9b41"),i={name:"Department",props:{isEdit:{type:Number,default:0},activeDepartment:{type:Object,default:function(){return null}},userList:{type:Array,default:function(){return[]}},isAppoint:{type:Boolean,default:!1},appointList:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,treeData:[],selectList:{},isShow:!1,memberStatus:!1,checkUserList:[],scrollH:0,filterText:"",openType:"",defaultProps:{children:"children",label:"name"}}},watch:{userList:{handler:function(t,e){this.checkUserList=JSON.parse(JSON.stringify(t))},deep:!0},activeDepartment:{handler:function(t,e){var n=this;if(t){this.isShow=!1;var r=[],a=function(){var e=function e(n){r=n.map((function(n,r,a){return n.children?(t.hasOwnProperty(n.id)?n.isCheck=!0:n.isCheck=!1,e(n.children)):t.hasOwnProperty(n.id)?n.isCheck=!0:n.isCheck=!1,a}))};e(n.treeData)};a(),this.$nextTick((function(){n.$set(n,"treeData",r[0]),n.isShow=!0,n.selectList=t}))}},deep:!0},filterText:function(t){this.$refs.tree.filter(t)},isAppoint:{handler:function(t){console.log(this.appointList)},deep:!0}},mounted:function(){this.getTreeData()},methods:{getTreeData:function(){var t=this;Object(o["V"])().then((function(e){t.isShow=!0,t.treeData=e.data}))},handleClick:function(t,e){this.isShow=!1,this.$set(t,"isCheck",!0),this.isShow=!0,this.$set(this.selectList,t.id,t)},append:function(t,e){this.$Message.warning("只允许添加成员")},handleDelete:function(t){var e=this,n=[];this.isShow=!1,delete this.selectList[t.id];var r=function(){var r=function e(r){n=r.map((function(n,r,a){return n.children?(n.id===t.id&&(n.isCheck=!1),e(n.children)):n.id===t.id&&(n.isCheck=!1),a}))};r(e.treeData)};r(),this.$nextTick((function(){e.$set(e,"treeData",n[0]),e.isShow=!0}))},handleConfirm:function(){var t=this.checkUserList;this.$emit("changeMastart",t,this.openType),this.checkUserList=[]},reseatData:function(){var t=this;this.isShow=!1;var e=[],n=function(){var n=function t(n){e=n.map((function(e,n,r){return e.isCheck=!1,e.children?(e.user.forEach((function(t){t.isCheck=!1})),t(e.children)):e.user.forEach((function(t){t.isCheck=!1})),r}))};n(t.treeData)};n(),this.$nextTick((function(){t.checkUserList=JSON.parse(JSON.stringify(t.userList)),t.$set(t,"treeData",e[0]),t.isShow=!0}))},scroll:function(t){this.scrollH=t.target.scrollTop},checkUser:function(t){var e=this;if(0===this.checkUserList.length)this.$set(t,"isCheck",!0),this.checkUserList.push(t);else{var n=this.checkUserList.some((function(e,n){return e.userid===t.userid}));if(n)return this.$Message.warning("该人员已选择");this.$set(t,"isCheck",!0),this.checkUserList.push(t)}this.$nextTick((function(){e.isShow=!0,e.$nextTick((function(){e.$refs.treeScoll.scroll(0,e.scrollH)}))}))},handleDeleteUser:function(t,e){var n=this;this.checkUserList.splice(e,1);var r=function(){var e=function(e){e.forEach((function(e,n,r){e.member.forEach((function(e){e.id===t.id&&(e.isCheck=!1)}))}))};e(n.treeData)};r(),this.$nextTick((function(){n.isShow=!0}))},filterNode:function(t,e,n){return!t||(-1!==e.label.indexOf(t)||this.checkBelongToChooseNode(t,e,n))},checkBelongToChooseNode:function(t,e,n){var r=n.level;if(1===r)return!1;var a=n.parent;if(n.data.user.length>0)var o=n.data.user.map((function(e){return-1!==e.card.name.indexOf(t)}));if(void 0===o)return!1;for(var i=0;i<o.length;i++)if(!0===o[i])return!0;var c=0;while(c<r-1){if(-1!==a.data.label.indexOf(t))return!0;a=a.parent,c++}return!1},getItemTree:function(t){var e=this;return t&&t.forEach((function(t,n){void 0!=t.user&&t.user.length>0&&t.user.forEach((function(t){t.label=t.card.name,t.children=t})),t.children&&t.children.length>0&&e.getItemTree(t.children)})),t},searchData:function(){},handleConcel:function(){}}},c=i,s=(n("ea8a"),n("2877")),u=Object(s["a"])(c,r,a,!1,null,"c541e030",null);e["a"]=u.exports},e536:function(t,e,n){"use strict";var r=n("2721"),a=n.n(r);a.a},ea8a:function(t,e,n){"use strict";var r=n("a493"),a=n.n(r);a.a}}]);