(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e4dc052"],{"9b41":function(t,e,n){"use strict";n.d(e,"V",(function(){return i})),n.d(e,"P",(function(){return a})),n.d(e,"U",(function(){return o})),n.d(e,"y",(function(){return c})),n.d(e,"v",(function(){return s})),n.d(e,"x",(function(){return u})),n.d(e,"w",(function(){return l})),n.d(e,"z",(function(){return d})),n.d(e,"s",(function(){return m})),n.d(e,"k",(function(){return f})),n.d(e,"j",(function(){return h})),n.d(e,"E",(function(){return p})),n.d(e,"u",(function(){return b})),n.d(e,"F",(function(){return g})),n.d(e,"Q",(function(){return v})),n.d(e,"G",(function(){return _})),n.d(e,"J",(function(){return k})),n.d(e,"W",(function(){return w})),n.d(e,"h",(function(){return y})),n.d(e,"g",(function(){return O})),n.d(e,"t",(function(){return j})),n.d(e,"m",(function(){return C})),n.d(e,"c",(function(){return I})),n.d(e,"b",(function(){return x})),n.d(e,"a",(function(){return S})),n.d(e,"i",(function(){return T})),n.d(e,"d",(function(){return $})),n.d(e,"D",(function(){return L})),n.d(e,"H",(function(){return D})),n.d(e,"I",(function(){return P})),n.d(e,"f",(function(){return U})),n.d(e,"N",(function(){return M})),n.d(e,"M",(function(){return R})),n.d(e,"l",(function(){return B})),n.d(e,"T",(function(){return F})),n.d(e,"e",(function(){return E})),n.d(e,"L",(function(){return N})),n.d(e,"K",(function(){return A})),n.d(e,"O",(function(){return z})),n.d(e,"B",(function(){return q})),n.d(e,"r",(function(){return J})),n.d(e,"q",(function(){return G})),n.d(e,"n",(function(){return H})),n.d(e,"o",(function(){return V})),n.d(e,"p",(function(){return W})),n.d(e,"A",(function(){return K})),n.d(e,"R",(function(){return Q})),n.d(e,"S",(function(){return X})),n.d(e,"C",(function(){return Y}));var r=n("b6bd");function i(){return Object(r["a"])({url:"work/tree",method:"get"})}function a(){return Object(r["a"])({url:"work/label",method:"get"})}function o(){return Object(r["a"])({url:"work/synchMember",method:"post"})}function c(){return Object(r["a"])({url:"work/channel/cate",method:"get"})}function s(){return Object(r["a"])({url:"work/channel/cate/create",method:"get"})}function u(t){return Object(r["a"])({url:"/work/channel/cate/".concat(t,"/edit"),method:"get"})}function l(t){return Object(r["a"])({url:"/work/channel/cate/".concat(t),method:"delete"})}function d(t){return Object(r["a"])({url:"work/channel/code",method:"get",params:t})}function m(t){return Object(r["a"])({url:"work/channel/code",method:"post",data:t})}function f(t){return Object(r["a"])({url:"work/channel/code/".concat(t),method:"get"})}function h(t){return Object(r["a"])({url:"work/channel/code/client",method:"get",params:t})}function p(t,e){return Object(r["a"])({url:"work/channel/code/".concat(t),method:"put",data:e})}function b(t){return Object(r["a"])({url:"work/channel/code/bactch/cate",method:"post",data:t})}function g(){return Object(r["a"])({url:"work/department",method:"get"})}function v(t){return Object(r["a"])({url:"work/member",method:"get",params:t})}function _(t){return Object(r["a"])({url:"work/group_chat",method:"get",params:t})}function k(){return Object(r["a"])({url:"work/group_chat/synch",method:"post"})}function w(t){return Object(r["a"])({url:"work/welcome",method:"post",data:t})}function y(t){return Object(r["a"])({url:"work/welcome",method:"get",params:t})}function O(t){return Object(r["a"])({url:"work/welcome/".concat(t),method:"get"})}function j(t,e){return Object(r["a"])({url:"work/welcome/".concat(t),method:"put",data:e})}function C(t){return Object(r["a"])({url:"work/group_chat_auth",method:"post",data:t})}function I(t){return Object(r["a"])({url:"work/group_chat_auth",method:"get",params:t})}function x(t){return Object(r["a"])({url:"work/group_chat_auth/".concat(t),method:"get"})}function S(t,e){return Object(r["a"])({url:"work/group_chat_auth/".concat(t),method:"put",data:e})}function T(t){return Object(r["a"])({url:"work/client",method:"get",params:t})}function $(t){return Object(r["a"])({url:"work/group_chat/member",method:"get",params:t})}function L(){return Object(r["a"])({url:"work/client/synch",method:"get"})}function D(t){return Object(r["a"])({url:"work/group_chat/statistics",method:"get",params:t})}function P(t){return Object(r["a"])({url:"work/group_chat/statisticsList",method:"get",params:t})}function U(t){return Object(r["a"])({url:"work/group_template",method:"get",params:t})}function M(t){return Object(r["a"])({url:"work/group_template",method:"post",data:t})}function R(t){return Object(r["a"])({url:"work/group_template/".concat(t),method:"get"})}function B(t){return Object(r["a"])({url:"work/moment",method:"get",params:t})}function F(t){return Object(r["a"])({url:"/work/moment",method:"post",data:t})}function E(t){return Object(r["a"])({url:"work/group_template_chat",method:"get",params:t})}function N(t){return Object(r["a"])({url:"work/group_template_chat",method:"post",data:t})}function A(t){return Object(r["a"])({url:"work/group_template_chat/".concat(t),method:"get"})}function z(t){return Object(r["a"])({url:"work/group_template/sendMessage",method:"post",data:t})}function q(t){return Object(r["a"])({url:"work/client/count",method:"post",data:t})}function J(t,e){return Object(r["a"])({url:"work/group_template/memberList/".concat(t),method:"get",params:e})}function G(t,e){return Object(r["a"])({url:"work/group_template/clientList/".concat(t),method:"get",params:e})}function H(t,e){return Object(r["a"])({url:"work/group_template_chat/groupChatList/".concat(t),method:"get",params:e})}function V(t,e){return Object(r["a"])({url:"work/group_template_chat/groupChatOwnerList/".concat(t),method:"get",params:e})}function W(t){return Object(r["a"])({url:"work/group_template_chat/getOwnerChatList",method:"get",params:t})}function K(t){return Object(r["a"])({url:"work/client/batchLabel",method:"post",data:t})}function Q(t){return Object(r["a"])({url:"work/moment/".concat(t),method:"get"})}function X(t){return Object(r["a"])({url:"work/moment_list",method:"get",params:t})}function Y(t,e){return Object(r["a"])({url:"work/client/".concat(t),method:"put",data:e})}},a493:function(t,e,n){},c297:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex"},[n("Modal",{attrs:{width:"680px",title:"选择成员","mask-closable":!1,"z-index":9},on:{"on-ok":t.handleConfirm,"on-cancel":t.handleConcel},model:{value:t.memberStatus,callback:function(e){t.memberStatus=e},expression:"memberStatus"}},[t.isShow?n("div",{staticClass:"container"},[n("Row",[n("Col",{staticClass:"search-p",attrs:{span:24}},[n("Input",{staticClass:"input-with-select",attrs:{placeholder:"搜索成员",search:""},on:{"on-search":t.searchData},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),n("div",{ref:"treeScoll",staticClass:"tree-box",on:{scroll:t.scroll}},[t.isAppoint?t._e():n("el-tree",{ref:"tree",attrs:{data:t.treeData,props:t.defaultProps,"highlight-current":!0,"default-expand-all":!0,"expand-on-click-node":!1,"filter-node-method":t.filterNode},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.node,i=e.data;return n("div",{staticClass:"custom-tree-node"},[n("span",{staticClass:"flex-box",on:{click:function(){return t.append(r,i)}}},[n("Icon",{staticClass:"tree-icon",attrs:{type:"ios-folder",size:"15",color:"#FFCA28"}}),t._v("\n                "+t._s(r.label)+"\n                "),n("span",[t._v("("+t._s(i.member.length)+")")])],1),n("div",[i.member.length?n("div",{staticClass:"user-list"},t._l(i.member,(function(e,r){return n("div",{key:r,staticClass:"user-item",on:{click:function(n){return n.stopPropagation(),t.checkUser(e)}}},[""!==e.avatar?n("img",{attrs:{src:e.avatar,alt:""}}):t._e(),t._v("\n                    "+t._s(e.name)+"\n                  ")])})),0):t._e()])])}}],null,!1,1386218660)})],1)],1),n("div",{staticClass:"select-box"},[n("div",{staticClass:"title"},[t._v("已选择成员")]),n("div",{staticClass:"list-box"},t._l(t.checkUserList,(function(e,r){return n("div",{key:e.id,staticClass:"select-item"},[n("div",{staticClass:"left"},[n("span",[t._v(t._s(e.name))])]),e.isDelete?t._e():n("div",{staticClass:"right-box"},[n("span",{staticClass:"el-icon-close",on:{click:function(n){return t.handleDeleteUser(e,r)}}})])])})),0)])],1):t._e()])],1)},i=[],a=n("9b41"),o={name:"Department",props:{isEdit:{type:Number,default:0},activeDepartment:{type:Object,default:function(){return null}},userList:{type:Array,default:function(){return[]}},isAppoint:{type:Boolean,default:!1},appointList:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,treeData:[],selectList:{},isShow:!1,memberStatus:!1,checkUserList:[],scrollH:0,filterText:"",openType:"",defaultProps:{children:"children",label:"name"}}},watch:{userList:{handler:function(t,e){this.checkUserList=JSON.parse(JSON.stringify(t))},deep:!0},activeDepartment:{handler:function(t,e){var n=this;if(t){this.isShow=!1;var r=[],i=function(){var e=function e(n){r=n.map((function(n,r,i){return n.children?(t.hasOwnProperty(n.id)?n.isCheck=!0:n.isCheck=!1,e(n.children)):t.hasOwnProperty(n.id)?n.isCheck=!0:n.isCheck=!1,i}))};e(n.treeData)};i(),this.$nextTick((function(){n.$set(n,"treeData",r[0]),n.isShow=!0,n.selectList=t}))}},deep:!0},filterText:function(t){this.$refs.tree.filter(t)},isAppoint:{handler:function(t){console.log(this.appointList)},deep:!0}},mounted:function(){this.getTreeData()},methods:{getTreeData:function(){var t=this;Object(a["V"])().then((function(e){t.isShow=!0,t.treeData=e.data}))},handleClick:function(t,e){this.isShow=!1,this.$set(t,"isCheck",!0),this.isShow=!0,this.$set(this.selectList,t.id,t)},append:function(t,e){this.$Message.warning("只允许添加成员")},handleDelete:function(t){var e=this,n=[];this.isShow=!1,delete this.selectList[t.id];var r=function(){var r=function e(r){n=r.map((function(n,r,i){return n.children?(n.id===t.id&&(n.isCheck=!1),e(n.children)):n.id===t.id&&(n.isCheck=!1),i}))};r(e.treeData)};r(),this.$nextTick((function(){e.$set(e,"treeData",n[0]),e.isShow=!0}))},handleConfirm:function(){var t=this.checkUserList;this.$emit("changeMastart",t,this.openType),this.checkUserList=[]},reseatData:function(){var t=this;this.isShow=!1;var e=[],n=function(){var n=function t(n){e=n.map((function(e,n,r){return e.isCheck=!1,e.children?(e.user.forEach((function(t){t.isCheck=!1})),t(e.children)):e.user.forEach((function(t){t.isCheck=!1})),r}))};n(t.treeData)};n(),this.$nextTick((function(){t.checkUserList=JSON.parse(JSON.stringify(t.userList)),t.$set(t,"treeData",e[0]),t.isShow=!0}))},scroll:function(t){this.scrollH=t.target.scrollTop},checkUser:function(t){var e=this;if(0===this.checkUserList.length)this.$set(t,"isCheck",!0),this.checkUserList.push(t);else{var n=this.checkUserList.some((function(e,n){return e.userid===t.userid}));if(n)return this.$Message.warning("该人员已选择");this.$set(t,"isCheck",!0),this.checkUserList.push(t)}this.$nextTick((function(){e.isShow=!0,e.$nextTick((function(){e.$refs.treeScoll.scroll(0,e.scrollH)}))}))},handleDeleteUser:function(t,e){var n=this;this.checkUserList.splice(e,1);var r=function(){var e=function(e){e.forEach((function(e,n,r){e.member.forEach((function(e){e.id===t.id&&(e.isCheck=!1)}))}))};e(n.treeData)};r(),this.$nextTick((function(){n.isShow=!0}))},filterNode:function(t,e,n){return!t||(-1!==e.label.indexOf(t)||this.checkBelongToChooseNode(t,e,n))},checkBelongToChooseNode:function(t,e,n){var r=n.level;if(1===r)return!1;var i=n.parent;if(n.data.user.length>0)var a=n.data.user.map((function(e){return-1!==e.card.name.indexOf(t)}));if(void 0===a)return!1;for(var o=0;o<a.length;o++)if(!0===a[o])return!0;var c=0;while(c<r-1){if(-1!==i.data.label.indexOf(t))return!0;i=i.parent,c++}return!1},getItemTree:function(t){var e=this;return t&&t.forEach((function(t,n){void 0!=t.user&&t.user.length>0&&t.user.forEach((function(t){t.label=t.card.name,t.children=t})),t.children&&t.children.length>0&&e.getItemTree(t.children)})),t},searchData:function(){},handleConcel:function(){}}},c=o,s=(n("ea8a"),n("2877")),u=Object(s["a"])(c,r,i,!1,null,"c541e030",null);e["a"]=u.exports},dfca:function(t,e,n){},e4ad:function(t,e,n){"use strict";var r=n("dfca"),i=n.n(r);i.a},ea72:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"i-layout-page-header"},[n("PageHeader",{staticClass:"product_tabs",attrs:{"hidden-breadcrumb":""}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("div",{staticStyle:{float:"left"}},[n("router-link",{attrs:{to:{path:"/admin/work/client/moment"}}},[n("div",{staticClass:"font-sm after-line"},[n("span",{staticClass:"iconfont iconfanhui"}),n("span",{staticClass:"pl10"},[t._v("返回")])])])],1),n("span",{staticClass:"mr20 ml16"},[t._v("发布朋友圈")])])])],1),n("Card",{staticClass:"ivu-mt mb100",attrs:{bordered:!1,"dis-hover":""}},[n("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":110,"label-colon":!0,rules:t.ruleValidate}},[n("FormItem",{attrs:{label:"任务名称",prop:"name"}},[n("Input",{staticStyle:{width:"460px"},attrs:{placeholder:"请输入任务名称"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),n("FormItem",{attrs:{label:"成员类型",required:""}},[n("RadioGroup",{model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[n("Radio",{attrs:{label:"0"}},[t._v("全部成员")]),n("Radio",{attrs:{label:"1"}},[t._v("选定成员")])],1)],1),1==t.formItem.type?n("FormItem",{attrs:{label:"发表成员"}},[n("Button",{on:{click:function(e){return t.addUser()}}},[t._v("选择成员")]),n("div",{staticStyle:{"margin-top":"10px"}},t._l(t.formItem.user_ids,(function(e,r){return n("Tag",{key:r,attrs:{closable:"",name:e.name,size:"large"},on:{"on-close":t.handleDel}},[t._v(t._s(e.name))])})),1)],1):t._e(),n("FormItem",{attrs:{label:"可见的客户",required:""}},[n("RadioGroup",{model:{value:t.formItem.client_type,callback:function(e){t.$set(t.formItem,"client_type",e)},expression:"formItem.client_type"}},[n("Radio",{attrs:{label:"0"}},[t._v("全部客户")]),n("Radio",{attrs:{label:"1"}},[t._v("筛选客户")])],1),n("div",{staticClass:"desc"},[t._v("预估将发送到\n            "),n("span",{staticClass:"client_count"},[t._v("["+t._s(t.clientCount)+"]")]),t._v("个客户朋友圈中。\n            "),n("span",{directives:[{name:"show",rawName:"v-show",value:1==t.formItem.client_type,expression:"formItem.client_type == 1"}]},[t._v("将消息发送给符合条件的客户")])])],1),1==t.formItem.client_type?n("FormItem",{attrs:{label:"标签"}},[n("TreeSelect",{directives:[{name:"width",rawName:"v-width",value:460,expression:"460"}],attrs:{data:t.labelList,multiple:""},model:{value:t.formItem.client_tag_list,callback:function(e){t.$set(t.formItem,"client_tag_list",e)},expression:"formItem.client_tag_list"}})],1):t._e(),n("FormItem",{attrs:{label:"消息内容1",required:""}},[n("Input",{staticStyle:{width:"460px"},attrs:{type:"textarea",rows:4,"show-word-limit":"",placeholder:"请输入消息内容",maxlength:"1000"},model:{value:t.formItem.welcome_words.text.content,callback:function(e){t.$set(t.formItem.welcome_words.text,"content",e)},expression:"formItem.welcome_words.text.content"}})],1),n("FormItem",{attrs:{label:"消息内容2"}},[n("RadioGroup",{model:{value:t.descType,callback:function(e){t.descType=e},expression:"descType"}},[n("Radio",{attrs:{label:"0"}},[t._v("图片")]),n("Radio",{attrs:{label:"1"}},[t._v("视频")]),n("Radio",{attrs:{label:"2"}},[t._v("图文链接")])],1)],1),0==t.descType?n("FormItem",[n("div",{staticClass:"acea-row"},[t._l(t.formItem.welcome_words.attachments,(function(e,r){return n("div",{key:r,staticClass:"pictrue"},["image"==e.msgtype?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image.pic_url,expression:"item.image.pic_url"}]}):t._e(),n("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(e){return t.handleRemove(r)}}})],1)})),t.formItem.welcome_words.attachments.length<9?n("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:function(e){return t.modalPicTap("duo")}}},[n("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1):t._e()],2),n("div",{staticClass:"tips"},[t._v("\n            因企业微信限制，图片长宽建议不超过1440x1080，大小不超过10M\n          ")])]):t._e(),1==t.descType?n("FormItem",[t.upload_type?n("Upload",{staticStyle:{display:"inline-block"},attrs:{"show-upload-list":!1,action:t.fileUrl2,"before-upload":t.videoSaveToUrl,data:t.uploadData,headers:t.header,multiple:!0}},[n("div",{staticClass:"videbox"},[t._v("\n\t\t\t\t      +\n\t\t\t\t    ")])]):n("Input",{staticStyle:{width:"460px"},model:{value:t.videoObj.video.url,callback:function(e){t.$set(t.videoObj.video,"url",e)},expression:"videoObj.video.url"}}),n("div",{staticClass:"tips"},[t._v("建议时长：9～30秒，大小10M以内")])],1):t._e(),2==t.descType?n("FormItem",{attrs:{label:"图文链接"}},[n("Input",{staticStyle:{width:"460px"},attrs:{placeholder:"链接地址请以http或https开头"},on:{"on-blur":function(e){return t.linkBlur()}},model:{value:t.linkObj.link.url,callback:function(e){t.$set(t.linkObj.link,"url",e)},expression:"linkObj.link.url"}})],1):t._e(),2==t.descType?n("FormItem",{attrs:{label:"链接标题"}},[n("Input",{staticStyle:{width:"460px"},attrs:{placeholder:"请输入链接标题"},on:{"on-blur":function(e){return t.titleBlur()}},model:{value:t.linkObj.link.title,callback:function(e){t.$set(t.linkObj.link,"title",e)},expression:"linkObj.link.title"}})],1):t._e(),n("FormItem",{attrs:{label:"发送方式",required:""}},[n("RadioGroup",{model:{value:t.formItem.send_type,callback:function(e){t.$set(t.formItem,"send_type",e)},expression:"formItem.send_type"}},[n("Radio",{attrs:{label:"0"}},[t._v("立即发送")]),n("Radio",{attrs:{label:"1"}},[t._v("定时发送")])],1)],1),1==t.formItem.send_type?n("FormItem",{attrs:{label:"定时发送时间",prop:"send_time"}},[n("DatePicker",{staticStyle:{width:"460px"},attrs:{type:"datetime",placeholder:"Select date"},on:{"on-change":t.snedChangeTime},model:{value:t.formItem.send_time,callback:function(e){t.$set(t.formItem,"send_time",e)},expression:"formItem.send_time"}})],1):t._e()],1)],1),n("Card",{staticClass:"fixed-card",attrs:{bordered:!1,"dis-hover":""}},[n("div",{staticClass:"acea-row row-center-wrapper"},[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1)]),n("Modal",{attrs:{width:"960px",scrollable:"","footer-hide":"",closable:"",title:"上传商品图","mask-closable":!1,"z-index":1},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?n("uploadPictures",{attrs:{isChoice:t.isChoice,gridBtn:t.gridBtn,gridPic:t.gridPic},on:{getPicD:t.getPicD}}):t._e()],1),n("department",{ref:"department",attrs:{"active-department":t.activeDepartment,"is-site":t.isSite,userList:t.userList,"only-department":t.onlyDepartment},on:{changeMastart:t.changeMastart}})],1)},i=[],a=n("2f62"),o=n("9b41"),c=n("b0e7"),s=n("c297"),u=n("d708"),l=n("c276"),d=n("0e5c");function m(t){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(n,!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b={data:function(){var t;return t={formItem:{name:"",type:"0",client_tag_list:[],client_type:"0",user_ids:[],welcome_words:{text:{content:""},attachments:[]},send_type:"0",send_time:""},descType:"0",modalPic:!1,picTit:"",tableIndex:0,isChoice:"",labelList:[],ruleValidate:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],send_time:[{required:!0,message:"发送时间不能为空",trigger:"change"}]},gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},imageObj:{msgtype:"image",image:{media_id:"",pic_url:""}},linkObj:{msgtype:"link",link:{media_id:"",title:"",url:""}},videoObj:{msgtype:"video",video:{media_id:"",url:""}},activeDepartment:{},isSite:!0,onlyDepartment:!1,openType:"",userList:[],fileUrl2:u["a"].apiBaseURL+"/file/video_upload",upload_type:"",uploadData:{},header:{},progress:0},p(t,"upload_type",!0),p(t,"clientCount",0),t},components:{uploadPictures:c["a"],department:s["a"]},computed:h({},Object(a["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:96},labelPosition:function(){return this.isMobile?"top":"right"}}),watch:{"formItem.client_tag_list":function(t,e){t!==e&&this.getClientCount()}},mounted:function(){this.setCopyrightShow({value:!1}),this.getWorkLabel(),this.getToken(),this.getClientCount()},destroyed:function(){this.setCopyrightShow({value:!0})},methods:h({},Object(a["d"])("admin/layout",["setCopyrightShow"]),{getWorkLabel:function(){var t=this;Object(o["P"])().then((function(e){t.labelList=e.data.map((function(e){return t.mapTree(e)}))}))},mapTree:function(t){var e=this,n=Array.isArray(t.children)&&t.children.length>0;return{title:t.label,expand:!0,value:t.value,selected:!1,checked:!1,children:n?t.children.map((function(t){return e.mapTree(t)})):[]}},modalPicTap:function(t,e,n){this.modalPic=!0,this.isChoice="dan"===t?"单选":"多选",this.picTit=e,this.tableIndex=n},snedChangeTime:function(t){this.formItem.send_time=t},handleRemove:function(t){this.formItem.welcome_words.attachments.splice(t,1)},getPicD:function(t){var e=this,n=[];n=t.map((function(t){return t.att_dir})),n.forEach((function(t){e.imageObj.image.pic_url=t,e.formItem.welcome_words.attachments.push(e.imageObj)})),this.modalPic=!1},addUser:function(){this.userList=this.formItem.user_ids,this.$refs.department.memberStatus=!0},changeMastart:function(t,e){this.formItem.user_ids=t.map((function(t){return{userid:t.userid,name:t.name}}))},handleDel:function(t,e){var n=this.formItem.user_ids.indexOf(e);this.formItem.user_ids.splice(n,1)},linkBlur:function(){if(!this.linkObj.link.url)return this.$Message.warning("请输入链接")},titleBlur:function(){if(!this.linkObj.link.title)return this.$Message.warning("请输入链接标题")},submit:function(){var t=this;if(!this.formItem.welcome_words.text.content.length)return this.$Message.error("请填写消息内容1");2==this.descType?this.formItem.welcome_words.attachments.push(this.linkObj):1==this.descType&&this.formItem.welcome_words.attachments.push(this.videoObj);var e=this.deepClone(this.formItem);e.user_ids=e.user_ids.map((function(t){return t.userid})),this.$refs.formItem.validate((function(n){n&&Object(o["T"])(e).then((function(e){t.$Message.success(e.msg),t.$router.push("/admin/work/client/moment")})).catch((function(e){t.$Message.error(e.msg)}))}))},deepClone:function(t){var e=Array.isArray(t)?[]:{};if(t&&"object"===m(t))for(var n in t)t.hasOwnProperty(n)&&(e[n]=t&&"object"===m(t[n])?this.deepClone(t[n]):t[n]);return e},videoSaveToUrl:function(t){var e=this;return Object(d["a"])({randoms:"",file:t,pieceSize:3,success:function(t){e.upload_type=!1,e.videoObj.video.url=u["a"].apiBaseURL+t.file_path,e.$Spin.hide()},error:function(t){e.$Message.error(t.msg),e.$Spin.hide()},uploading:function(t,n){e.$Spin.show()}}),!1},getToken:function(){this.header["Authori-zation"]="Bearer "+l["a"].cookies.get("token")},getClientCount:function(){var t=this;Object(o["B"])({is_all:1==this.formItem.client_type?0:1,label:this.formItem.client_tag_list}).then((function(e){t.clientCount=e.data.sum_count}))}})},g=b,v=(n("e4ad"),n("2877")),_=Object(v["a"])(g,r,i,!1,null,"35b03673",null);e["default"]=_.exports},ea8a:function(t,e,n){"use strict";var r=n("a493"),i=n.n(r);i.a}}]);