(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52a167dc","chunk-b43bc32e","chunk-2d0bd5d4"],{"0567":function(t,e,a){"use strict";var r=a("dae3"),s=a.n(r);s.a},"0a44":function(t,e,a){"use strict";var r=a("0d68"),s=a.n(r);s.a},"0d68":function(t,e,a){},"0e64":function(t,e,a){},"0fc4":function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return n}));var r=a("b6bd");function s(){return Object(r["a"])({url:"erp/config",method:"get"})}function i(t){return Object(r["a"])({url:"store/erp/shop",method:"get",params:t})}function n(t){return Object(r["a"])({url:"product/import_erp_product",method:"post",data:t})}},"14e3":function(t,e,a){},"1ea9":function(t,e,a){"use strict";var r=a("ec22"),s=a.n(r);s.a},"2c4a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"任务列表",width:"1000","footer-hide":"","class-name":"vertical-center-modal"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[t.modal?a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("Form",{ref:"formValidate",staticClass:"tabform",attrs:{inline:"",model:t.formValidate,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"操作时间："}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{editable:!1,value:t.timeVal,format:"yyyy/MM/dd",type:"datetimerange",placement:"bottom-start",placeholder:"自定义时间",options:t.options},on:{"on-change":t.onchangeTime}})],1),a("FormItem",{attrs:{label:"类型："}},[a("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},on:{"on-change":t.typeSearchs},model:{value:t.formValidate.type,callback:function(e){t.$set(t.formValidate,"type",e)},expression:"formValidate.type"}},t._l(t.typeList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"状态："}},[a("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},on:{"on-change":t.statusSearchs},model:{value:t.formValidate.status,callback:function(e){t.$set(t.formValidate,"status",e)},expression:"formValidate.status"}},t._l(t.statusList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),a("Table",{staticClass:"mt25",attrs:{height:"530",columns:t.columns1,data:t.data1,loading:t.loading},scopedSlots:t._u([{key:"action",fn:function(e){var r=e.row;e.index;return[r.is_show_log?[a("a",{on:{click:function(e){return t.deliveryLook(r)}}},[t._v("查看")]),a("Divider",{attrs:{type:"vertical"}})]:t._e(),[a("Dropdown",{on:{"on-click":function(e){return t.changeMenu(r,e)}}},[a("a",[t._v("更多"),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[[7,8,9,10].includes(r.type)?a("DropdownItem",{attrs:{name:"1"}},[t._v("下载")]):t._e(),1==r.status?a("DropdownItem",{attrs:{name:"2"}},[t._v("重新执行")]):t._e(),r.is_stop_button?a("DropdownItem",{attrs:{name:"3"}},[t._v("停止任务")]):t._e(),a("DropdownItem",{attrs:{name:"4"}},[t._v("清除任务")])],1)],1)]]}}],null,!1,2501981875)}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:t.page1.total,current:t.page1.pageNum,"show-elevator":"","show-total":"","page-size":t.page1.pageSize,"show-sizer":""},on:{"on-change":t.pageChange,"on-page-size-change":t.limitChange}})],1)],1):t._e(),a("Modal",{attrs:{width:"900","footer-hide":""},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Table",{staticClass:"mt25",attrs:{height:"500",columns:t.columns4,data:t.data2,loading:t.loading2}}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:t.page2.total,current:t.page2.pageNum,"show-elevator":"","show-total":"","page-size":t.page2.pageSize,"show-sizer":""},on:{"on-change":t.pageChange2,"on-page-size-change":t.limitChange2}})],1)],1)],1)},s=[],i=a("a34a"),n=a.n(i),o=a("f8b7"),l=a("2f62"),c=a("2e83");function d(t,e,a,r,s,i,n){try{var o=t[i](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,s)}function u(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var i=t.apply(e,a);function n(t){d(i,r,s,n,o,"next",t)}function o(t){d(i,r,s,n,o,"throw",t)}n(void 0)}))}}function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(a,!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h={data:function(){return{modal:!1,columns1:[{title:"ID",key:"id"},{title:"操作时间",key:"add_time"},{title:"发货单数",key:"total_num"},{title:"成功发货单数",key:"success_num"},{title:"发货类型",key:"title"},{title:"状态",key:"status_cn"},{title:"操作",slot:"action",fixed:"right",width:150,align:"center"}],data1:[],page1:{total:0,pageNum:1,pageSize:10},formValidate:{type:"",status:"",data:""},options:{shortcuts:[{text:"今天",value:function(){var t=new Date,e=new Date;return e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),[e,t]}},{text:"昨天",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),[e,t]}},{text:"最近7天",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-6))),[e,t]}},{text:"最近30天",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-29))),[e,t]}},{text:"本月",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),1))),[e,t]}},{text:"本年",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),0,1))),[e,t]}}]},timeVal:[],typeList:[{label:"批量删除订单",value:"6"},{label:"批量手动发货",value:"7"},{label:"批量打印电子面单",value:"8"},{label:"批量配送",value:"9"},{label:"批量虚拟发货",value:"10"}],statusList:[{label:"未处理",value:"0"},{label:"处理中",value:"1"},{label:"已完成",value:"2"},{label:"处理失败",value:"3"}],columns2:[{title:"订单ID",key:"order_id"},{title:"物流公司",key:"delivery_name"},{title:"物流单号",key:"delivery_id"},{title:"处理状态",key:"status_cn"},{title:"异常原因",key:"error"}],columns3:[{title:"订单ID",key:"order_id"},{title:"备注",key:"fictitious_content"},{title:"处理状态",key:"status_cn"},{title:"异常原因",key:"error"}],columns5:[{title:"订单ID",key:"order_id"},{title:"配送员",key:"delivery_name"},{title:"配送员电话",key:"delivery_id"},{title:"处理状态",key:"status_cn"},{title:"异常原因",key:"error"}],columns4:[],data2:[],page2:{total:0,pageNum:1,pageSize:12},modal1:!1,deliveryLog:null,deliveryLogId:0,deliveryLogType:"",loading:!1,loading2:!1}},computed:f({},Object(l["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:96},labelPosition:function(){return this.isMobile?"top":"right"}}),created:function(){this.getQueue()},methods:{getQueue:function(){var t=this,e={page:this.page1.pageNum,limit:this.page1.pageSize};this.formValidate.status&&(e.status=this.formValidate.status),this.formValidate.type&&(e.type=this.formValidate.type),this.formValidate.data&&(e.data=this.formValidate.data),this.loading=!0,Object(o["M"])(e).then((function(e){t.loading=!1,t.data1=e.data.list,t.page1.total=e.data.count})).catch((function(e){t.loading=!1}))},pageChange:function(t){this.page1.pageNum=t,this.getQueue()},pageChange2:function(t){this.page2.pageNum=t,this.getDeliveryLog()},limitChange:function(t){this.page1.pageSize=t,this.getQueue()},limitChange2:function(t){this.page2.pageSize=t,this.getDeliveryLog()},onchangeTime:function(t){this.timeVal=t,this.formValidate.data=this.timeVal[0]?this.timeVal.join("-"):"",this.page1.pageNum=1,this.getQueue()},typeSearchs:function(){this.page1.pageNum=1,this.getQueue()},statusSearchs:function(){this.page1.pageNum=1,this.getQueue()},getDeliveryLog:function(){var t=this;this.loading2=!0,Object(o["c"])(this.deliveryLogId,this.deliveryLogType,{page:this.page2.pageNum,limit:this.page2.pageSize}).then((function(e){t.loading2=!1,t.data2=e.data.list,t.page2.total=e.data.count})).catch((function(e){t.loading2=!1}))},deliveryLook:function(t){switch(this.modal1=!0,this.deliveryLogId=t.id,this.deliveryLogType=t.cache_type,this.deliveryLog=t,t.type){case 7:case 8:this.columns4=this.columns2;break;case 9:this.columns4=this.columns5;break;case 10:this.columns4=this.columns3;break}this.getDeliveryLog()},changeMenu:function(t,e){var a=this;switch(e){case"1":this.exports(t.id,t.type,t.cache_type);break;case"2":this.queueAgain(t.id,t.type);break;case"3":this.$Modal.confirm({title:"谨慎操作",content:"<p>确认停止该任务？</p>",onOk:function(){a.stopQueue(t.id)}});break;case"4":this.queueDel(t.id,t.type);break}},exports:function(){var t=u(n.a.mark((function t(e,a,r){var s,i,o,l,d;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=[],i=[],o=[],l="",t.next=3,this.getExcelData(e,a,r);case 3:d=t.sent,l||(l=d.filename),i.length||(i=d.filekey),s.length||(s=d.header),o=d.export,Object(c["a"])(s,i,l,o);case 9:case"end":return t.stop()}}),t,this)})));function e(e,a,r){return t.apply(this,arguments)}return e}(),getExcelData:function(t,e,a){return new Promise((function(r,s){Object(o["a"])(t,e,a).then((function(t){return r(t.data)}))}))},queueAgain:function(t,e){var a=this;Object(o["K"])(t,e).then((function(t){a.$Message.success(t.msg),a.getQueue()})).catch((function(t){a.$Message.error(t.msg)}))},queueDel:function(t,e){var a=this;Object(o["L"])(t,e).then((function(t){a.$Message.success(t.msg),a.getQueue()})).catch((function(t){a.$Message.error(t.msg)}))},stopQueue:function(t){var e=this;Object(o["S"])(t).then((function(t){e.$Message.success(t.msg),e.getQueue()})).catch((function(t){e.$Message.error(t.msg)}))}}},v=h,_=a("2877"),g=Object(_["a"])(v,r,s,!1,null,null,null);e["default"]=g.exports},"35e0":function(t,e,a){},"3d90":function(t,e,a){},4018:function(t,e,a){},"417c":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"订单记录",width:"700","footer-hide":""},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[a("Card",{attrs:{bordered:!1,"dis-hover":""}},[a("Table",{attrs:{columns:t.columns,border:"",data:t.recordData,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"}})],1)],1)},s=[],i=a("a34a"),n=a.n(i),o=a("f8b7");function l(t,e,a,r,s,i,n){try{var o=t[i](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,s)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var i=t.apply(e,a);function n(t){l(i,r,s,n,o,"next",t)}function o(t){l(i,r,s,n,o,"throw",t)}n(void 0)}))}}var d={name:"orderRecord",data:function(){return{modals:!1,loading:!1,recordData:[],page:{page:1,limit:10},columns:[{title:"订单ID",key:"oid",align:"center",minWidth:40},{title:"操作记录",key:"change_message",align:"center",minWidth:280},{title:"操作时间",key:"change_time",align:"center",minWidth:100}]}},methods:{pageChange:function(t){this.page.pageNum=t,this.getList()},getList:function(t){var e=this,a={id:t,datas:this.page};this.loading=!0,Object(o["k"])(a).then(function(){var t=c(n.a.mark((function t(a){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.recordData=a.data,e.loading=!1;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))}}},u=d,m=(a("9a6c"),a("2877")),f=Object(m["a"])(u,r,s,!1,null,"76aba4fe",null);e["a"]=f.exports},"54fe":function(t,e,a){},"5c3ac":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[(t.currentTab,a("productlist-details",{ref:"productlist"})),t.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":"",padding:0}},[a("div",{staticClass:"new_card_pd"},[a("table-form",{attrs:{"is-all":t.isAll,"auto-disabled":t.autoDisabled,"form-selection":t.selection},on:{getList:t.getData,"order-data":t.orderDatas}})],1)]),t.cardLists.length>=0?a("cards-data",{attrs:{cardLists:t.cardLists}}):t._e(),a("Card",{attrs:{bordered:!1,"dis-hover":""}},[a("table-list",{ref:"table",attrs:{where:t.orderData,"is-all":t.isAll},on:{"on-all":t.onAll,"auto-disabled":t.onAutoDisabled,"order-data":t.onOrderData,"on-changeCards":t.getCards,changeGetTabs:t.changeGetTabs,"order-select":t.orderSelect}})],1)],1)},n=[],o=a("a584"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"orderData",staticClass:"tabform",attrs:{inline:"",model:t.orderData,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Row",[a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"订单状态："}},[a("Select",{staticStyle:{width:"300px"},attrs:{clearable:"",placeholder:"全部"},on:{"on-change":t.selectChange2},model:{value:t.orderData.status,callback:function(e){t.$set(t.orderData,"status",e)},expression:"orderData.status"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),a("Option",{attrs:{value:"0"}},[t._v("未支付")]),a("Option",{attrs:{value:"1"}},[t._v("未发货")]),a("Option",{attrs:{value:"2"}},[t._v("待收货")]),a("Option",{attrs:{value:"3"}},[t._v("待评价")]),a("Option",{attrs:{value:"4"}},[t._v("交易完成")]),a("Option",{attrs:{value:"-4"}},[t._v("已删除")])],1)],1)],1),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"支付方式："}},[a("Select",{staticStyle:{width:"300px"},attrs:{clearable:"",placeholder:"全部"},on:{"on-change":t.userSearchs},model:{value:t.orderData.pay_type,callback:function(e){t.$set(t.orderData,"pay_type",e)},expression:"orderData.pay_type"}},t._l(t.payList,(function(e){return a("Option",{key:e.id,attrs:{value:e.val}},[t._v(t._s(e.label))])})),1)],1)],1),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"创建时间："}},[a("DatePicker",{staticClass:"mr20",staticStyle:{width:"300px"},attrs:{editable:!1,clearable:!0,value:t.timeVal,format:"yyyy/MM/dd HH:mm:ss",type:"datetimerange",placement:"bottom-start",placeholder:"自定义时间",options:t.options},on:{"on-change":t.onchangeTime}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"订单搜索：",prop:"real_name","label-for":"real_name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入","element-id":"name",clearable:"",maxlength:"20"},model:{value:t.orderData.real_name,callback:function(e){t.$set(t.orderData,"real_name",e)},expression:"orderData.real_name"}},[a("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend","default-label":"全部"},slot:"prepend",model:{value:t.orderData.field_key,callback:function(e){t.$set(t.orderData,"field_key",e)},expression:"orderData.field_key"}},[a("Option",{attrs:{value:"all"}},[t._v("全部")]),a("Option",{attrs:{value:"order_id"}},[t._v("订单号")]),a("Option",{attrs:{value:"uid"}},[t._v("用户UID")]),a("Option",{attrs:{value:"real_name"}},[t._v("用户姓名")]),a("Option",{attrs:{value:"user_phone"}},[t._v("用户电话")]),a("Option",{attrs:{value:"title"}},[t._v("商品名称")]),a("Option",{attrs:{value:"total_num"}},[t._v("商品件数")])],1)],1)],1),a("FormItem",[a("Button",{staticStyle:{"margin-left":"-90px"},attrs:{type:"primary"},on:{click:function(e){return t.orderSearch(t.orderData.real_name)}}},[t._v("查询")])],1)],1)],1)],1)],1)},c=[],d=a("2f62"),u=a("f8b7"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"订单发送货",closable:!1,"class-name":"vertical-center-modal"},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[a("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":100},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"选择类型："}},[a("RadioGroup",{on:{"on-change":t.changeRadio},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[a("Radio",{attrs:{label:"1"}},[t._v("打印电子面单")]),a("Radio",{attrs:{label:"2"}},[t._v("送货")]),a("Radio",{attrs:{label:"3"}},[t._v("虚拟")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formItem.type,expression:"formItem.type === '1'"}]},[a("FormItem",{attrs:{label:"快递公司：",required:""}},[a("Select",{staticStyle:{width:"80%"},attrs:{filterable:"",placeholder:"请选择快递公司"},on:{"on-change":t.expressChange},model:{value:t.formItem.delivery_name,callback:function(e){t.$set(t.formItem,"delivery_name",e)},expression:"formItem.delivery_name"}},t._l(t.express,(function(e,r){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.value))])})),1)],1),"1"===t.formItem.type?[a("FormItem",{staticClass:"express_temp_id",attrs:{label:"电子面单：",required:""}},[a("Select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择电子面单"},on:{"on-change":t.expressTempChange},model:{value:t.formItem.express_temp_id,callback:function(e){t.$set(t.formItem,"express_temp_id",e)},expression:"formItem.express_temp_id"}},t._l(t.expressTemp,(function(e,r){return a("Option",{key:r,attrs:{value:e.temp_id}},[t._v(t._s(e.title))])})),1),t.formItem.express_temp_id?a("Button",{attrs:{type:"text"},on:{click:t.preview}},[t._v("预览")]):t._e()],1),a("FormItem",{attrs:{label:"寄件人姓名：",required:""}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人姓名"},model:{value:t.formItem.to_name,callback:function(e){t.$set(t.formItem,"to_name",e)},expression:"formItem.to_name"}})],1),a("FormItem",{attrs:{label:"寄件人电话：",required:""}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人电话"},model:{value:t.formItem.to_tel,callback:function(e){t.$set(t.formItem,"to_tel",e)},expression:"formItem.to_tel"}})],1),a("FormItem",{attrs:{label:"寄件人地址：",required:""}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人地址"},model:{value:t.formItem.to_addr,callback:function(e){t.$set(t.formItem,"to_addr",e)},expression:"formItem.to_addr"}})],1)]:t._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.formItem.type,expression:"formItem.type === '2'"}]},[a("FormItem",{attrs:{label:"送货人：",required:""}},[a("Select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择送货人"},on:{"on-change":t.shDeliveryChange},model:{value:t.formItem.sh_delivery,callback:function(e){t.$set(t.formItem,"sh_delivery",e)},expression:"formItem.sh_delivery"}},t._l(t.deliveryList,(function(e,r){return a("Option",{key:r,attrs:{value:e.id}},[t._v(t._s(e.wx_name)+"（"+t._s(e.phone)+"）")])})),1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"3"===t.formItem.type,expression:"formItem.type === '3'"}]},[a("FormItem",{attrs:{label:"备注："}},[a("Input",{staticStyle:{width:"80%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:t.formItem.fictitious_content,callback:function(e){t.$set(t.formItem,"fictitious_content",e)},expression:"formItem.fictitious_content"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.putSend}},[t._v("提交")])],1),a("div",{directives:[{name:"viewer",rawName:"v-viewer"},{name:"show",rawName:"v-show",value:t.temp,expression:"temp"}],ref:"viewer"},[a("img",{staticStyle:{display:"none"},attrs:{src:t.temp.pic}})])],1)},f=[],p=a("a34a"),h=a.n(p);function v(t,e,a,r,s,i,n){try{var o=t[i](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,s)}function _(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var i=t.apply(e,a);function n(t){v(i,r,s,n,o,"next",t)}function o(t){v(i,r,s,n,o,"throw",t)}n(void 0)}))}}var g={name:"orderSend",props:{isAll:{type:Number,default:0},ids:{type:Array,default:function(){return[]}},where:{type:Object,default:function(){return{}}},selectArr:{type:Array,default:function(){return[]}}},data:function(){return{formItem:{type:"1",express_record_type:"2",delivery_name:"",delivery_id:"",express_temp_id:"",to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:""},modals:!1,express:[],expressTemp:[],deliveryList:[],temp:{},export_open:!0}},watch:{"formItem.express_temp_id":function(t){}},methods:{changeRadio:function(t){switch(this.$refs.formItem.resetFields(),t){case"1":this.formItem.delivery_name="",this.formItem.delivery_id="",this.formItem.express_temp_id="",this.formItem.express_record_type="2",this.expressTemp=[];break;case"2":this.formItem.sh_delivery="",this.formItem.express_record_type="1";break;case"3":this.formItem.fictitious_content="",this.formItem.express_record_type="1";break}},changeExpress:function(t){switch(t){case"2":this.formItem.delivery_name="",this.formItem.express_temp_id="",this.expressTemp=[];break;case"1":this.formItem.delivery_name="",this.formItem.delivery_id="";break;default:break}},reset:function(){this.formItem={type:"1",express_record_type:"2",delivery_name:"",delivery_id:"",express_temp_id:"",expressTemp:[],to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:""}},getList:function(){var t=this;Object(u["i"])(1).then(function(){var e=_(h.a.mark((function e(a){return h.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.express=a.data,t.getSheetInfo();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},putSend:function(t){var e=this,a=Object.assign(this.formItem),r=[];if(this.selectArr.forEach((function(t){r.push(t.id)})),1==this.isAll?(a.all=1,a.where=this.where):(a.all=0,a.ids=r),"1"===this.formItem.type){if(""===this.formItem.delivery_name)return this.$Message.error("快递公司不能为空");if(""===this.formItem.express_temp_id)return this.$Message.error("电子面单不能为空");if(""===this.formItem.to_name)return this.$Message.error("寄件人姓名不能为空");if(""===this.formItem.to_tel)return this.$Message.error("寄件人电话不能为空");if(!/^1(3|4|5|7|8|9|6)\d{9}$/i.test(this.formItem.to_tel))return this.$Message.error("请输入正确的手机号码");if(""===this.formItem.to_addr)return this.$Message.error("寄件人地址不能为空")}if("2"===this.formItem.type&&(this.formItem.express_temp_id&&(this.formItem.express_temp_id=""),""===this.formItem.sh_delivery))return this.$Message.error("送货人不能为空");Object(u["F"])(a).then(function(){var t=_(h.a.mark((function t(a){return h.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.modals=!1,e.$Message.success(a.msg),e.reset();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg),e.modals=!1}))},cancel:function(t){this.modals=!1,this.reset()},expressChange:function(t){var e=this,a=this.express.find((function(e){return e.value===t}));a&&(this.formItem.delivery_code=a.code,"1"===this.formItem.type&&(this.expressTemp=[],this.formItem.express_temp_id="",Object(u["v"])({com:this.formItem.delivery_code}).then((function(t){e.expressTemp=t.data,t.data.length||e.$Message.error("请配置你所选快递公司的电子面单")})).catch((function(t){e.$Message.error(t.msg)}))))},getDeliveryList:function(){var t=this;Object(u["t"])().then((function(e){t.deliveryList=e.data.list})).catch((function(e){t.$Message.error(e.msg)}))},getSheetInfo:function(){var t=this;Object(u["E"])().then((function(e){var a=e.data;for(var r in a)a.hasOwnProperty(r)&&"express_temp_id"!==r&&(t.formItem[r]=a[r]);t.export_open=void 0===a.export_open||a.export_open,t.export_open||(t.formItem.express_record_type="1"),t.formItem.to_addr=a.to_add})).catch((function(e){t.$Message.error(e.msg)}))},shDeliveryChange:function(t){var e=this.deliveryList.find((function(e){return e.id===t}));this.formItem.sh_delivery_name=e.wx_name,this.formItem.sh_delivery_id=e.phone,this.formItem.sh_delivery_uid=e.uid},expressTempChange:function(t){this.temp=this.expressTemp.find((function(e){return t===e.temp_id}))},preview:function(){this.$refs.viewer.$viewer.show()}}},y=g,b=(a("7d24"),a("2877")),w=Object(b["a"])(y,m,f,!1,null,"6742e768",null),I=w.exports,D=a("2c4a"),x=a("d708"),C=a("c276"),k=a("0b65");function O(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function $(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?O(a,!0).forEach((function(e){S(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function S(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var M={name:"table_from",components:{autoSend:I,queueList:D["default"]},props:["formSelection","isAll"],data:function(){var t=function(t,e,a){if(!e)return a(new Error("请填写核销码"));if(Number.isInteger(e)){var r=/\b\d{12}\b/;r.test(e)?a():a(new Error("请填写12位数字"))}else a(new Error("请填写12位数字"))};return{currentTab:"",grid:{xl:8,lg:12,md:24,sm:24,xs:24},orderData:{status:"",data:"",real_name:"",field_key:"all",pay_type:""},modalTitleSs:"",statusType:"",time:"",value2:[],isDelIdList:[],writeOffRules:{code:[{validator:t,trigger:"blur",required:!0}]},writeOffFrom:{code:"",confirm:0},modals2:!1,timeVal:[],options:k["a"],payList:[{label:"全部",val:""},{label:"微信支付",val:"1"},{label:"支付宝支付",val:"4"},{label:"余额支付",val:"2"},{label:"线下支付",val:"3"}],manualModal:!1,uploadAction:"".concat(x["a"].apiBaseURL,"/file/upload/1"),uploadHeaders:{},file:"",autoModal:!1,isShow:!1,recordModal:!1,sendOutValue:"",exportListOn:0,fileList:[]}},computed:$({},Object(d["e"])("admin/layout",["isMobile"]),{},Object(d["e"])("admin/order",["orderChartType","isDels","delIdList"]),{labelWidth:function(){return this.isMobile?void 0:96},labelPosition:function(){return this.isMobile?"top":"right"},today:function(){var t=new Date,e=new Date,a=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),r=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();return[a,r]}}),watch:{$route:function(){"/admin/order/list?status=1"===this.$route.fullPath&&this.getPath()}},created:function(){"/admin/order/list?status=1"===this.$route.fullPath&&this.getPath(),this.$parent.$emit("add")},methods:$({},Object(d["d"])("admin/order",["getOrderStatus","getOrderType","getOrderTime","getOrderNum","getfieldKey"]),{getPath:function(){this.orderData.status=this.$route.query.status.toString(),this.getOrderStatus(this.orderData.status),this.$emit("getList",1),this.$emit("order-data",this.orderData)},onchangeTime:function(t){"00:00:00"===t[1].slice(-8)?(t[1]=t[1].slice(0,-8)+"23:59:59",this.timeVal=t):this.timeVal=t,this.orderData.data=this.timeVal[0]?this.timeVal.join("-"):"",this.getOrderTime(this.orderData.data),this.$emit("getList",1),this.$emit("order-data",this.orderData)},selectChange:function(t){this.$store.dispatch("admin/order/getOrderTabs",{data:t}),this.orderData.data=t,this.getOrderTime(this.orderData.data),this.timeVal=[],this.$emit("getList"),this.$emit("order-data",this.orderData)},selectChange2:function(t){this.getOrderStatus(t),this.$emit("getList",1)},userSearchs:function(t){this.getOrderType(t),this.$emit("getList",1)},timeChange:function(t){this.getOrderTime(t),this.$emit("getList")},orderSearch:function(t){this.getOrderNum(t),this.getfieldKey(this.orderData.field_key),this.$emit("getList",1)},onClickTab:function(){this.$emit("onChangeType",this.currentTab)},delAll:function(){var t=this;if(0===this.delIdList.length)this.$Message.error("请先选择删除的订单！");else if(this.isDels){this.delIdList.filter((function(e){t.isDelIdList.push(e.id)}));var e={ids:this.isDelIdList,all:this.isAll,where:this.orderData},a={title:"删除订单",url:"/order/dels",method:"post",ids:e};this.$modalSure(a).then((function(e){t.$Message.success(e.msg),t.tabList()})).catch((function(e){t.$Message.error(e.msg)}))}else{var r="错误！",s="<p>您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！</p>";this.$Modal.error({title:r,content:s})}},handleSubmit:function(){this.$emit("on-submit",this.data)},Refresh:function(){this.$emit("getList")},handleReset:function(){this.$refs.form.resetFields(),this.$emit("on-reset")},queuemModal:function(){this.$refs.queue.modal=!0}})},T=M,L=(a("ad6f"),Object(b["a"])(T,l,c,!1,null,"fb2f278a",null)),F=L.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"new_tab"},[a("Tabs",{on:{"on-click":t.onClickTab},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("TabPane",{attrs:{label:"全部订单（"+(t.tablists.all||0)+"）",name:" "}}),a("TabPane",{attrs:{label:"普通订单 ("+(t.tablists.general||0)+")",name:"0"}}),a("TabPane",{attrs:{label:"拼团订单 ("+(t.tablists.pink||0)+")",name:"3"}}),a("TabPane",{attrs:{label:"秒杀订单 ("+(t.tablists.seckill||0)+")",name:"1"}}),a("TabPane",{attrs:{label:"砍价订单 ("+(t.tablists.bargain||0)+")",name:"2"}}),a("TabPane",{attrs:{label:"预售商品 ("+(t.tablists.presale||0)+")",name:"8"}})],1)],1),a("div",{staticClass:"acea-row row-between"},[a("div",[a("Tooltip",{directives:[{name:"auth",rawName:"v-auth",value:["order-batch-del_orders"],expression:"['order-batch-del_orders']"}],attrs:{content:"本页至少选中一项",disabled:!!t.selectArr.length}},[a("Button",{staticClass:"mr10",attrs:{type:"primary",disabled:!t.selectArr.length},on:{click:t.delAll}},[t._v("批量删除订单")])],1),a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["order-hand-batch_delivery"],expression:"['order-hand-batch_delivery']"}],staticClass:"mr10",attrs:{type:"primary"},on:{click:function(e){t.manualModal=!0}}},[t._v("手动批量发货")]),a("Tooltip",{directives:[{name:"auth",rawName:"v-auth",value:["order-other-batch_delivery"],expression:"['order-other-batch_delivery']"}],attrs:{content:"本页至少选中一项",disabled:!!t.selectArr.length}},[a("Button",{staticClass:"mr10",attrs:{type:"primary",disabled:!t.selectArr.length},on:{click:t.onAuto}},[t._v("自动批量发货")])],1),a("Dropdown",{directives:[{name:"auth",rawName:"v-auth",value:["export-storeOrder"],expression:"['export-storeOrder']"}],staticClass:"mr10",on:{"on-click":t.exports}},[a("Button",{staticStyle:{width:"110px"}},[t._v("\n                "+t._s(t.exportList[t.exportListOn].label)+"\n                "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.exportList,(function(e,r){return a("DropdownItem",{key:r,staticStyle:{"font-size":"12px !important"},attrs:{name:e.name}},[t._v(t._s(e.label))])})),1)],1),a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["order-write"],expression:"['order-write']"}],staticClass:"mr10 greens",attrs:{size:"default"},on:{click:t.writeOff}},[t._v("订单核销")])],1),a("div",{staticClass:"caozuo"},[a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["queue-index"],expression:"['queue-index']"}],staticClass:"mr10",on:{click:t.queuemModal}},[t._v("批量发货记录")]),a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["export-expressList"],expression:"['export-expressList']"}],staticClass:"mr10",on:{click:t.getExpressList}},[t._v("下载物流公司对照表")])],1)]),a("Table",{ref:"table",staticClass:"orderData ivu-mt",attrs:{columns:t.columns,data:t.orderList,"highlight-row":"","no-data-text":"暂无数据","no-filtered-data-text":"暂无筛选结果"},on:{"on-selection-change":t.onSelectTab,"on-select-all":t.selectAll,"on-select-all-cancel":t.selectAll,"on-select-cancel":t.onSelectCancel},scopedSlots:t._u([{key:"order_id",fn:function(e){var r=e.row;return[1===r.is_del&&null==r.delete_time?a("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600,content:"用户已删除"}},[a("span",{staticStyle:{color:"#ed4014",display:"block"}},[t._v(t._s(r.order_id))])]):a("span",{staticStyle:{color:"#2D8cF0",display:"block",cursor:"pointer"},on:{click:function(e){return t.changeMenu(r,"2")}}},[t._v(t._s(r.order_id))])]}},{key:"nickname",fn:function(e){var r=e.row;return[a("a",{on:{click:function(e){return t.showUserInfo(r)}}},[t._v(t._s(r.nickname))]),null!=r.delete_time?a("span",{staticStyle:{color:"#ed4014"}},[t._v(" (已注销)")]):t._e()]}},{key:"pay_type_name",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(r.pay_type_name))])]}},{key:"info",fn:function(e){var r=e.row;return[a("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600}},[t._l(r._info,(function(e,r){return a("div",{key:r,staticClass:"tabBox"},[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.image:e.cart_info.productInfo.image,expression:"\n                  val.cart_info.productInfo.attrInfo\n                    ? val.cart_info.productInfo.attrInfo.image\n                    : val.cart_info.productInfo.image\n                "}]})]),a("span",{staticClass:"tabBox_tit line1"},[e.cart_info.is_gift?a("span",{staticClass:"font-color-red"},[t._v("赠品")]):t._e(),t._v("\n              "+t._s(e.cart_info.productInfo.store_name+" | ")+"\n              "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:"")+"\n            ")])])})),a("div",{attrs:{slot:"content"},slot:"content"},t._l(r._info,(function(e,r){return a("div",{key:r},[e.cart_info.is_gift?a("p",{staticClass:"font-color-red"},[t._v("赠品")]):t._e(),a("p",[t._v(t._s(e.cart_info.productInfo.store_name))]),a("p",[t._v(" "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:""))]),a("p",{staticClass:"tabBox_pice"},[t._v(t._s("￥"+e.cart_info.sum_price+" x "+e.cart_info.cart_num))])])})),0)],2)]}},{key:"statusName",fn:function(e){var r=e.row;return[a("Tag",{directives:[{name:"show",rawName:"v-show",value:3==r.status,expression:"row.status == 3"}],attrs:{color:"default",size:"medium"}},[t._v(t._s(r.status_name.status_name))]),a("Tag",{directives:[{name:"show",rawName:"v-show",value:1==r.status||2==r.status,expression:"row.status == 1 || row.status == 2"}],attrs:{color:"orange",size:"medium"}},[t._v(t._s(r.status_name.status_name))]),a("Tag",{directives:[{name:"show",rawName:"v-show",value:0==r.status,expression:"row.status == 0"}],attrs:{color:"red",size:"medium"}},[t._v(t._s(r.status_name.status_name))]),!r.is_all_refund&&r.refund.length?a("Tag",{attrs:{color:"orange",size:"medium"}},[t._v("部分退款中")]):t._e(),r.is_all_refund&&r.refund.length&&6!=r.refund_type?a("Tag",{attrs:{color:"orange",size:"medium"}},[t._v("退款中")]):t._e(),r.status_name.pics?a("div",{staticClass:"pictrue-box",attrs:{size:"medium"}},t._l(r.status_name.pics||[],(function(t,e){return a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item"}],staticClass:"pictrue mr10",attrs:{src:t}})])})),0):t._e()]}},{key:"pay_price",fn:function(e){var a=e.row;return[t._v("\n\t\t\t\t"+t._s(a.paid>0?a.pay_price:0)+"\n\t\t\t")]}},{key:"action",fn:function(e){var r=e.row;return[2!=r._status||null!=r.delete_time||r.split.length?t._e():a("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.distribution(r)}}},[t._v("分配")]),2!==r._status||null!=r.delete_time||r.split.length?t._e():a("Divider",{attrs:{type:"vertical"}}),2!==r._status&&8!==r._status&&4!==r.status||1!==r.shipping_type||null!==r.pinkStatus&&2!==r.pinkStatus||null!=r.delete_time?t._e():a("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.sendOrder(r)}}},[t._v("发送货")]),2!==r._status&&8!==r._status&&4!==r.status||1!==r.shipping_type||null!==r.pinkStatus&&2!==r.pinkStatus||null!=r.delete_time?t._e():a("Divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.changeMenu(r,"2")}}},[t._v("详情")])]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:t.page.total,current:t.page.pageNum,"show-elevator":"","show-total":"","page-size":t.page.pageSize,"show-sizer":""},on:{"on-change":t.pageChange,"on-page-size-change":t.limitChange}})],1),a("Distribution",{ref:"distshow"}),a("edit-from",{ref:"edits",attrs:{FromData:t.FromData},on:{submitFail:t.submitFail}}),a("user-details",{ref:"userDetails",attrs:{fromType:"order"}}),a("details-from",{ref:"detailss",attrs:{orderDatalist:t.orderDatalist,orderId:t.orderId,"row-active":t.rowActive,openErp:t.openErp,formType:1}}),a("order-remark",{ref:"remarks",attrs:{orderId:t.orderId},on:{submitFail:t.submitFail}}),a("order-record",{ref:"record"}),a("order-send",{ref:"send",attrs:{orderId:t.orderId,status:t.status,pay_type:t.pay_type},on:{submitFail:function(e){return t.submitFail(1)}}}),a("Modal",{attrs:{title:"手动批量发货","class-name":"vertical-center-modal"},on:{"on-ok":t.manualModalOk,"on-cancel":t.manualModalCancel},model:{value:t.manualModal,callback:function(e){t.manualModal=e},expression:"manualModal"}},[a("Row",{attrs:{type:"flex"}},[a("Col",{attrs:{span:"4"}},[a("div",{staticStyle:{"line-height":"32px","text-align":"right"}},[t._v("文件：")])]),a("Col",{attrs:{span:"20"}},[a("Upload",{ref:"upload",attrs:{action:t.uploadAction,headers:t.uploadHeaders,accept:".xlsx,.xls",format:["xlsx","xls"],disabled:!!t.fileList.length,"on-success":t.uploadSuccess,"on-remove":t.removeFile}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传文件")])],1)],1)],1)],1),a("Modal",{staticClass:"paymentFooter",attrs:{title:"订单核销",scrollable:"",width:"400","class-name":"vertical-center-modal"},model:{value:t.modals2,callback:function(e){t.modals2=e},expression:"modals2"}},[a("Form",{ref:"writeOffFrom",staticClass:"tabform",attrs:{model:t.writeOffFrom,rules:t.writeOffRules,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{prop:"code","label-for":"code"}},[a("Input",{staticStyle:{width:"100%"},attrs:{search:"","enter-button":"验证",type:"text",placeholder:"请输入12位核销码",number:""},on:{"on-search":function(e){return t.search("writeOffFrom")}},model:{value:t.writeOffFrom.code,callback:function(e){t.$set(t.writeOffFrom,"code",t._n(e))},expression:"writeOffFrom.code"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("立即核销")]),a("Button",{on:{click:function(e){return t.del("writeOffFrom")}}},[t._v("取消")])],1)],1),a("auto-send",{ref:"sends",attrs:{selectArr:t.selectArr}}),a("queue-list",{ref:"queue"})],1)},A=[],P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"请选择门店",width:"850"},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[a("div",{staticClass:"table"},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":100},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"用户名称："}},[a("Input",{staticStyle:{width:"300px"},attrs:{search:"","enter-button":"",placeholder:"请输入用户名称/电话/地址"},on:{"on-search":t.userSearchs},model:{value:t.formValidate.keywords,callback:function(e){t.$set(t.formValidate,"keywords",e)},expression:"formValidate.keywords"}})],1)],1),a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:t.columns,data:t.orderList,loading:t.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:t._u([{key:"image",fn:function(t){var e=t.row;t.index;return[a("img",{attrs:{src:e.image}})]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:t.total,current:t.formValidate.page,"show-elevator":"","show-total":"","page-size":t.formValidate.limit},on:{"on-change":t.pageChange}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"})])},E=[],N=a("73f5"),V={name:"distshow",data:function(){var t=this;return{id:0,currentid:0,modals:!1,loading:!1,orderList:[],total:0,formValidate:{page:1,limit:15,keywords:"",id:0},columns:[{title:"选择",width:60,align:"center",render:function(e,a){var r=a.row.id,s=!1;s=t.currentid===r;var i=t;return e("div",[e("Radio",{props:{value:s},on:{"on-change":function(){i.currentid=r,Object(N["H"])({oid:t.id,store_id:a.row.id}).then((function(e){t.$Message.success(e.msg),t.modals=!1,i.currentid=0,t.$parent.getList(),t.$parent.closeDetail()})).catch((function(e){t.modals=!1,t.$Message.error(e.msg),i.currentid=0}))}}})])}},{title:"ID",key:"id",minWidth:50},{title:"门店图片",slot:"image",minWidth:80},{title:"门店名称",key:"name",minWidth:80},{title:"联系电话",key:"phone",minWidth:80},{title:"门店地址",key:"address",ellipsis:!0,minWidth:150},{title:"营业时间",key:"day_time",minWidth:120},{title:"营业状态",key:"status_name",minWidth:80}]}},props:{},mounted:function(){},methods:{userSearchs:function(){this.formValidate.page=1,this.getList(this.id)},getList:function(t){var e=this;this.id=t,this.formValidate.id=t,this.loading=!0,Object(N["E"])(this.formValidate).then((function(t){e.orderList=t.data.list,e.total=t.data.count,e.loading=!1}))},cancel:function(t){this.modals=!1},putRemark:function(){},pageChange:function(t){this.formValidate.page=t,this.getList(this.id)}}},B=V,R=(a("dfcb"),Object(b["a"])(B,P,E,!1,null,"55471d9e",null)),z=R.exports,W=a("a464"),q=a("0fc4"),G=a("31b4"),Q=a("fc48"),H=a("61f8"),Y=a("417c"),U=a("d616"),J=a("a716"),K=a("2e83");function Z(t,e,a,r,s,i,n){try{var o=t[i](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,s)}function X(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var i=t.apply(e,a);function n(t){Z(i,r,s,n,o,"next",t)}function o(t){Z(i,r,s,n,o,"throw",t)}n(void 0)}))}}function tt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function et(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?tt(a,!0).forEach((function(e){at(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function at(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var rt={name:"table_list",components:{expandRow:W["a"],editFrom:G["a"],detailsFrom:Q["a"],orderRemark:H["a"],orderRecord:Y["a"],orderSend:U["a"],userDetails:J["a"],Distribution:z,autoSend:I,queueList:D["default"]},props:["where","isAll"],data:function(){var t,e=function(t,e,a){if(!e)return a(new Error("请填写核销码"));if(Number.isInteger(e)){var r=/\b\d{12}\b/;r.test(e)?a():a(new Error("请填写12位数字"))}else a(new Error("请填写12位数字"))};return t={openErp:!1,currentTab:"",distshow:!1,delfromData:{},modal:!1,orderList:[],pay_type:"",orderCards:[],loading:!1,orderId:0,columns:[{type:"expand",width:30,render:function(t,e){return t(W["a"],{props:{row:e.row}})}},{type:"selection",width:60,align:"center"},{title:"订单号",slot:"order_id",minWidth:150},{title:"订单类型",key:"pink_name",minWidth:110},{title:"用户信息",slot:"nickname",minWidth:130},{title:"商品信息",slot:"info",minWidth:330},{title:"实际支付",slot:"pay_price",minWidth:70},{title:"支付时间",key:"_pay_time",minWidth:130},{title:"支付类型",key:"pay_type_name",minWidth:100},{title:"订单状态",slot:"statusName",minWidth:100},{title:"操作",slot:"action",fixed:"right",minWidth:140,align:"left"}],page:{total:0,pageNum:1,pageSize:10},data:[],FromData:null,orderDatalist:null,modalTitleSs:"",isDelIdList:[],checkBox:!1,formSelection:[],selectionCopy:[],display:"none",autoDisabled:!1,status:0,rowActive:{},tablists:{},selectArr:[],exportList:[{name:"1",label:"导出发货单"},{name:"0",label:"导出订单"}],exportListOn:0,manualModal:!1,uploadAction:"".concat(x["a"].apiBaseURL,"/file/upload/1"),uploadHeaders:{},file:"",autoModal:!1,isShow:!1,recordModal:!1,sendOutValue:"",fileList:[]},at(t,"file",""),at(t,"orderData",{status:"",data:"",real_name:"",field_key:"all",pay_type:""}),at(t,"modals2",!1),at(t,"writeOffRules",{code:[{validator:e,trigger:"blur",required:!0}]}),at(t,"writeOffFrom",{code:"",confirm:0}),at(t,"orderConNum",0),at(t,"orderConId",0),t},computed:et({},Object(d["e"])("admin/layout",["isMobile"]),{},Object(d["e"])("admin/order",["orderPayType","orderStatus","orderTime","orderNum","fieldKey","orderType"]),{labelWidth:function(){return this.isMobile?void 0:96},labelPosition:function(){return this.isMobile?"top":"right"}}),mounted:function(){},created:function(){this.getList(),this.getToken(),this.getErpConfig()},watch:{orderType:function(){this.page.pageNum=1,this.getList()},formSelection:function(t){this.$emit("order-select",t),t.length?this.$emit("auto-disabled",0):this.$emit("auto-disabled",1);var e=t.some((function(t){return 1===t.is_del}));this.getIsDel(e),this.getisDelIdListl(t)},orderList:{deep:!0,handler:function(t){var e=this;t.forEach((function(t){e.formSelection.forEach((function(e){e.id===t.id&&(t.checkBox=!0)}))}));var a=this.orderList.filter((function(t){return t.checkBox}));this.orderList.length?this.checkBox=this.orderList.length===a.length:this.checkBox=!1}}},methods:et({},Object(d["d"])("admin/order",["getIsDel","getisDelIdListl","onChangeTabs"]),{getErpConfig:function(){var t=this;Object(q["a"])().then((function(e){t.openErp=e.data.open_erp})).catch((function(e){t.$Message.error(e.msg)}))},delAll:function(){var t=this;if(0===this.selectArr.length)this.$Message.error("请先选择删除的订单！");else{var e=[];this.selectArr.filter((function(t){e.push(t.id)}));var a={ids:e},r={title:"删除订单",url:"/order/dels",method:"post",ids:a};this.$modalSure(r).then((function(e){t.$Message.success(e.msg),t.selectArr=[],t.getList()})).catch((function(e){t.$Message.error(e.msg)}))}},onAuto:function(){this.$refs.sends.modals=!0,this.$refs.sends.getList(),this.$refs.sends.getDeliveryList()},queuemModal:function(){this.$refs.queue.modal=!0},getExpressList:function(){var t=X(h.a.mark((function t(){var e,a,r,s,i;return h.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],a=[],r=[],s="",t.next=3,this.getExcelData();case 3:i=t.sent,s||(s=i.filename),a.length||(a=i.filekey),e.length||(e=i.header),r=i.export,Object(K["a"])(e,a,s,r);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getExcelData:function(){return new Promise((function(t,e){Object(u["d"])().then((function(e){return t(e.data)}))}))},writeOff:function(){this.modals2=!0},search:function(t){var e=this;this.$refs[t].validate((function(t){t?(e.writeOffFrom.confirm=0,Object(u["J"])(e.writeOffFrom).then(function(){var t=X(h.a.mark((function t(a){return h.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:200===a.status?e.$Message.success(a.msg):e.$Message.error(a.msg);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))):e.$Message.error("请填写正确的核销码")}))},ok:function(){var t=this;this.writeOffFrom.code?(this.writeOffFrom.confirm=1,Object(u["J"])(this.writeOffFrom).then(function(){var e=X(h.a.mark((function e(a){return h.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:200===a.status?(t.$Message.success(a.msg),t.modals2=!1,t.$refs[name].resetFields(),t.$emit("getList")):t.$Message.error(a.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))):this.$Message.warning("请先验证订单！")},del:function(t){this.modals2=!1,this.writeOffFrom.confirm=0,this.$refs[t].resetFields()},getToken:function(){this.uploadHeaders["Authori-zation"]="Bearer "+C["a"].cookies.get("token")},uploadSuccess:function(t,e,a){200===t.status?(this.$Message.success(t.msg),this.file=t.data.src,this.fileList=a):this.$Message.error(t.msg)},removeFile:function(t,e){this.file="",this.fileList=e},manualModalOk:function(){var t=this;this.$refs.upload.clearFiles(),Object(u["q"])({file:this.file}).then((function(e){t.$Message.success(e.msg),t.fileList=[]})).catch((function(e){t.$Message.error(e.msg),t.fileList=[]}))},manualModalCancel:function(){this.fileList=[],this.$refs.upload.clearFiles()},getTabs:function(){var t=this;this.spinShow=!0,this.$store.dispatch("admin/order/getOrderTabs",{status:this.orderStatus,pay_type:this.orderPayType,data:this.orderTime,real_name:this.orderNum,field_key:this.fieldKey}).then((function(e){t.tablists=e.data,t.spinShow=!1})).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))},selectAll:function(t){console.log("全选",t),this.selectArr=t},onSelectTab:function(t){this.selectArr=t},onClickTab:function(){this.$store.dispatch("admin/order/getOrderTabs",{type:this.currentTab}),this.getList()},closeDetail:function(){this.$refs.detailss.modals=!1},distribution:function(t){this.$refs.distshow.modals=!0,this.$refs.distshow.formValidate.keywords="",this.$refs.distshow.getList(t.id)},showUserInfo:function(t){this.$refs.userDetails.modals=!0,this.$refs.userDetails.activeName="info",this.$refs.userDetails.getDetails(t.uid)},changeMenu:function(t,e,a){var r=this;switch(this.orderId=t.id,this.orderConId=t.pid,this.orderConNum=a,e){case"1":this.delfromData={title:"修改立即支付",url:"/order/pay_offline/".concat(t.id),method:"post",ids:""},this.$modalSure(this.delfromData).then((function(e){r.$Message.success(e.msg),r.$emit("changeGetTabs"),r.getData(t.id,1),r.getList()})).catch((function(t){r.$Message.error(t.msg)}));break;case"2":this.rowActive=t,this.getData(t.id);break;case"3":this.$refs.record.modals=!0,this.$refs.record.getList(t.id);break;case"4":this.$refs.remarks.formValidate.remark=t.remark,this.$refs.remarks.modals=!0;break;case"5":this.getOnlyRefundData(t.id,t.refund_type);break;case"55":this.getRefundData(t.id,t.refund_type);break;case"6":this.getRefundIntegral(t.id);break;case"7":this.getNoRefundData(t.id);break;case"8":this.delfromData={title:"修改确认收货",url:"/order/take/".concat(t.id),method:"put",ids:""},this.$modalSure(this.delfromData).then((function(e){r.$Message.success(e.msg),r.$emit("changeGetTabs"),r.getList(),a?r.$refs.detailss.getSplitOrder(t.pid):r.getData(t.id,1)})).catch((function(t){r.$Message.error(t.msg)}));break;case"10":this.delfromData={title:"立即打印订单",info:"您确认打印此订单吗?",url:"/order/print/".concat(t.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.$emit("changeGetTabs"),r.getList()})).catch((function(t){r.$Message.error(t.msg)}));break;case"11":this.delfromData={title:"立即打印电子面单",info:"您确认打印此电子面单吗?",url:"/order/order_dump/".concat(t.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.getList()})).catch((function(t){r.$Message.error(t.msg)}));break;default:this.delfromData={title:"删除订单",url:"/order/del/".concat(t.id),method:"DELETE",ids:""},this.delOrder(t,this.delfromData)}},submitModel:function(){this.getList()},pageChange:function(t){this.page.pageNum=t,this.getList()},limitChange:function(t){this.page.pageSize=t,this.getList()},getList:function(t){var e=this;this.page.pageNum=1===t?1:this.page.pageNum,this.loading=!0,Object(u["A"])({page:this.page.pageNum,limit:this.page.pageSize,status:this.orderStatus,pay_type:this.orderPayType,data:this.orderTime,real_name:this.orderNum,field_key:this.fieldKey,type:this.currentTab}).then(function(){var t=X(h.a.mark((function t(a){var r;return h.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=a.data,r.data.forEach((function(t){t.id==e.orderId&&(e.rowActive=t)})),e.$set(e,"orderList",r.data),e.orderCards=r.stat,e.page.total=r.count,e.$emit("on-changeCards",r.stat),e.loading=!1,e.getTabs();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},edit:function(t){console.log(t),this.getOrderData(t.id)},splitOrderDetail:function(t){this.$router.push({path:"split_list",query:{id:t.id,orderChartType:this.orderStatus}})},delOrder:function(t,e){var a=this;if(1===t.is_del)this.$modalSure(e).then((function(t){a.$Message.success(t.msg),a.getList(),a.$refs.detailss.modals=!1,a.$emit("changeGetTabs")})).catch((function(t){a.$Message.error(t.msg)}));else{var r="错误！",s="<p>您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！</p>";this.$Modal.error({title:r,content:s})}},getOrderData:function(t){var e=this;Object(u["j"])(t).then(function(){var t=X(h.a.mark((function t(a){return h.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==a.data.status){t.next=2;break}return t.abrupt("return",e.$authLapse(a.data));case 2:e.$authLapse(a.data),e.FromData=a.data,e.$refs.edits.modals=!0;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},getData:function(t,e){var a=this;Object(u["f"])(t).then(function(){var t=X(h.a.mark((function t(r){return h.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e||(a.$refs.detailss.modals=!0),a.$refs.detailss.activeName="detail",a.orderDatalist=r.data,a.orderDatalist.orderInfo.refund_reason_wap_img)try{a.orderDatalist.orderInfo.refund_reason_wap_img=JSON.parse(a.orderDatalist.orderInfo.refund_reason_wap_img)}catch(s){a.orderDatalist.orderInfo.refund_reason_wap_img=[]}case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){a.$Message.error(t.msg)}))},submitFail:function(t){this.status=0,this.getList(),1!=this.orderConNum?this.getData(this.orderId,1):this.$refs.detailss.getSplitOrder(this.orderConId),t&&this.$emit("changeGetTabs")},getOnlyRefundData:function(t,e){var a=this;this.$modalForm(Object(u["n"])(t)).then((function(){a.getList(),a.$emit("changeGetTabs"),a.$refs.detailss.modals=!1}))},getRefundData:function(t,e){var a=this;this.delfromData={title:"是否立即退货退款",url:"/refund/agree/".concat(t),method:"get"},this.$modalSure(this.delfromData).then((function(t){a.$Message.success(t.msg),a.getList(),a.$emit("changeGetTabs")})).catch((function(t){a.$Message.error(t.msg)}))},getRefundIntegral:function(t){var e=this;Object(u["N"])(t).then(function(){var t=X(h.a.mark((function t(a){return h.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.FromData=a.data,e.$refs.edits.modals=!0;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},getNoRefundData:function(t){var e=this;this.$modalForm(Object(u["p"])(t)).then((function(){e.getList(),e.$emit("changeGetTabs")}))},sendOrder:function(t,e){var a=this;this.orderConId=t.pid,this.orderConNum=e,this.$store.commit("admin/order/setSplitOrder",t.total_num),this.$refs.send.modals=!0,this.orderId=t.id,this.status=t._status,this.pay_type=t.pay_type,this.$refs.send.getList(),this.$refs.send.getDeliveryList(),this.$nextTick((function(e){a.$refs.send.getCartInfo(t._status,t.id)}))},delivery:function(t,e){var a=this;Object(u["g"])(t.id).then(function(){var r=X(h.a.mark((function r(s){return h.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.orderConNum=e,a.orderConId=t.pid,a.FromData=s.data,a.$refs.edits.modals=!0,1!=e&&a.getData(a.orderId,1);case 5:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()).catch((function(t){a.$Message.error(t.msg)}))},change:function(t){},exports:function(){var t=X(h.a.mark((function t(e){var a,r,s,i,n,o,l,c;return h.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.exportListOn=this.exportList.findIndex((function(t){return t.name===e})),a=[],r=[],s=[],i="",n=JSON.parse(JSON.stringify(this.orderData)),n.page=1,n.type=e,o=[],this.selectArr.filter((function(t){o.push(t.id)})),n.ids=o.join(","),l=0;case 9:if(!(l<n.page+1)){t.next=26;break}return t.next=12,this.downOrderData(n);case 12:if(c=t.sent,i||(i=c.filename),r.length||(r=c.filekey),a.length||(a=c.header),!c.export.length){t.next=21;break}s=s.concat(c.export),n.page++,t.next=23;break;case 21:return Object(K["a"])(a,r,i,s),t.abrupt("return");case 23:l++,t.next=9;break;case 26:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),downOrderData:function(t){return new Promise((function(e,a){Object(u["U"])(t).then((function(t){return e(t.data)}))}))},bindWrite:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确定要核销该订单吗？",cancelText:"取消",closable:!0,maskClosable:!0,onOk:function(){Object(u["V"])(t.order_id).then((function(t){e.$Message.success(t.msg),e.getList()}))},onCancel:function(){}})},onSelectCancel:function(t,e){}})},st=rt,it=(a("1ea9"),Object(b["a"])(st,j,A,!1,null,"e03efdca",null)),nt=it.exports,ot={name:"orderlistDetails",components:{tableForm:F,tableList:nt,cardsData:o["a"]},data:function(){return{currentTab:"",cardLists:[],selection:[],orderData:{status:"",data:"",real_name:"",field_key:"all",pay_type:""},autoDisabled:!0,isAll:-1}},methods:{changeGetTabs:function(){this.$parent.getTabs()},getChangeTabs:function(t){this.$refs.table.getList()},getData:function(t){this.$refs.table&&(this.$refs.table.checkBox=!1,this.$refs.table.getList(t))},getCards:function(t){this.cardLists=t},handleResize:function(){this.$refs.ellipsis.forEach((function(t){return t.init()}))},orderSelect:function(t){this.selection=t},onOrderData:function(t){this.orderData=t},orderDatas:function(t){this.orderData=t},onAutoDisabled:function(t){this.autoDisabled=!!t},onAll:function(t){this.isAll=t}},mounted:function(){}},lt=ot,ct=(a("0a44"),Object(b["a"])(lt,i,n,!1,null,"e9b86a7a",null)),dt=ct.exports;function ut(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function mt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ut(a,!0).forEach((function(e){ft(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ut(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function ft(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var pt={name:"list",components:{productlistDetails:dt},data:function(){return{spinShow:!1,currentTab:"",data:[],tablists:null}},created:function(){this.getOrderType(""),this.getOrderStatus(""),this.getOrderTime(""),this.getOrderNum(""),this.getfieldKey(""),this.onChangeTabs("")},beforeDestroy:function(){this.getOrderType(""),this.getOrderStatus(""),this.getOrderTime(""),this.getOrderNum(""),this.getfieldKey(""),this.onChangeTabs("")},mounted:function(){},methods:mt({},Object(d["d"])("admin/order",["getOrderStatus","getOrderTime","getOrderNum","getfieldKey","onChangeTabs","getOrderType"]))},ht=pt,vt=(a("0567"),Object(b["a"])(ht,r,s,!1,null,"0e085e5a",null));e["default"]=vt.exports},"61f8":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"备注",closable:!1},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"备注：",prop:"remark"}},[a("Input",{staticStyle:{width:"100%"},attrs:{maxlength:"200","show-word-limit":"",type:"textarea",placeholder:"订单备注"},model:{value:t.formValidate.remark,callback:function(e){t.$set(t.formValidate,"remark",e)},expression:"formValidate.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.putRemark("formValidate")}}},[t._v("提交")]),a("Button",{on:{click:function(e){return t.cancel("formValidate")}}},[t._v("取消")])],1)],1)},s=[],i=a("a34a"),n=a.n(i),o=a("f8b7");function l(t,e,a,r,s,i,n){try{var o=t[i](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,s)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var i=t.apply(e,a);function n(t){l(i,r,s,n,o,"next",t)}function o(t){l(i,r,s,n,o,"throw",t)}n(void 0)}))}}var d={name:"orderMark",props:{orderId:Number,remarkType:{default:"",type:String}},data:function(){return{formValidate:{remark:""},modals:!1,ruleValidate:{remark:[{required:!0,message:"请输入备注信息",trigger:"blur"}]}}},methods:{cancel:function(t){this.modals=!1,this.$refs[t].resetFields()},putRemark:function(t){var e=this,a={id:this.orderId,remark:this.formValidate};this.$refs[t].validate((function(r){r?(e.remarkType?o["H"]:o["I"])(a).then(function(){var a=c(n.a.mark((function a(r){return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$Message.success(r.msg),e.modals=!1,e.$refs[t].resetFields(),e.$emit("submitFail");case 4:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)})):e.$Message.warning("请填写备注信息")}))}}},u=d,m=a("2877"),f=Object(m["a"])(u,r,s,!1,null,"11df61c1",null);e["a"]=f.exports},6769:function(t,e,a){},7896:function(t,e,a){"use strict";var r=a("a1eb"),s=a.n(r);s.a},"7d24":function(t,e,a){"use strict";var r=a("d8ff"),s=a.n(r);s.a},"94dd":function(t,e,a){"use strict";var r=a("0e64"),s=a.n(r);s.a},"9a6c":function(t,e,a){"use strict";var r=a("14e3"),s=a.n(r);s.a},a1eb:function(t,e,a){},a464:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tdinfo"},[a("Row",{staticClass:"expand-row"},[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("商品总价：")]),a("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.total_price)}})]),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("下单时间：")]),a("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.add_time)}})]),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("推广人：")]),a("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.spread_nickname?t.row.spread_nickname:"无")}})])],1),a("Row",[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("用户备注：")]),a("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.mark?t.row.mark:"无")}})]),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("商家备注：")]),a("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.remark?t.row.remark:"无")}})])],1)],1)},s=[],i={name:"table-expand",props:{row:Object}},n=i,o=(a("7896"),a("2877")),l=Object(o["a"])(n,r,s,!1,null,"020d05aa",null);e["a"]=l.exports},a584:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"ivu-mt",attrs:{type:"flex",align:"middle",gutter:16}},t._l(t.cardLists,(function(e,r){return a("Col",{key:r,staticClass:"ivu-mb",attrs:{xl:e.col,lg:6,md:12,sm:24,xs:24}},[a("Card",{staticClass:"card_cent",attrs:{shadow:"",padding:0}},[a("div",{staticClass:"card_box"},[a("div",{staticClass:"card_box_cir",class:{one:r%5==0,two:r%5==1,three:r%5==2,four:r%5==3,five:r%5==4}},[a("div",{staticClass:"card_box_cir1",class:{one1:r%5==0,two1:r%5==1,three1:r%5==2,four1:r%5==3,five1:r%5==4}},[e.type?a("span",{staticClass:"iconfont",class:e.className}):a("Icon",{attrs:{type:e.className}})],1)]),a("div",{staticClass:"card_box_txt"},[a("span",{staticClass:"sp1",domProps:{textContent:t._s(e.count||0)}}),a("span",{staticClass:"sp2",domProps:{textContent:t._s(e.name)}})])])])],1)})),1)],1)},s=[],i={name:"cards",data:function(){return{}},props:{cardLists:Array},methods:{},created:function(){}},n=i,o=(a("94dd"),a("2877")),l=Object(o["a"])(n,r,s,!1,null,"286c7c6e",null);e["a"]=l.exports},ad6f:function(t,e,a){"use strict";var r=a("6769"),s=a.n(r);s.a},b35b:function(t,e,a){"use strict";var r=a("54fe"),s=a.n(r);s.a},bd9b:function(t,e){t.exports="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAKEUlEQVR4nO2de3AV1R3HP3uS8EhCkCSAQCLgRZ6RV7Hgo47hpVNgpp3+UZ2llpbOFIUqdWzR6UzpdOqMqFNHq4KMDzp6a/tHO50B2goIVqmCVV4KymMFTAiPJghXbohJ2O0fZwOX5Jy9e+/dzb0hfGYy9ybn7Hl8c3bPOb9zzm+NeDxOtohERTkwCRgFjHY/hwBlQCFQDDQD54Az7ucpYD/wmfu50zLt+k4vvIvRmQJGoqIQmAFMB6qB8YCRYbIOsAfYAmwG3rJMuzHDNH0TuoCRqBDALGABMA8oCjVDiANrgTXARsu07TAzC03ASFQUAz8BHgSGhZJJco4AzwAvWaZ9LowMAhcwEhW9gSXAL4HyQBNPn3rgSeAPlmmfDzLhQAWMRMXdwArgusASDZYvgGWWaf85qAQDETASFUOBVcBdKV9bAlWlDpG+MLwEhvVxKOsJRQVQXCDjnGuBeCs0NMGRrwwOx8A6C3u/NDh0Nq0ivwn81DLto2ldnUDGAkaiYj7wPFDiJ36vPKge4jCrEm671qGsV0bZ09AEW08YbKyBLccMmi74vjQGLLZM+/VM8k9bwEhU9EIK92M/8atKYf5IhzlDHQrz08oyKY2tsP6owesHDD457fuyV4H7LdNuSifPtASMRMUA4O/Azcni3jQAlo53mDbQSaN46bPtpMEzeww+OOUr+vvAdyzT9hc7gZQFjETFcGAjEPGKV1kMv57iMH1I5wrXns3HDH77oUFN8kGMBcyyTPtwKumnJGAkKsYAm4DBujj5AhaNc7hvnEOvvFSKEh5NF2DlXoNVew1avYfVdcBMy7Q/9Zu2bwEjUTECOV2q0MWpLIanb7WZlCujv3bsqoel/xHJWmMtUG2Z9iE/afoSMBIV/YH3gBG6ODMrHJ682aGkh59ss0esGX7xvsGmWs8p+CHgFsu0/5csPZEsQiQqeiDnllrx7h3lsPL23BcPoKQHrLzd4d5Rns/mEcDaSFT0TJZeUgGBF4CpqgADeGiCw/IpDiJTm0onIgxYPsXhoQmeIk5FDtO80/IKdAfJC3XhD090WFyV3V42ExZXOTw80bP8C10NtGgFdKdn2v+AeYPDonFdV7w27hvnYN7gWY/nXS2UeLXAF9FMz2ZWOCy/qeuL18bymxxmVWrrU4LUQolSQNeqcqcqrKIInrjZIa8LPfOSkWfAimkOFXpT752RqLhHFdBhGOOa3T9FYZIqEPCX2TYTyjIrcK6yqx7u3ihoUQ+2vwDGtF8uUE3rl6Cx591f5fgWL9YCO+ptjjc6ugKFToGAQYUGk8sFJQXJ408sl3V8Zo/y9roOqc0TiX+8rAW6ZvjDKCzJkRJYP8emwMfAJ9YM/6i5QHOWhGtPDwHfrszzNU5tsWHOeoEVUwY3AMMSlwfay/EjNGb4Ryc7vsQD2NFg54x4AM22LJMfCoSsq4YypEYXuSiJu3r2c9VV3xwgjaB+Od6Yez10XQplqh7iMHWANvghVyvg8hY4CxiuuuLB8akJkq1nnhdJrDAdeEBf52HA7LZfEgVcoIo9th+dbgzNBaYNdBjbTxu8oO2LgItDl3mqmPNHdj/x2viB3uAwNxIVRXCpBc5GsWOgdz7MHdp9BZw71KG3ev2mCPnIuyigcjnyjsEORT7GT1cqhflQPVjbgO6CSwJOV8WYobU9dx88NJgOYFy7+vwA4GT7UAPY9j2b8gzWbcv++DUXnOw+AvIMg4YfJrWLaqlvgml/FWhqMTAfmKwKGV5CRuIB9C8KaQG4EynvBdeXoJuZfEMAE1UhE8q6b+fRnvHlWi0mCDRrHaP0Y6Bux+hrtEEjBJrZx/A+YRWn6zFMr8X1As0i+aDCq7dwG4OLtFoMEkCpKqRv+h3XFYeHGaxUAL1VIcVdvwMNDA8tCgWgvMO78wykPR5aFOcjz2F0+p6Ckh4wpwKuKybtBaoLDnxxDtbXSit4NhDAV6qAeEu4Gc+pkD19Jqt7eYZMY15lcOVS4aHFOa2A51rDKo5kSICnRTyWIwMhrteiUStg2LfEsQBPV9SGfNjqrF6L0wJQbuGqi4e7cr6+Fg5/JZ9j6WI7Mo11NcGVS4WHFifykcuYHTiibJfBEWuGNz4PN4+g8NDCEsjNhB347MuwitP12H9GG3RIALtUIbsbrqDNLxmyu16rxR4B7FCFHI5JY2J3p6EJPlfbAgE+FO7ZiA63sQNsPX61FW49Yeis0Qct0z7VtiayWRVjU21IpepCbNL38Jvh0qLSP1Ux3q4zaAx5QJ3LNLbCljrtXfgvuCTgRuRJ78s43wprj3Tf23jdUYPz6gYUR2omBbRMOw6sU8V8/UD3FfC1/dq6r3M1u2xvzBpVzH1fyoN76ZALi3LpngzddtJgn34svKbtS6KAG5A+BjrwrHrHZlKq+mW/9d6YZhk86nwUqRWQIKDr3eL3qiu2n4J/6x+mWhaMzL6A6ZThnTqD7fqDr08negJpv+f0VeQ21g489pGR8r6/6kEGi8ZkT8RFYwyqB6WWf4sNv/tIe00D8HLiHy4T0N37e9km6othMXlkNFWWjhO8cItgan9Dt9MpUHrnw9T+BitvFSwd53NPcgIr9xq6XQgAT7R3n3L1mEMCuxvg+xtSO+bQ4V/kRnhElUKLDQ+8K7K2/hAmsWZZN4/H1KMql1LKNm6Z9htI1yAdqI3Dsm0G9hW07u4g6+Rh2d5gmfafVAFeD4lFSNcgHVOrMfjNf7PfwwbF8g8MNtRo6xNDaqFEK6Bl2keQJ3OURA9KHwRdnVV7DaIHPeuxxMsRhWc3ZZn2a7TrthN5apfB6n1dV8TV+wye3OVZ/ldcDbT46ecXA9tVAQ6wYqfB4zu1NrOcpK3cK3Z6ircdWXdPrjqdUOPb6USqbk/eRrroVFJZDM/eZjM+R8eJHzfAz7YmdXtyDLgjULcnbbiOd94EtJsp8gUsqZLuAPweTgybFlt2Fs99ktTxTg1wZyiOd9qIREUl0ho71iveiL7wq8kOt+vPWXQK79QZPLbDl5u8fcBdlmmntEyfrvOxUqQvmVuSxZ06QB7cy4bzsWf3eFpVEnkPmGeZtn+fby6ZuL/rCTyFx1gxkapSMEc6zA3Z/d26owbR1NzfPQc8bJn21+nkGYQDxu8CrwD6vewJ9M6H6UMcZlTAtwY5lGa4lfj01/DucYO3aqWnNs0ahoozwELLtP+WSf5BugB9EY2nD23mQKQvjC9zGHmNPNBSUeRwTU/oUyDN8a223F4Wa5afx+IGn8fgwBnY02BgnSWdMeibwCJ3tpURQTuhvQd4nNx2QvuIaywJhEAHGm7BRgPLkK6Hc4V6pIludJDiQbiOuPsg/W7lgiPuly3TDmXD3lVX8BmSrZcRzEC+jOBGgnkZwcdI75pvcaW9jMAL10gxCRhJx9dhFHGptcbdnwbkXLXtdRgHkK/DSDrpD4v/AyTig4w83FS9AAAAAElFTkSuQmCC"},d616:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"订单发送货",closable:!1,width:"1000"},on:{"on-visible-change":t.changeModal},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.modals?a("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":100},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"选择类型："}},[a("RadioGroup",{on:{"on-change":t.changeRadio},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[t.productType?t._e():a("Radio",{attrs:{label:"1"}},[t._v("发货")]),t.productType?t._e():a("Radio",{attrs:{label:"2"}},[t._v("送货")]),a("Radio",{attrs:{label:"3"}},[t._v("无需配送")])],1)],1),1==t.formItem.type?a("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.export_open,expression:"export_open"}],attrs:{label:"发货类型："}},[a("RadioGroup",{on:{"on-change":t.changeExpress},model:{value:t.formItem.express_record_type,callback:function(e){t.$set(t.formItem,"express_record_type",e)},expression:"formItem.express_record_type"}},[a("Radio",{attrs:{label:"1"}},[t._v("手动填写")]),a("Radio",{attrs:{label:"2"}},[t._v("电子面单打印")])],1)],1):t._e(),a("div",[1==t.formItem.type?a("FormItem",{attrs:{label:"快递公司：",required:""}},[a("Select",{staticStyle:{width:"80%"},attrs:{filterable:"",placeholder:"请选择快递公司"},on:{"on-change":t.expressChange},model:{value:t.formItem.delivery_name,callback:function(e){t.$set(t.formItem,"delivery_name",e)},expression:"formItem.delivery_name"}},t._l(t.express,(function(e,r){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.value))])})),1)],1):t._e(),"1"===t.formItem.express_record_type&&1==t.formItem.type?a("FormItem",{attrs:{label:"快递单号：",required:""}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入快递单号"},model:{value:t.formItem.delivery_id,callback:function(e){t.$set(t.formItem,"delivery_id",e)},expression:"formItem.delivery_id"}}),"顺丰速运"==t.formItem.delivery_name?a("div",{staticClass:"trips"},[a("p",[t._v("顺丰请输入单号 :收件人或寄件人手机号后四位，")]),a("p",[t._v("例如：SF000000000000:3941")])]):t._e()],1):t._e(),"2"===t.formItem.express_record_type&&"1"===t.formItem.type?[a("FormItem",{staticClass:"express_temp_id",attrs:{label:"电子面单："}},[a("Select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择电子面单"},on:{"on-change":t.expressTempChange},model:{value:t.formItem.express_temp_id,callback:function(e){t.$set(t.formItem,"express_temp_id",e)},expression:"formItem.express_temp_id"}},t._l(t.expressTemp,(function(e,r){return a("Option",{key:r,attrs:{value:e.temp_id}},[t._v(t._s(e.title))])})),1),t.formItem.express_temp_id?a("Button",{attrs:{type:"text"},on:{click:t.preview}},[t._v("预览")]):t._e()],1),a("FormItem",{attrs:{label:"寄件人姓名："}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人姓名"},model:{value:t.formItem.to_name,callback:function(e){t.$set(t.formItem,"to_name",e)},expression:"formItem.to_name"}})],1),a("FormItem",{attrs:{label:"寄件人电话："}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人电话"},model:{value:t.formItem.to_tel,callback:function(e){t.$set(t.formItem,"to_tel",e)},expression:"formItem.to_tel"}})],1),a("FormItem",{attrs:{label:"寄件人地址："}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人地址"},model:{value:t.formItem.to_addr,callback:function(e){t.$set(t.formItem,"to_addr",e)},expression:"formItem.to_addr"}})],1)]:t._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.formItem.type,expression:"formItem.type === '2'"}]},[a("FormItem",{attrs:{label:"送货人：",required:""}},[a("Select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择送货人"},on:{"on-change":t.shDeliveryChange},model:{value:t.formItem.sh_delivery,callback:function(e){t.$set(t.formItem,"sh_delivery",e)},expression:"formItem.sh_delivery"}},t._l(t.deliveryList,(function(e,r){return a("Option",{key:r,attrs:{value:e.id}},[t._v(t._s(e.wx_name)+"（"+t._s(e.phone)+"）")])})),1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"3"===t.formItem.type,expression:"formItem.type === '3'"}]},[a("FormItem",{attrs:{label:"备注："}},[a("Input",{staticStyle:{width:"80%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:t.formItem.fictitious_content,callback:function(e){t.$set(t.formItem,"fictitious_content",e)},expression:"formItem.fictitious_content"}})],1)],1),t.splitOrder>1&&"3"!==t.formItem.type?a("div",[a("FormItem",{attrs:{label:"分单发货："}},[a("i-switch",{attrs:{size:"large",disabled:8===t.orderStatus},on:{"on-change":t.changeSplitStatus},model:{value:t.splitSwitch,callback:function(e){t.splitSwitch=e},expression:"splitSwitch"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),a("div",{staticClass:"trips"},[a("p",[t._v("\n            可选择表格中的商品单独发货，发货后会生成新的订单且不能撤回，请谨慎操作！\n          ")])]),t.splitSwitch&&t.manyFormValidate.length?a("Table",{attrs:{data:t.manyFormValidate,columns:t.header,border:""},on:{"on-selection-change":t.selectOne},scopedSlots:t._u([{key:"image",fn:function(e){var r=e.row;e.index;return[a("div",{staticClass:"product-data"},[a("img",{staticClass:"image",attrs:{src:r.cart_info.productInfo.image}}),a("div",{staticClass:"line2"},[t._v("\n                "+t._s(r.cart_info.productInfo.store_name)+"\n              ")])])]}},{key:"value",fn:function(e){var r=e.row;e.index;return[a("div",[t._v(t._s(r.cart_info.productInfo.attrInfo.suk))])]}},{key:"sellPrice",fn:function(e){var r=e.row;e.index;return[a("div",[t._v("\n              "+t._s(r.cart_info.productInfo.attrInfo?r.cart_info.productInfo.attrInfo.price:r.cart_info.productInfo.price)+"\n            ")])]}},{key:"price",fn:function(e){var r=e.row;e.index;return[a("div",[a("div",[t._v(t._s(r.cart_info.truePrice))])])]}}],null,!1,1129913299)}):t._e()],1)],1):t._e()],1):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.cancel}},[t._v("取消")]),t.stopSubmit?a("Button",{attrs:{type:"warning"}},[t._v("存在售后待处理订单")]):a("Button",{attrs:{type:"primary"},on:{click:t.putSend}},[t._v("提交")])],1),a("div",{directives:[{name:"viewer",rawName:"v-viewer"},{name:"show",rawName:"v-show",value:t.temp,expression:"temp"}],ref:"viewer"},[a("img",{staticStyle:{display:"none"},attrs:{src:t.temp.pic}})])],1)},s=[],i=a("a34a"),n=a.n(i),o=a("2f62"),l=a("f8b7");function c(t,e,a,r,s,i,n){try{var o=t[i](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,s)}function d(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var i=t.apply(e,a);function n(t){c(i,r,s,n,o,"next",t)}function o(t){c(i,r,s,n,o,"throw",t)}n(void 0)}))}}function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(a,!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var p={name:"orderSend",props:{orderId:Number,status:Number,pay_type:String},data:function(){var t=this;return{productType:0,orderStatus:0,splitSwitch:!1,formItem:{type:"1",express_record_type:"1",delivery_name:"",delivery_id:"",express_temp_id:"",to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:""},modals:!1,express:[],expressTemp:[],deliveryList:[],temp:{},export_open:!0,manyFormValidate:[],stopSubmit:!1,header:[{type:"selection",width:60,align:"center"},{title:"商品信息",slot:"image",width:200,align:"center"},{title:"规格",slot:"value",align:"center",minWidth:120},{title:"商品售价",slot:"sellPrice",align:"center",minWidth:100},{title:"商品优惠价",slot:"price",align:"center",minWidth:100},{title:"总数",key:"cart_num",align:"center",minWidth:80},{title:"待发数量",key:"surplus_num",align:"center",width:180,render:function(e,a){return e("div",[e("InputNumber",{props:{min:1,max:a.row.numShow,value:a.row.surplus_num||1},on:{"on-change":function(e){a.row.surplus_num=e||1,t.manyFormValidate[a.index]=a.row,t.selectData.forEach((function(e,r){e.cart_id===a.row.cart_id&&t.selectData.splice(r,1,a.row)}))}}})])}}],selectData:[]}},computed:m({},Object(o["e"])("admin/order",["splitOrder"])),methods:{selectOne:function(t){this.selectData=t},changeModal:function(t){t||this.cancel()},changeSplitStatus:function(t){var e=this;t&&Object(l["O"])(this.orderId).then((function(t){var a=t.data;a.forEach((function(t){t.numShow=t.surplus_num})),e.manyFormValidate=a}))},changeRadio:function(t){switch(this.$refs.formItem.resetFields(),t){case"1":this.formItem.delivery_name="",this.formItem.delivery_id="",this.formItem.express_temp_id="",this.formItem.express_record_type="1",this.expressTemp=[];break;case"2":this.formItem.sh_delivery="";break;case"3":this.formItem.fictitious_content="";break;default:break}},changeExpress:function(t){switch(t){case"2":this.formItem.delivery_name="",this.formItem.express_temp_id="",this.expressTemp=[],this.getList(2);break;case"1":this.formItem.delivery_name="",this.formItem.delivery_id="",this.getList(1);break;default:break}},reset:function(){this.formItem={type:"1",express_record_type:"1",delivery_name:"",delivery_id:"",express_temp_id:"",expressTemp:[],to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:""}},getList:function(t){var e=this,a=2===t?1:"";Object(l["i"])(a).then(function(){var t=d(n.a.mark((function t(a){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.express=a.data,e.getSheetInfo();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},putSend:function(t){var e=this,a={id:this.orderId,datas:this.formItem};if("1"===this.formItem.type&&"2"===this.formItem.express_record_type){if(""===this.formItem.delivery_name)return this.$Message.error("快递公司不能为空");if(""===this.formItem.express_temp_id)return this.$Message.error("电子面单不能为空");if(""===this.formItem.to_name)return this.$Message.error("寄件人姓名不能为空");if(""===this.formItem.to_tel)return this.$Message.error("寄件人电话不能为空");if(!/^1(3|4|5|7|8|9|6)\d{9}$/i.test(this.formItem.to_tel))return this.$Message.error("请输入正确的手机号码");if(""===this.formItem.to_addr)return this.$Message.error("寄件人地址不能为空")}if("1"===this.formItem.type&&"1"===this.formItem.express_record_type){if(""===this.formItem.delivery_name)return this.$Message.error("快递公司不能为空");if(""===this.formItem.delivery_id)return this.$Message.error("快递单号不能为空")}if("2"===this.formItem.type&&""===this.formItem.sh_delivery)return this.$Message.error("送货人不能为空");this.splitSwitch?(console.log(this.selectData),a.datas.cart_ids=[],this.selectData.forEach((function(t){a.datas.cart_ids.push({cart_id:t.cart_id,cart_num:t.surplus_num})})),Object(l["P"])(a).then((function(t){e.modals=!1,e.$Message.success(t.msg),e.$emit("submitFail"),e.reset(),e.splitSwitch=!1})).catch((function(t){e.$Message.error(t.msg)}))):Object(l["G"])(a).then(function(){var t=d(n.a.mark((function t(a){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.modals=!1,e.$Message.success(a.msg),e.splitSwitch=!1,e.$emit("submitFail"),e.reset();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},cancel:function(t){this.modals=!1,this.orderStatus=0,this.splitSwitch=!1,this.selectData=[],this.reset()},expressChange:function(t){var e=this,a=this.express.find((function(e){return e.value===t}));void 0!==a&&(this.formItem.delivery_code=a.code,"2"===this.formItem.express_record_type&&(this.expressTemp=[],this.formItem.express_temp_id="",Object(l["v"])({com:this.formItem.delivery_code}).then((function(t){e.expressTemp=t.data,t.data.length||e.$Message.error("请配置你所选快递公司的电子面单")})).catch((function(t){e.$Message.error(t.msg)}))))},getCartInfo:function(){var t=this;Object(l["O"])(this.orderId).then((function(e){var a=e.data;a.forEach((function(t){t.numShow=t.surplus_num})),t.manyFormValidate=a,t.productType=a[0].product_type,3==t.productType&&(t.formItem.type="3",t.formItem.fictitious_content="")}))},getDeliveryList:function(){var t=this;Object(l["t"])().then((function(e){t.deliveryList=e.data.list})).catch((function(e){t.$Message.error(e.msg)}))},getSheetInfo:function(){var t=this;Object(l["E"])().then((function(e){var a=e.data;for(var r in a)a.hasOwnProperty(r)&&(t.formItem[r]=a[r]);t.export_open=void 0===a.export_open||a.export_open,t.export_open||(t.formItem.express_record_type="1"),t.formItem.to_addr=a.to_add})).catch((function(e){t.$Message.error(e.msg)}))},shDeliveryChange:function(t){if(t){var e=this.deliveryList.find((function(e){return e.id===t}));this.formItem.sh_delivery_name=e.wx_name,this.formItem.sh_delivery_id=e.phone,this.formItem.sh_delivery_uid=e.uid}},expressTempChange:function(t){this.temp=this.expressTemp.find((function(e){return t===e.temp_id})),void 0===this.temp&&(this.temp={})},preview:function(){this.$refs.viewer.$viewer.show()}}},h=p,v=(a("b35b"),a("2877")),_=Object(v["a"])(h,r,s,!1,null,"4f23ffab",null);e["a"]=_.exports},d63d:function(t,e,a){"use strict";var r=a("4018"),s=a.n(r);s.a},d8ff:function(t,e,a){},dae3:function(t,e,a){},ddbd:function(t,e,a){"use strict";var r=a("35e0"),s=a.n(r);s.a},dfcb:function(t,e,a){"use strict";var r=a("3d90"),s=a.n(r);s.a},ec22:function(t,e,a){},fc48:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Drawer",{attrs:{closable:!1,width:"1000","class-name":"order_box",styles:{padding:0}},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.orderDatalist?r("div",[r("div",{staticClass:"head"},[r("div",{staticClass:"full"},[r("Icon",{class:{"sale-after":-1===t.orderDatalist.orderInfo._status._type},attrs:{custom:"iconfont icondingdan",size:"60"}}),r("div",{staticClass:"text"},[r("div",{staticClass:"title"},[t._v(t._s(t.orderData.pink_name||"售后订单"))]),r("div",[t._v("订单编号："+t._s(t.orderDatalist.orderInfo.order_id))])]),null==t.rowActive.delete_time?r("div",[1===t.orderData._status_new&&0===t.orderData.paid&&"offline"===t.orderData.pay_type?r("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("1")}}},[t._v("立即支付\n              ")]):t._e(),2!=t.orderData._status_new||t.rowActive.split.length?t._e():r("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.distribution}},[t._v("分配\n              ")]),1==t.orderData._status_new?r("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.edit}},[t._v("编辑\n              ")]):t._e(),2!==t.orderData._status_new&&8!==t.orderData._status_new&&4!==t.orderData.status||1!==t.orderData.shipping_type||null!==t.orderData.pinkStatus&&2!==t.orderData.pinkStatus?t._e():r("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.sendOrder}},[t._v("发送货\n              ")]),4!==t.orderData._status_new||t.rowActive.split.length?t._e():r("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.delivery}},[t._v("\n                配送信息\n              ")]),2==t.orderData.shipping_type&&0==t.orderData.status&&1==t.orderData.paid&&0===t.orderData.refund_status?r("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.bindWrite}},[t._v("立即核销\n              ")]):t._e(),t.orderData._status_new>=2?r("Button",{on:{click:function(e){return t.changeMenu("10")}}},[t._v("小票打印")]):t._e(),t.orderData._status_new>=3&&t.orderData.express_dump?r("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("11")}}},[t._v("电子面单打印\n              ")]):t._e(),[1,2,5].includes(t.orderData.refund_type)&&(parseFloat(t.orderData.pay_price)>parseFloat(t.orderData.refunded_price)||0==t.orderData.pay_price)&&!t.formType?r("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("5")}}},[t._v(t._s(2==t.orderData.refund_type?"同意退货":"立即退款")+"\n              ")]):t._e(),[1,2].includes(t.orderData.refund_type)?r("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("7")}}},[t._v("不退款\n              ")]):t._e(),t.formType?t._e():r("Button",{on:{click:function(e){return t.changeMenu("4")}}},[t._v("售后备注")]),1==t.orderData.is_del?r("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("9")}}},[t._v("删除订单\n              ")]):t._e(),1!==t.orderData._status_new&&t.formType?r("Dropdown",{on:{"on-click":t.changeMenu}},[r("Button",{attrs:{icon:"ios-more"}}),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[1!==t.orderData._status_new||3===t.orderData._status_new&&t.orderData.use_integral>0&&t.orderData.use_integral>=t.orderData.back_integral?r("DropdownItem",{attrs:{name:"4"}},[t._v("订单备注\n                  ")]):t._e(),(0==t.orderData.refund_type||1==t.orderData.refund_type||5==t.orderData.refund_type)&&1==t.orderData.paid&&2!==t.orderData.refund_status&&parseFloat(t.orderData.pay_price)>0&&(!t.rowActive.split.length||t.rowActive.split.length&&1==t.orderData._status._type)?r("DropdownItem",{attrs:{disabled:t.openErp,name:"5"}},[t._v("立即退款\n                  ")]):t._e(),4===t.orderData._status_new?r("DropdownItem",{attrs:{disabled:t.openErp,name:"8"}},[t._v("已收货")]):t._e()],1)],1):t._e()],1):t._e()],1),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",{staticClass:"title"},[t._v("订单状态")]),t.formType?r("div",{staticClass:"value1"},[r("span",{domProps:{innerHTML:t._s(t.orderData.status_name.status_name)}}),!t.orderData.is_all_refund&&t.orderData.refund.length?r("span",[t._v(",部分退款中")]):t._e(),t.orderData.is_all_refund&&t.orderData.refund.length&&6!=t.orderData.refund_type?r("span",[t._v(",退款中")]):t._e()]):r("div",[1==t.orderData.refund_type?r("div",{staticClass:"value1"},[t._v("仅退款")]):2==t.orderData.refund_type?r("div",{staticClass:"value1"},[t._v("退货退款")]):3==t.orderData.refund_type?r("div",{staticClass:"value1"},[t._v("拒绝退款")]):4==t.orderData.refund_type?r("div",{staticClass:"value1"},[t._v("商品待退货")]):5==t.orderData.refund_type?r("div",{staticClass:"value1"},[t._v("退货待收货")]):6==t.orderData.refund_type?r("div",{staticClass:"value2"},[t._v("已退款")]):t._e()])]),r("li",{staticClass:"item"},[r("div",{staticClass:"title"},[t._v("实际支付")]),r("div",[t._v("¥"+t._s(t.orderDatalist.orderInfo.paid>0?t.orderDatalist.orderInfo.pay_price:0))])]),t.formType?r("li",{staticClass:"item"},[r("div",{staticClass:"title"},[t._v("支付方式")]),r("div",[t._v(t._s(t.orderDatalist.orderInfo._status._payType||"-"))])]):r("li",{staticClass:"item"},[r("div",{staticClass:"title"},[t._v("退款件数")]),r("div",[t._v(t._s(t.orderDatalist.orderInfo.total_num||0))])]),t.formType?r("li",{staticClass:"item"},[r("div",{staticClass:"title"},[t._v("支付时间")]),r("div",[t._v(t._s(t.orderDatalist.orderInfo._pay_time||"-"))])]):r("li",{staticClass:"item"},[r("div",{staticClass:"title"},[t._v("退款时间")]),r("div",[t._v(t._s(t.orderDatalist.orderInfo._refund_time||"-"))])])])]),r("Tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("TabPane",{attrs:{label:"订单信息",name:"detail"}},[t.formType?t._e():r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("退款信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("退款原因：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_reason||"-"))])]),parseFloat(t.orderDatalist.orderInfo.refund_price)?r("li",{staticClass:"item"},[r("div",[t._v("退款金额：")]),r("div",{staticClass:"value"},[t._v(t._s(parseFloat(t.orderDatalist.orderInfo.refund_price)||0))])]):t._e(),parseFloat(t.orderDatalist.orderInfo.back_integral)?r("li",{staticClass:"item"},[r("div",[t._v("退回积分：")]),r("div",{staticClass:"value"},[t._v(t._s(parseFloat(t.orderDatalist.orderInfo.back_integral)||"-"))])]):t._e(),r("li",{staticClass:"item"},[r("div",[t._v("退款说明：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_explain||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("退款凭证：")]),r("div",{staticClass:"value"},t._l(t.orderDatalist.orderInfo.refund_img,(function(t,e){return r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0)])])]),!t.formType&&t.orderDatalist.orderInfo.refund_express_name?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("退货物流信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("物流公司：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_express_name||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("物流单号：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_express||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("联系电话：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_phone||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("退货说明：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_goods_explain||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("退货凭证：")]),r("div",{staticClass:"value"},t._l(t.orderDatalist.orderInfo.refund_goods_img,(function(t,e){return r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0)])])]):t._e(),r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("用户信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("用户UID：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.userInfo.uid?t.orderDatalist.userInfo.uid:"游客"))])]),r("li",{staticClass:"item"},[r("div",[t._v("用户昵称：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.userInfo.uid?t.orderDatalist.userInfo.nickname:"游客"))])]),r("li",{staticClass:"item"},[r("div",[t._v("绑定电话：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.userInfo.phone||"-"))])])])]),0==t.orderDatalist.orderInfo.product_type?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("收货信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",{staticClass:"value"},[t._v("收货人："+t._s(t.orderDatalist.orderInfo.real_name||"-"))])])]),r("ul",{staticClass:"list"},[r("li",{staticClass:"mt10"},[r("div",{staticClass:"value"},[t._v("收货电话："+t._s(t.orderDatalist.orderInfo.user_phone||"-"))])])]),r("ul",{staticClass:"list"},[r("li",{staticClass:"mt10"},[r("div",{staticClass:"value"},[t._v("收货地址："+t._s(t.orderDatalist.orderInfo.user_address||"-"))])])])]):t._e(),t.orderDatalist.orderInfo.fictitious_content&&1!=t.orderDatalist.orderInfo.cartInfo[0].product_type?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("虚拟发货")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.fictitious_content))])])])]):t._e(),1==t.orderDatalist.orderInfo.cartInfo[0].product_type?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("卡密发货")]),t.orderDatalist.orderInfo.virtual.length?r("div",t._l(t.orderDatalist.orderInfo.virtual,(function(e,a){return r("div",{key:a,staticClass:"list"},[r("div",{staticClass:"item"},[r("div",[t._v("卡号"+t._s(a+1)+"：")]),r("div",{staticClass:"value"},[t._v(t._s(e.card_no))])]),r("div",{staticClass:"item"},[r("div",[t._v("密码"+t._s(a+1)+"：")]),r("div",{staticClass:"value"},[t._v(t._s(e.card_pwd))])])])})),0):r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.virtual_info||"-"))])])])]):t._e(),r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("订单信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("创建时间：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo._add_time||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("商品总数：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.total_num||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("商品总价：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.total_price||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("优惠券金额：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.coupon_price||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("积分抵扣：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.deduction_price||0))])]),parseFloat(t.orderDatalist.orderInfo.use_integral)?r("li",{staticClass:"item"},[r("div",[t._v("使用积分：")]),r("div",{staticClass:"value"},[t._v(t._s(parseFloat(t.orderDatalist.orderInfo.use_integral)))])]):t._e(),r("li",{staticClass:"item"},[r("div",[t._v("支付邮费：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.pay_postage||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("会员商品优惠：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.vip_true_price||0))])]),2===t.orderDatalist.orderInfo.shipping_type&&0===t.orderDatalist.orderInfo.refund_status&&1===t.orderDatalist.orderInfo.paid?r("li",{staticClass:"item"},[r("div",[t._v("门店名称：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo._store_name||"-"))])]):t._e(),2===t.orderDatalist.orderInfo.shipping_type&&0===t.orderDatalist.orderInfo.refund_status&&1===t.orderDatalist.orderInfo.paid?r("li",{staticClass:"item"},[r("div",[t._v("核销码：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.verify_code||"-"))])]):t._e(),r("li",{staticClass:"item"},[r("div",[t._v("推广人：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.userInfo.spread_name)+"/ID:"+t._s(t.orderDatalist.userInfo.spread_uid)+"\n                  ")])]),r("li",{staticClass:"item"},[r("div",[t._v("支付时间：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo._pay_time||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("支付方式：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo._status._payType||"-"))])]),t.orderDatalist.orderInfo.store_order_sn?r("li",{staticClass:"item"},[r("div",[t._v("原订单号：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.store_order_sn))])]):t._e(),t._l(t.orderDatalist.orderInfo.promotions_detail,(function(e,a){return r("li",{key:a,staticClass:"item"},[r("div",[t._v(t._s(e.title)+"：")]),r("div",{staticClass:"value"},[t._v("-￥"+t._s(parseFloat(e.promotions_price).toFixed(2)))])])}))],2)]),"express"===t.orderDatalist.orderInfo.delivery_type?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("物流信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("快递公司：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.delivery_name||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("快递单号：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.delivery_id)),r("span",{staticClass:"logisticsLook",on:{click:t.openLogistics}},[t._v("查询")])])])])]):t._e(),"send"===t.orderDatalist.orderInfo.delivery_type?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("配送信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("送货人姓名：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.delivery_name||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("送货人电话：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.delivery_id||"-"))])])])]):t._e(),t.orderDatalist.orderInfo.custom_form.length&&t.isShow?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("自定义留言")]),r("ul",{staticClass:"list"},t._l(t.orderDatalist.orderInfo.custom_form,(function(e,a){return e.value?r("li",{key:a,staticClass:"item"},[r("div",[t._v(t._s(e.title)+"：")]),"img"===e.label?r("div",{staticClass:"value"},t._l(e.value,(function(t,e){return r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0):r("div",{staticClass:"value"},[t._v(t._s(e.value||"-"))])]):t._e()})),0)]):t._e(),t.orderDatalist.orderInfo.mark?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("买家留言")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.mark||"-"))])])])]):t._e(),t.orderDatalist.orderInfo.remark?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("订单备注")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("备注：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.remark||"-"))])])])]):t._e(),t.orderDatalist.orderInfo.refuse_reason?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("拒绝退款原因")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refuse_reason))])])])]):t._e(),t.orderDatalist.orderInfo.invoice?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("发票信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("发票类型：")]),r("div",{staticClass:"value"},[t._v(t._s(t._f("invoiceType")(t.orderDatalist.orderInfo.invoice.type)))])]),r("li",{staticClass:"item"},[r("div",[t._v("抬头类型：")]),r("div",{staticClass:"value"},[t._v(t._s(t._f("invoiceHeaderType")(t.orderDatalist.orderInfo.invoice.header_type)))])]),r("li",{staticClass:"item"},[r("div",[t._v("发票抬头：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.name||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("税号：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.duty_number||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("邮箱：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.email||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("开户银行：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.bank||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("企业地址：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.address||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("企业电话：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.drawer_phone||"-"))])])])]):t._e()]),r("TabPane",{attrs:{label:"商品信息",name:"product"}},[r("Table",{attrs:{columns:t.columns1,data:t.orderDatalist.orderInfo.cartInfo,"highlight-row":""},scopedSlots:t._u([{key:"product",fn:function(e){var a=e.row;return[r("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600}},[r("div",{staticClass:"product"},[r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"image"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.productInfo.attrInfo?a.productInfo.attrInfo.image:a.productInfo.image,expression:"row.productInfo.attrInfo ? row.productInfo.attrInfo.image : row.productInfo.image"}]})]),r("div",{staticClass:"title"},[r("div",{staticClass:"line2"},[a.is_gift?r("span",{staticClass:"font-color-red"},[t._v("[赠品]")]):t._e(),t._v(t._s(a.productInfo.store_name)+" |\n                        "+t._s(a.productInfo.attrInfo?a.productInfo.attrInfo.suk:"")+"\n                      ")])])]),r("div",{attrs:{slot:"content"},slot:"content"},[r("div",[a.is_gift?r("p",{staticClass:"font-color-red"},[t._v("[赠品]")]):t._e(),r("p",[t._v(t._s(a.productInfo.store_name))]),r("p",[t._v(t._s(a.productInfo.attrInfo?a.productInfo.attrInfo.suk:""))])])])])]}}],null,!1,4058604087)})],1),r("TabPane",{attrs:{label:"订单记录",name:"record"}},[r("Table",{attrs:{columns:t.columns2,data:t.recordData,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"}})],1),t.splitList.length?r("TabPane",{attrs:{label:"发货记录",name:"recordList"}},[r("Table",{attrs:{columns:t.columnSplit,data:t.splitList,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"},scopedSlots:t._u([{key:"product",fn:function(e){var a=e.row;return[r("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600}},[t._l(a._info,(function(e,a){return r("div",{staticClass:"product productTime"},[r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"image"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.image:e.cart_info.productInfo.image,expression:"j.cart_info.productInfo.attrInfo ? j.cart_info.productInfo.attrInfo.image : j.cart_info.productInfo.image"}]})]),r("div",{staticClass:"title"},[r("div",{staticClass:"line2"},[e.cart_info.is_gift?r("span",{staticClass:"font-color-red"},[t._v("[赠品]")]):t._e(),t._v("\n                        "+t._s(e.cart_info.productInfo.store_name)+" | "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:"")+"\n                      ")])])])})),r("div",{attrs:{slot:"content"},slot:"content"},t._l(a._info,(function(e,a){return r("div",{key:a},[e.cart_info.is_gift?r("p",{staticClass:"font-color-red"},[t._v("[赠品]")]):t._e(),r("p",[t._v(t._s(e.cart_info.productInfo.store_name))]),r("p",[t._v(t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:""))]),r("p",{staticClass:"tabBox_pice"},[t._v(t._s("￥"+e.cart_info.sum_price+" x "+e.cart_info.cart_num))])])})),0)],2)]}},{key:"deliveryInfo",fn:function(e){var a=e.row;return[a.add_time?r("div",[t._v("发货时间："+t._s(a.add_time))]):t._e(),"express"==a.delivery_type||"send"==a.delivery_type||"fictitious"==a.delivery_type?r("div",[t._v("\n                  发货方式：\n                  "),"express"==a.delivery_type?r("span",[t._v("物流发货")]):t._e(),"send"==a.delivery_type?r("span",[t._v("送货")]):t._e(),"fictitious"==a.delivery_type?r("span",[t._v("虚拟发货")]):t._e()]):t._e(),a.delivery_name?r("div",[t._v("配   送   人："+t._s(a.delivery_name))]):t._e(),a.delivery_id?r("div",{on:{click:function(e){return t.openItemLogistics(a)}}},[t._v("快递单号："),r("span",{staticStyle:{color:"#1890FF",cursor:"pointer"}},[t._v(t._s(a.delivery_id))])]):t._e()]}},{key:"action",fn:function(e){var a=e.row;e.index;return[2===a._status?r("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.distribution(a,1)}}},[t._v("分配")]):t._e(),2===a._status?r("Divider",{attrs:{type:"vertical"}}):t._e(),1===a._status?r("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.edit(a,1)}}},[t._v("编辑")]):t._e(),2!==a._status&&8!==a._status&&4!==a.status||1!==a.shipping_type||null!==a.pinkStatus&&2!==a.pinkStatus?t._e():r("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.sendOrder(a,1)}}},[t._v("发送货")]),4!==a._status||a.split.length?t._e():r("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.delivery(a,1)}}},[t._v("配送信息")]),2==a.shipping_type&&0==a.status&&1==a.paid&&0===a.refund_status?r("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.bindWrite(a,1)}}},[t._v("立即核销")]):t._e(),1===a._status||(2===a._status||a.split.length)&&1===a.shipping_type&&(null===a.pinkStatus||2===a.pinkStatus)||4===a._status||2==a.shipping_type&&0==a.status&&1==a.paid&&0===a.refund_status?r("Divider",{attrs:{type:"vertical"}}):t._e(),[r("Dropdown",{attrs:{transfer:!0},on:{"on-click":function(e){return t.changeMenu("",a,e,1)}}},[r("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n                      更多\n                      "),r("Icon",{attrs:{type:"ios-arrow-down"}})],1),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1===a._status&&0===a.paid&&"offline"===a.pay_type,expression:"\n                  row._status === 1 &&\n                  row.paid === 0 &&\n                  row.pay_type === 'offline'\n                "}],ref:"ones",attrs:{disabled:t.openErp,name:"1"}},[t._v("立即支付")]),r("DropdownItem",{attrs:{disabled:t.openErp,name:"3"}},[t._v("订单记录")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:a._status>=3&&a.express_dump,expression:"row._status >= 3 && row.express_dump"}],attrs:{disabled:t.openErp,name:"11"}},[t._v("电子面单打印")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:a._status>=2,expression:"row._status >= 2"}],attrs:{name:"10"}},[t._v("小票打印")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1!==a._status||3===a._status&&a.use_integral>0&&a.use_integral>=a.back_integral,expression:"\n                  row._status !== 1 ||\n                  (row._status === 3 &&\n                    row.use_integral > 0 &&\n                    row.use_integral >= row.back_integral)\n                "}],attrs:{name:"4"}},[t._v("订单备注")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:2!=a.refund_type&&4!=a.refund_type&&6!=a.refund_type&&1==a.paid&&2!==a.refund_status&&parseFloat(a.pay_price)>0&&(null==a.split||0==a.split.length),expression:"\n                  row.refund_type != 2 &&\n                  row.refund_type != 4 &&\n                  row.refund_type != 6 &&\n                  row.paid == 1 &&\n                  row.refund_status !== 2 &&\n                  parseFloat(row.pay_price) > 0 &&\n                  (row.split == null || row.split.length == 0)\n                "}],attrs:{disabled:t.openErp,name:"5"}},[t._v("立即退款")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:2==a.refund_type,expression:"row.refund_type == 2"}],attrs:{disabled:t.openErp,name:"55"}},[t._v("同意退货")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:4===a._status&&!a.split.length,expression:"row._status === 4 && !row.split.length"}],attrs:{disabled:t.openErp,name:"8"}},[t._v("已收货")]),1==a.is_del?r("DropdownItem",{attrs:{disabled:t.openErp,name:"9"}},[t._v("删除订单")]):t._e()],1)],1)]]}}],null,!1,3514357900)})],1):t._e()],1)],1):t._e()]),r("Modal",{staticClass:"order_box2",attrs:{scrollable:"",title:"物流查询",width:"350"},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[t.orderDatalist||t.logisticsCon?r("div",{staticClass:"logistics acea-row row-top"},[r("div",{staticClass:"logistics_img"},[r("img",{attrs:{src:a("bd9b")}})]),r("div",{staticClass:"logistics_cent"},[r("span",[t._v("物流公司："+t._s(t.logisticsCon?t.logisticsCon.delivery_name:t.orderDatalist.orderInfo.delivery_name))]),r("span",[t._v("物流单号："+t._s(t.logisticsCon?t.logisticsCon.delivery_id:t.orderDatalist.orderInfo.delivery_id))])])]):t._e(),r("div",{staticClass:"acea-row row-column-around trees-coadd"},[r("div",{staticClass:"scollhide"},[r("Timeline",t._l(t.result,(function(e,a){return r("TimelineItem",{key:a},[r("p",{staticClass:"time",domProps:{textContent:t._s(e.time)}}),r("p",{staticClass:"content",domProps:{textContent:t._s(e.status)}})])})),1)],1)])])],1)},s=[],i=a("a34a"),n=a.n(i),o=a("f8b7");function l(t,e,a,r,s,i,n){try{var o=t[i](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,s)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var i=t.apply(e,a);function n(t){l(i,r,s,n,o,"next",t)}function o(t){l(i,r,s,n,o,"throw",t)}n(void 0)}))}}var d={name:"orderDetails",filters:{invoiceType:function(t){return 1==t?"电子普通发票":"纸质专用发票"},invoiceHeaderType:function(t){return 1==t?"个人":"企业"}},data:function(){return{isShow:0,modal2:!1,modals:!1,grid:{xl:8,lg:8,md:12,sm:24,xs:24},result:[],columns1:[{title:"商品信息",slot:"product",minWidth:400},{title:"售价",key:"sum_price"},{title:"实付金额",key:"truePrice"},{title:"数量",key:"cart_num"},{title:"小计",render:function(t,e){return t("div",(e.row.truePrice*e.row.cart_num).toFixed(2))}}],columns2:[{title:"订单ID",key:"oid",minWidth:40},{title:"操作记录",key:"change_message",minWidth:280},{title:"操作时间",key:"change_time",minWidth:100}],columnSplit:[{title:"订单号",key:"order_id",minWidth:100},{title:"商品信息",slot:"product",minWidth:250},{title:"发货信息",slot:"deliveryInfo",minWidth:100},{title:"操作",slot:"action",minWidth:90}],recordData:[],activeName:"detail",orderData:{},splitList:[],logisticsCon:{}}},props:{orderDatalist:Object,orderId:Number,rowActive:Object,formType:{type:Number,default:0},openErp:{type:Boolean,default:!1}},watch:{orderDatalist:function(t){this.orderData=t.orderInfo,this.getList(this.formType?t.orderInfo.id:t.orderInfo.store_order_id),this.formType&&this.getSplitOrder(t.orderInfo.id)},orderData:function(t){var e=this;t&&t.custom_form&&t.custom_form.length&&t.custom_form.forEach((function(t){if(t.value)return e.isShow=1}))}},mounted:function(){var t=this;this.orderData&&this.orderData.custom_form&&this.orderData.custom_form.length&&this.orderData.custom_form.forEach((function(e){if(e.value)return t.isShow=1}))},methods:{openItemLogistics:function(t){var e=this;this.logisticsCon=t,this.modal2=!0,Object(o["h"])(t.id).then(function(){var t=c(n.a.mark((function t(a){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.result=a.data.result;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},openLogistics:function(){this.modal2=!0,this.getOrderData()},getOrderData:function(){var t=this;Object(o["h"])(this.formType?this.orderDatalist.orderInfo.id:this.orderDatalist.orderInfo.store_order_id).then(function(){var e=c(n.a.mark((function e(a){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.result=a.data.result;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},getSplitOrder:function(t){var e=this;Object(o["Q"])(t,{status:2}).then((function(t){e.splitList=t.data})).catch((function(t){e.$Message.error(t.msg)}))},getList:function(t){var e=this,a={id:t,datas:this.page};this.loading=!0,Object(o["k"])(a).then(function(){var t=c(n.a.mark((function t(a){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.recordData=a.data,e.loading=!1;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},changeMenu:function(t,e,a,r){r?this.$parent.changeMenu(e,a,r):this.$parent.changeMenu(this.rowActive,t)},distribution:function(t,e){e?this.$parent.distribution(t):this.$parent.distribution(this.rowActive)},edit:function(t,e){e?this.$parent.edit(t):this.$parent.edit(this.rowActive)},sendOrder:function(t,e){e?this.$parent.sendOrder(t,e):this.$parent.sendOrder(this.rowActive)},delivery:function(t,e){e?this.$parent.delivery(t,e):this.$parent.delivery(this.rowActive)},bindWrite:function(t,e){e?this.$parent.bindWrite(t):this.$parent.bindWrite(this.rowActive)}},computed:{}},u=d,m=(a("d63d"),a("ddbd"),a("2877")),f=Object(m["a"])(u,r,s,!1,null,"34fbddf2",null);e["a"]=f.exports}}]);