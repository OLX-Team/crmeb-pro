(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-476c22be"],{"0d3e":function(t,e,a){"use strict";function r(t){var e=t.replace(/<img[^>]*>/gi,(function(t,e){return t=t.replace(/style="[^"]+"/gi,"").replace(/style='[^']+'/gi,""),t=t.replace(/width="[^"]+"/gi,"").replace(/width='[^']+'/gi,""),t=t.replace(/height="[^"]+"/gi,"").replace(/height='[^']+'/gi,""),t}));return e=e.replace(/style="[^"]+"/gi,(function(t,e){return t=t.replace(/width:[^;]+;/gi,"max-width:100%;").replace(/width:[^;]+;/gi,"max-width:100%;"),t})),e=e.replace(/<br[^>]*\/>/gi,""),e=e.replace(/\<img/gi,'<img style="max-width:100%;height:auto;display:block;margin-top:0;margin-bottom:0;"'),e}a.d(e,"a",(function(){return r}))},"0f0e":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-wrapper"},[a("div",{staticClass:"list-box"},[t._l(t.labelList,(function(e,r){return t.isUser?a("div",{key:r,staticClass:"label-box"},[e.children&&e.children.length?a("div",{staticClass:"title"},[t._v("\n        "+t._s(e.label_name)+"\n      ")]):t._e(),e.children&&e.children.length?a("div",{staticClass:"list"},t._l(e.children,(function(e,r){return a("div",{key:r,staticClass:"label-item",class:{on:e.disabled},on:{click:function(a){return t.selectLabel(e)}}},[t._v("\n          "+t._s(e.label_name)+"\n        ")])})),0):t._e()]):t._e()})),t.isUser?t._e():a("div",[t._v("暂无标签")])],2),a("div",{staticClass:"footer"},[a("Button",{staticClass:"btns",attrs:{type:"primary"},on:{click:t.subBtn}},[t._v("确定")]),a("Button",{staticClass:"btns",attrs:{type:"primary",ghost:""},on:{click:t.cancel}},[t._v("取消")])],1)])},n=[],i=a("c4c8"),o={name:"userLabel",props:{},data:function(){return{labelList:[],dataLabel:[],isUser:!1}},mounted:function(){},methods:{inArray:function(t,e){for(var a in e)if(e[a].id==t)return!0;return!1},userLabel:function(t){var e=this;this.dataLabel=t,Object(i["eb"])().then((function(t){t.data.map((function(t){t.children&&(e.isUser=!0,t.children.map((function(t){e.inArray(t.id,e.dataLabel)?t.disabled=!0:t.disabled=!1})))})),e.labelList=t.data,console.log(e.labelList)})).catch((function(t){e.$Message.error(t.msg)}))},selectLabel:function(t){if(t.disabled){var e=this.dataLabel.indexOf(this.dataLabel.filter((function(e){return e.id==t.id}))[0]);this.dataLabel.splice(e,1),t.disabled=!1}else this.dataLabel.push({label_name:t.label_name,id:t.id}),t.disabled=!0},subBtn:function(){this.$emit("activeData",JSON.parse(JSON.stringify(this.dataLabel)))},cancel:function(){this.$emit("close")}}},s=o,l=(a("21e3"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"9f6c2564",null);e["a"]=c.exports},1184:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"f",(function(){return l})),a.d(e,"g",(function(){return c})),a.d(e,"e",(function(){return u}));var r=a("b6bd");function n(t){return Object(r["a"])({url:"lottery/list",method:"get",params:t})}function i(t){return Object(r["a"])({url:"lottery/add",method:"post",data:t})}function o(t,e){return Object(r["a"])({url:"lottery/edit/".concat(t),method:"put",data:e})}function s(t){return Object(r["a"])({url:"lottery/factor_info/".concat(t),method:"get"})}function l(t){return Object(r["a"])({url:"lottery/set_status/".concat(t.id,"/").concat(t.status),method:"post"})}function c(t){return Object(r["a"])({url:"lottery/record/list",method:"get",params:t})}function u(t){return Object(r["a"])({url:"lottery/record/deliver",method:"post",data:t})}},1499:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_WWW_CRMEB_PRO_crmeb_pro_admin_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a34a"),D_WWW_CRMEB_PRO_crmeb_pro_admin_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(D_WWW_CRMEB_PRO_crmeb_pro_admin_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),vuex__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2f62"),_components_goodsList_index__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c4ad"),_components_uploadPictures__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("b0e7"),_components_labelList__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("0f0e"),_addGoods__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("eab1"),_api_lottery__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1184"),_formRule_lotteryFrom__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("d1cc"),_api_product__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("c4c8"),_api_user__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("c24f"),_components_wangEditor_index_vue__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("a069"),_utils_validate__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("61f7"),_utils_editorImg__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("0d3e");function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function asyncGeneratorStep(t,e,a,r,n,i,o){try{var s=t[i](o),l=s.value}catch(c){return void a(c)}s.done?e(l):Promise.resolve(l).then(r,n)}function _asyncToGenerator(t){return function(){var e=this,a=arguments;return new Promise((function(r,n){var i=t.apply(e,a);function o(t){asyncGeneratorStep(i,r,n,o,s,"next",t)}function s(t){asyncGeneratorStep(i,r,n,o,s,"throw",t)}o(void 0)}))}}function ownKeys(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(a,!0).forEach((function(e){_defineProperty(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}__webpack_exports__["a"]={name:"lotteryCreate",components:{goodsList:_components_goodsList_index__WEBPACK_IMPORTED_MODULE_2__["default"],uploadPictures:_components_uploadPictures__WEBPACK_IMPORTED_MODULE_3__["a"],WangEditor:_components_wangEditor_index_vue__WEBPACK_IMPORTED_MODULE_10__["a"],addGoods:_addGoods__WEBPACK_IMPORTED_MODULE_5__["a"],userLabel:_components_labelList__WEBPACK_IMPORTED_MODULE_4__["a"]},data:function(){return{dataLabel:[],labelShow:!1,headTab:[{name:"积分抽取",type:"1"},{name:"订单支付",type:"3"},{name:"订单评价",type:"4"},{name:"关注公众号",type:"5"}],title:"添加商品",loading:!1,userLabelList:[],userLevelListApi:[],submitOpen:!1,spinShow:!1,addGoodsModel:!1,editData:{},myConfig:{autoHeightEnabled:!1,initialFrameHeight:500,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/admin/UEditor/",serverUrl:""},isChoice:"单选",modalPic:!1,modal_loading:!1,images:[],templateList:[{id:0,name:"非付费会员"},{id:1,name:"付费会员"}],columns:[{title:"序号",type:"index",width:60,align:"center"},{title:"图片",slot:"image",align:"center",minWidth:120},{title:"名称",align:"center",minWidth:80,key:"name"},{title:"奖品",slot:"type",align:"center",minWidth:80},{title:"提示语",key:"prompt",align:"center",minWidth:80},{title:"数量",slot:"total",align:"center",minWidth:80},{title:"奖品权重",slot:"chance",align:"center",minWidth:80},{title:"奖品概率",key:"probability",align:"center",minWidth:80},{title:"操作",slot:"setting",align:"center",minWidth:80}],specsData:[],formValidate:{images:[],name:"",desc:"",image:"",factor:"1",factor_num:1,attends_user:1,user_level:0,user_label:[],is_svip:"-1",prize_num:0,period:[],prize:[],lottery_num_term:1,lottery_num:1,spread_num:1,is_all_record:0,is_personal_record:0,is_content:0,content:"",status:0},ruleValidate:_formRule_lotteryFrom__WEBPACK_IMPORTED_MODULE_7__["a"],currentid:"",picTit:"",tableIndex:0,copy:0,editIndex:null,id:"",isData:0,content:""}},filters:{typeName:function(t){return 1==t?"未中奖":2==t?"积分":3==t?"余额":4==t?"红包":5==t?"优惠券":6==t?"商品":void 0}},computed:_objectSpread({},Object(vuex__WEBPACK_IMPORTED_MODULE_1__["e"])("admin/layout",["isMobile","menuCollapse"]),{labelWidth:function(){return this.isMobile?void 0:135},labelPosition:function(){return this.isMobile?"top":"right"}}),mounted:function(){this.prizeList(),this.getInfo(),this.labelListApi(),this.levelListApi(),this.setCopyrightShow({value:!1})},destroyed:function(){this.setCopyrightShow({value:!0})},methods:_objectSpread({},Object(vuex__WEBPACK_IMPORTED_MODULE_1__["d"])("admin/layout",["setCopyrightShow"]),{prizeList:function(){for(var t=[],e={type:1,name:"",num:0,image:"",chance:1,total:0,prompt:""},a=0;a<8;a++)t.push(e);this.specsData=JSON.parse(JSON.stringify(t))},getEditorContent:function(t){this.content=t},closeLabel:function(t){var e=this.dataLabel.indexOf(this.dataLabel.filter((function(e){return e.id==t.id}))[0]);this.dataLabel.splice(e,1)},activeData:function(t){this.labelShow=!1,this.dataLabel=t},openLabel:function(t){this.labelShow=!0,this.$refs.userLabel.userLabel(JSON.parse(JSON.stringify(this.dataLabel)))},labelClose:function(){this.labelShow=!1},labelListApi:function(){var t=this;Object(_api_product__WEBPACK_IMPORTED_MODULE_8__["t"])().then((function(e){t.userLabelList=e.data.list}))},levelListApi:function(){var t=this;Object(_api_user__WEBPACK_IMPORTED_MODULE_9__["q"])().then((function(e){t.userLevelListApi=e.data.list}))},onchangeTime:function(t){var e=this;this.$nextTick((function(){e.$set(e.formValidate,"period",t)}))},lotteryType:function(){this.getInfo()},getInfo:function(){var t=this;this.spinShow=!0,Object(_api_lottery__WEBPACK_IMPORTED_MODULE_6__["c"])(this.formValidate.factor).then((function(e){var a=t.formValidate.factor;if(t.spinShow=!1,t.isData=e.data.id||0,!t.isData)return t.prizeList(),void(t.formValidate={factor:a,images:[],name:"",desc:"",image:"",factor_num:1,attends_user:1,user_level:0,user_label:[],is_svip:"-1",prize_num:0,period:[],prize:[],lottery_num_term:1,lottery_num:1,spread_num:1,is_all_record:0,is_personal_record:0,is_content:0,content:"",status:0});t.formValidate=e.data,t.formValidate.factor=e.data.factor.toString(),t.formValidate.user_level=e.data.user_level||[],t.formValidate.user_label=e.data.user_label||[],t.dataLabel=e.data.user_label||[],t.formValidate.is_svip=e.data.is_svip,t.content=e.data.is_content?e.data.content:"",t.formValidate.period=[t.formatDate(e.data.start_time)||"",t.formatDate(e.data.end_time)||""],t.specsData=e.data.prize,t.getProbability()}))},next:function(t){var e=this;if(this.formValidate.prize=this.specsData,this.formValidate.is_content&&(this.formValidate.content=Object(_utils_editorImg__WEBPACK_IMPORTED_MODULE_12__["a"])(this.content)),this.submitOpen)return!1;this.$refs[t].validate((function(t){if(!t)return e.$Message.error("请完善信息");if(""==e.formValidate.period[0])return e.$Message.error("请选择日期");e.submitOpen=!0;var a=[];e.dataLabel.forEach((function(t){a.push(t.id)})),e.formValidate.user_label=a,e.isData?Object(_api_lottery__WEBPACK_IMPORTED_MODULE_6__["b"])(e.isData,e.formValidate).then(function(){var t=_asyncToGenerator(D_WWW_CRMEB_PRO_crmeb_pro_admin_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function t(a){return D_WWW_CRMEB_PRO_crmeb_pro_admin_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$Message.success(a.msg),setTimeout((function(){e.submitOpen=!1}),500);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.submitOpen=!1,e.$Message.error(t.msg)})):Object(_api_lottery__WEBPACK_IMPORTED_MODULE_6__["a"])(e.formValidate).then(function(){var t=_asyncToGenerator(D_WWW_CRMEB_PRO_crmeb_pro_admin_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function t(a){return D_WWW_CRMEB_PRO_crmeb_pro_admin_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$Message.success(a.msg),setTimeout((function(){e.submitOpen=!1}),500);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.submitOpen=!1,e.$Message.error(t.msg)}))}))},step:function(){this.current--},getContent:function(t){this.formValidate.content=t},getRole:function(t){this.formValidate.rule=t},modalPicTap:function(t,e,a){this.modalPic=!0,this.isChoice="dan"===t?"单选":"多选",this.picTit=e||"",this.tableIndex=a},getPic:function(t){switch(this.picTit){case"danFrom":this.formValidate.image=t.att_dir;break;default:this.specsData[this.tableIndex].image=t.att_dir}this.modalPic=!1},handleRemove:function(){this.formValidate.image=""},addCustomDialog:function(t){window.UE.registerUI("test-dialog",(function(t,e){var a=new window.UE.ui.Dialog({iframeUrl:"/admin/widget.images/index.html?fodder=dialog",editor:t,name:e,title:"上传图片",cssRules:"width:1200px;height:500px;padding:20px;"});this.dialog=a;var r=new window.UE.ui.Button({name:"dialog-button",title:"上传图片",cssRules:"background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;",onclick:function(){a.render(),a.open()}});return r}),37)},addGoods:function(){this.addGoodsModel=!0,this.title="添加商品",this.editData={}},editGoods:function(t){this.addGoodsModel=!0,this.title="编辑奖品",this.editData=this.specsData[t],this.editIndex=t},deleteGoods:function(t){this.specsData.splice(t,1)},sumArr:function sumArr(arr,name){for(var arrData=[],i=0;i<arr.length;i++)arrData.push(arr[i][name]);return eval(arrData.join("+"))},addGoodsData:function(t){console.log(this.editIndex,t),console.log(this.specsData),null!=this.editIndex?this.$set(this.specsData,[this.editIndex],t):this.specsData.length<8?this.specsData.push(t):this.$Message.warning("最多添加8个奖品"),this.getProbability(),this.addGoodsModel=!1,this.editIndex=null,console.log(this.prize,t)},changeChance:function(t,e){var a=this;console.log(t,e),this.$set(this.specsData[e],"chance",t),this.$nextTick((function(t){a.getProbability()}))},changeTotal:function(t,e){this.$set(this.specsData[e],"total",t)},getProbability:function(){var t=0;t=this.sumArr(this.specsData,"chance"),console.log(t);for(var e=0;e<this.specsData.length;e++)this.$set(this.specsData[e],"probability",(this.specsData[e].chance/t*100).toFixed(2)+"%")},onDragDrop:function(t,e){var a;console.log(t,e),(a=this.specsData).splice.apply(a,[e,1].concat(_toConsumableArray(this.specsData.splice(t,1,this.specsData[e]))))},formatDate:function(t){if(t){var e=new Date(1e3*t);return Object(_utils_validate__WEBPACK_IMPORTED_MODULE_11__["a"])(e,"yyyy-MM-dd hh:mm")}return""}})}},"21e3":function(t,e,a){"use strict";var r=a("af17"),n=a.n(r);n.a},2618:function(t,e,a){"use strict";var r=a("ca76"),n=a.n(r);n.a},"5f3b":function(t,e,a){"use strict";var r=a("7eae"),n=a.n(r);n.a},"61f7":function(t,e,a){"use strict";function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function n(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(a,!0).forEach((function(e){i(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var r in a)if(new RegExp("(".concat(r,")")).test(e)){var n=a[r]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?n:s(n))}return e}function s(t){return("00"+t).substr(t.length)}a.d(e,"a",(function(){return o})),a.d(e,"c",(function(){return u})),a.d(e,"b",(function(){return d}));var l={min:"%s最小长度为:min",max:"%s最大长度为:max",length:"%s长度必须为:length",range:"%s长度为:range",pattern:"$s格式错误"};var c=function(t,e){t.message=function(t){return e.replace("%s",t||"")}};function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n({required:!0,message:t,type:"string"},e)}function d(t){return m.pattern(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,t)}c(u,"请输入%s"),c(d,"%s格式不正确");var m=Object.keys(l).reduce((function(t,e){return t[e]=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="range"===e?{min:t[0],max:t[1]}:i({},e,t);return n({message:a.replace(":".concat(e),"range"===e?"".concat(t[0],"-").concat(t[1]):t),type:"string"},o,{},r)},c(t[e],l[e]),t}),{})},"7eae":function(t,e,a){},af17:function(t,e,a){},b0c0:function(t,e){t.exports="data:image/png;base64,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"},c24f:function(t,e,a){"use strict";a.d(e,"S",(function(){return n})),a.d(e,"i",(function(){return i})),a.d(e,"p",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"f",(function(){return c})),a.d(e,"o",(function(){return u})),a.d(e,"q",(function(){return d})),a.d(e,"G",(function(){return m})),a.d(e,"K",(function(){return p})),a.d(e,"I",(function(){return _})),a.d(e,"H",(function(){return f})),a.d(e,"e",(function(){return h})),a.d(e,"d",(function(){return b})),a.d(e,"l",(function(){return g})),a.d(e,"M",(function(){return v})),a.d(e,"n",(function(){return y})),a.d(e,"L",(function(){return V})),a.d(e,"X",(function(){return O})),a.d(e,"P",(function(){return w})),a.d(e,"N",(function(){return C})),a.d(e,"O",(function(){return D})),a.d(e,"R",(function(){return P})),a.d(e,"Q",(function(){return x})),a.d(e,"T",(function(){return k})),a.d(e,"t",(function(){return E})),a.d(e,"u",(function(){return I})),a.d(e,"U",(function(){return j})),a.d(e,"h",(function(){return M})),a.d(e,"W",(function(){return T})),a.d(e,"A",(function(){return L})),a.d(e,"Y",(function(){return W})),a.d(e,"k",(function(){return S})),a.d(e,"V",(function(){return A})),a.d(e,"D",(function(){return R})),a.d(e,"z",(function(){return q})),a.d(e,"y",(function(){return U})),a.d(e,"x",(function(){return z})),a.d(e,"B",(function(){return K})),a.d(e,"w",(function(){return F})),a.d(e,"v",(function(){return N})),a.d(e,"s",(function(){return X})),a.d(e,"r",(function(){return B})),a.d(e,"m",(function(){return G})),a.d(e,"j",(function(){return $})),a.d(e,"E",(function(){return H})),a.d(e,"F",(function(){return Z})),a.d(e,"Z",(function(){return J})),a.d(e,"J",(function(){return Q})),a.d(e,"C",(function(){return Y})),a.d(e,"b",(function(){return tt})),a.d(e,"a",(function(){return et})),a.d(e,"ab",(function(){return at}));var r=a("b6bd");function n(t){return Object(r["a"])({url:"user/user",method:"get",params:t})}function i(t){return Object(r["a"])({url:"user/user/".concat(t,"/edit"),method:"get"})}function o(t){return Object(r["a"])({url:"user/set_status/".concat(t.status,"/").concat(t.id),method:"put"})}function s(t){return Object(r["a"])({url:"marketing/coupon/grant",method:"get",params:t})}function l(t){return Object(r["a"])({url:"user/edit_other/".concat(t),method:"get"})}function c(t){return Object(r["a"])({url:"user/user/".concat(t),method:"get"})}function u(t){return Object(r["a"])({url:"user/one_info/".concat(t.id),method:"get",params:t.datas})}function d(t){return Object(r["a"])({url:"user/user_level/vip_list",method:"get",params:t})}function m(t){return Object(r["a"])({url:"user/user_level/set_show/".concat(t.id,"/").concat(t.is_show),method:"PUT"})}function p(t,e){return Object(r["a"])({url:"user/user_level/task/".concat(t),method:"get",params:e})}function _(t){return Object(r["a"])({url:"user/user_level/set_task_show/".concat(t.id,"/").concat(t.is_show),method:"PUT"})}function f(t){return Object(r["a"])({url:"user/user_level/set_task_must/".concat(t.id,"/").concat(t.is_must),method:"PUT"})}function h(t){return Object(r["a"])({url:"/user/user_level/create_task",method:"get",params:t})}function b(t){return Object(r["a"])({url:"user/user_level/create",method:"get",params:t})}function g(t){return Object(r["a"])({url:"user/give_level/".concat(t),method:"get"})}function v(t){return Object(r["a"])({url:"user/user_group/list",method:"get",params:t})}function y(t){return Object(r["a"])({url:"user/user_group/add/".concat(t),method:"get"})}function V(t){return Object(r["a"])({url:"setting/update_admin",method:"PUT",data:t})}function O(t){return Object(r["a"])({url:"user/set_group",method:"post",data:t})}function w(t){return Object(r["a"])({url:"user/user_label",method:"get",params:t})}function C(t,e){return Object(r["a"])({url:"user/user_label/add/".concat(t),method:"get",params:e})}function D(t){return Object(r["a"])({url:"user/user_label_cate/all",method:"get",params:t})}function P(t){return Object(r["a"])({url:"user/user_label_cate/".concat(t,"/edit"),method:"get"})}function x(t){return Object(r["a"])({url:"user/user_label_cate/create",method:"get"})}function k(t){return Object(r["a"])({url:"/user/member_batch/index",method:"get",params:t})}function E(t,e){return Object(r["a"])({url:"/user/member_batch/save/".concat(t),method:"post",data:e})}function I(t,e){return Object(r["a"])({url:"/user/member_batch/set_value/".concat(t),method:"get",params:e})}function j(t,e){return Object(r["a"])({url:"/user/member_card/index/".concat(t),method:"get",params:e})}function M(t,e){return Object(r["a"])({url:"/export/memberCard/".concat(t),method:"get",params:e})}function T(){return Object(r["a"])({url:"/user/member/ship",method:"get"})}function L(t,e){return Object(r["a"])({url:"/user/member_ship/save/".concat(t),method:"post",data:e})}function W(){return Object(r["a"])({url:"/user/user/syncUsers",method:"get"})}function S(){return Object(r["a"])({url:"/user/user/create",method:"get"})}function A(){return Object(r["a"])({url:"/user/member_scan",method:"get"})}function R(t,e){return Object(r["a"])({url:"user/label/".concat(t),method:"post",data:e})}function q(t){return Object(r["a"])({url:"user/member_right/save/".concat(t.id),method:"post",data:t})}function U(){return Object(r["a"])({url:"user/member/right",method:"get"})}function z(t){return Object(r["a"])({url:"/user/member/record",method:"get",params:t})}function K(){return Object(r["a"])({url:"user/member/ship_select",method:"get"})}function F(t){return Object(r["a"])({url:"user/member_card/set_status",method:"get",params:t})}function N(t){return Object(r["a"])({url:"user/member_ship/set_ship_status",method:"get",params:t})}function X(t,e){return Object(r["a"])({url:"user/member_agreement/save/".concat(t),method:"post",data:e})}function B(){return Object(r["a"])({url:"user/member/agreement",method:"get"})}function G(t){return Object(r["a"])({url:"user/give_level_time/".concat(t),method:"get"})}function $(t){return Object(r["a"])({url:"user/label/".concat(t),method:"get"})}function H(t){return Object(r["a"])({url:"user/save_set_label",method:"put",data:t})}function Z(t){return Object(r["a"])({url:"setting/info",method:"get"})}function J(t){return Object(r["a"])({url:"user/visit_list/".concat(t.id),method:"get",params:t.datas})}function Q(t){return Object(r["a"])({url:"user/spread_list/".concat(t.id),method:"get",params:t.datas})}function Y(t){return Object(r["a"])({url:"user/user/".concat(t.uid),method:"put",data:t})}function tt(t,e){return Object(r["a"])({url:"agent/set_agent_agreement/".concat(t),method:"post",data:e})}function et(){return Object(r["a"])({url:"agent/get_agent_agreement",method:"get"})}function at(){return Object(r["a"])({url:"user/synchro/work/label",method:"get"})}},ca76:function(t,e,a){},d1cc:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var r={name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],factor:[{required:!0,type:"number",message:"请选择活动类型",trigger:"change"}],attends_user:[{required:!0,type:"number",message:"请选择参与用户",trigger:"change"}],period:[{required:!0,validator:n,trigger:"change"}],factor_num:[{required:!0,type:"number",message:"请输入抽奖次数",trigger:"blur"}],prize:[{required:!0,type:"array",message:"请添加抽奖奖品(8条)",trigger:"change"},{type:"array",min:8,message:"请添加抽奖奖品(8条)",trigger:"change"}],lottery_num:[{required:!0,type:"number",message:"请输入邀请新用户最多可获得抽奖多少次",trigger:"blur"}],spread_num:[{required:!0,type:"number",message:"请输入关注额外抽多少次",trigger:"blur"}],image:[{required:!0,message:"请上传活动背景图",trigger:"change"}],content:[{required:!0,message:"请填写活动规则",trigger:"blur"}]};function n(t,e,a){if(console.log(e),Array.isArray(e))e.map((function(t){if(""===t)return a("日期不能为空")}));else if(""===e)return a("日期不能为空");return a()}},e449:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{title:"优惠券列表",width:"60%"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.isTemplate,callback:function(e){t.isTemplate=e},expression:"isTemplate"}},[a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:t.columns,data:t.couponList,loading:t.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},on:{"on-select":t.handleSelectRow,"on-select-cancel":t.handleCancelRow,"on-select-all":t.handleSelectAll,"on-select-all-cancel":t.handleSelectAll,"on-selection-change":t.changeCheckbox},scopedSlots:t._u([{key:"coupon_price",fn:function(e){var r=e.row;return[1==r.coupon_type?a("span",[t._v(t._s(r.coupon_price)+"元")]):t._e(),2==r.coupon_type?a("span",[t._v(t._s(parseFloat(r.coupon_price)/10)+"折（"+t._s(r.coupon_price.toString().split(".")[0])+"%）")]):t._e()]}},{key:"count",fn:function(e){var r=e.row;e.index;return[r.is_permanent?a("span",[t._v("不限量")]):a("div",[a("span",{staticClass:"fa"},[t._v("发布："+t._s(r.total_count))]),a("span",{staticClass:"sheng"},[t._v("剩余："+t._s(r.remain_count))])])]}},{key:"start_time",fn:function(e){var r=e.row;e.index;return[r.start_time?a("div",[t._v("\n                        "+t._s(t._f("formatDate")(r.start_time))+" - "+t._s(t._f("formatDate")(r.end_time))+"\n                    ")]):a("span",[t._v("不限时")])]}},{key:"type",fn:function(e){var r=e.row;return[1===r.type?a("span",[t._v("品类券")]):2===r.type?a("span",[t._v("商品券")]):3===r.type?a("span",[t._v("会员券")]):a("span",[t._v("通用券")])]}},{key:"status",fn:function(e){var r=e.row;e.index;return[a("Tag",{directives:[{name:"show",rawName:"v-show",value:1===r.status,expression:"row.status===1"}],attrs:{color:"blue"}},[t._v("正常")]),a("Tag",{directives:[{name:"show",rawName:"v-show",value:0===r.status,expression:"row.status===0"}],attrs:{color:"gold"}},[t._v("未开启")]),a("Tag",{directives:[{name:"show",rawName:"v-show",value:-1===r.status,expression:"row.status=== -1"}],attrs:{color:"red"}},[t._v("已失效")])]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:t.total,"show-elevator":"","show-total":"","page-size":t.tableFrom.limit},on:{"on-change":t.receivePageChange}})],1)],1)],1)},n=[],i=a("b7be"),o=a("61f7");function s(t){return u(t)||c(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var d={name:"index",filters:{formatDate:function(t){if(0!==t){var e=new Date(1e3*t);return Object(o["a"])(e,"yyyy-MM-dd hh:mm")}}},props:{couponids:{type:Array},updateIds:{type:Array},updateName:{type:Array},luckDraw:{type:Boolean,default:!1},discount:{type:Boolean,default:!1}},data:function(){return{currentid:0,productRow:{},isTemplate:!1,loading:!1,tableFrom:{receive_type:3,page:1,limit:10},total:0,ids:[],texts:[],columns:[{title:"ID",key:"id",width:60},{title:"优惠券名称",key:"title",minWidth:150},{title:"适用类型",slot:"type",minWidth:80},{title:"面值",slot:"coupon_price",minWidth:100},{title:"最低消费额",key:"use_min_price",minWidth:100},{title:"发布数量",slot:"count",minWidth:120},{title:"有效期限",slot:"start_time",minWidth:120},{title:"状态",slot:"status",minWidth:80}],couponList:[],selectedIds:new Set,selectedNames:new Set,couponVal:[]}},mounted:function(){},watch:{updateIds:function(t){this.selectedIds=new Set(t)},updateName:function(t){this.selectedNames=new Set(t)}},created:function(){var t=this,e={width:60,align:"center",render:function(e,a){var r=a.row.id,n=!1;n=t.currentid===r;var i=t;return e("div",[e("Radio",{props:{value:n},on:{"on-change":function(){i.currentid=r,t.productRow=a.row}}})])}},a={type:"selection",width:60,align:"center"};this.luckDraw?this.columns.unshift(e):this.columns.unshift(a)},methods:{unique:function(t){var e=new Map;return t.filter((function(t){return!e.has(t.id)&&e.set(t.id,1)}))},changeCheckbox:function(t){this.couponVal=t},handleSelectAll:function(t){var e=this;if(!this.discount){if(0===t.length){var a=this,r=a.$refs.table.data;r.forEach((function(t){if(a.selectedIds.has(t.id)){a.selectedIds.delete(t.id);var e=a.unique(Array.from(a.selectedNames));a.unique(Array.from(a.selectedNames)).forEach((function(a,r){a.id===t.id&&e.splice(r,1)})),a.selectedNames=new Set(e)}}))}else t.forEach((function(t){e.selectedIds.add(t.id),e.selectedNames.add({id:t.id,title:t.title})}));this.$nextTick((function(){e.setChecked()}))}},handleSelectRow:function(t,e){var a=this;this.discount||(this.selectedIds.add(e.id),this.selectedNames.add({id:e.id,title:e.title}),this.$nextTick((function(){a.setChecked()})))},handleCancelRow:function(t,e){var a=this;if(!this.discount){var r=this;r.selectedIds.delete(e.id);var n=Array.from(r.selectedNames);Array.from(r.selectedNames).forEach((function(t,a){t.id===e.id&&n.splice(a,1)})),r.selectedNames=new Set(n),this.$nextTick((function(){a.setChecked()}))}},setChecked:function(){this.ids=s(this.selectedIds),this.texts=s(this.selectedNames);var t=this.$refs.table.objData;for(var e in t)this.selectedIds.has(t[e].id)&&(t[e]._isChecked=!0)},cancel:function(){this.isTemplate=!1,this.luckDraw&&(this.currentid=0)},tableList:function(){var t=this;this.loading=!0,Object(i["R"])(this.tableFrom).then((function(e){var a=e.data;t.couponList=a.list,t.discount||t.$nextTick((function(){t.setChecked()})),t.total=a.count,t.loading=!1}))},ok:function(){this.luckDraw?(this.$emit("getCouponId",this.productRow),this.currentid=0):this.discount?this.$emit("getCouponList",this.couponVal):this.$emit("nameId",this.ids,this.texts)},receivePageChange:function(t){this.tableFrom.page=t,this.tableList()}}},m=d,p=a("2877"),_=Object(p["a"])(m,r,n,!1,null,"087440e6",null);e["a"]=_.exports},e90a:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-submit"},[r("Card",{staticClass:"ivu-mt",staticStyle:{"margin-bottom":"79px"},attrs:{bordered:!1,"dis-hover":""}},[r("div",{staticClass:"new_tab"},[r("Tabs",{on:{"on-click":t.lotteryType},model:{value:t.formValidate.factor,callback:function(e){t.$set(t.formValidate,"factor",e)},expression:"formValidate.factor"}},t._l(t.headTab,(function(t,e){return r("TabPane",{key:e,attrs:{label:t.name,name:t.type}})})),1)],1),r("Row",{attrs:{type:"flex"}},[r("Col",{attrs:{span:"23"}},[r("Form",{ref:"formValidate",staticClass:"form mt30",attrs:{rules:t.ruleValidate,model:t.formValidate,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[r("Row",{attrs:{type:"flex"}},[r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"活动名称：",prop:"name","label-for":"name"}},[r("Input",{staticClass:"perW30",attrs:{placeholder:"请输入活动名称","element-id":"name"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1)],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"活动时间：",prop:"period"}},[r("div",{staticClass:"acea-row row-middle"},[r("DatePicker",{staticClass:"perW30",attrs:{editable:!1,type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"请选择活动时间"},on:{"on-change":t.onchangeTime},model:{value:t.formValidate.period,callback:function(e){t.$set(t.formValidate,"period",e)},expression:"formValidate.period"}})],1)])],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"参与用户：",prop:"attends_user","label-for":"attends_user"}},[r("RadioGroup",{attrs:{"element-id":"attends_user"},model:{value:t.formValidate.attends_user,callback:function(e){t.$set(t.formValidate,"attends_user",e)},expression:"formValidate.attends_user"}},[r("Radio",{staticClass:"radio",attrs:{label:1}},[t._v("全部用户")]),r("Radio",{attrs:{label:2}},[t._v("部分用户")])],1)],1)],1),2==t.formValidate.attends_user?r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"",prop:2==t.formValidate.attends_user?"user_level":""}},[r("div",{staticClass:"acea-row row-middle"},[r("Select",{staticClass:"perW30",attrs:{multiple:"",placeholder:"请选择用户等级"},model:{value:t.formValidate.user_level,callback:function(e){t.$set(t.formValidate,"user_level",e)},expression:"formValidate.user_level"}},t._l(t.userLevelListApi,(function(e){return r("Option",{key:e.id,attrs:{value:String(e.id)}},[t._v(t._s(e.name))])})),1)],1)])],1):t._e(),2==t.formValidate.attends_user?r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"",prop:2==t.formValidate.attends_user?"is_svip":""}},[r("div",{staticClass:"acea-row row-middle"},[r("Select",{staticClass:"perW30",attrs:{clearable:"",placeholder:"请选择是否是付费会员"},model:{value:t.formValidate.is_svip,callback:function(e){t.$set(t.formValidate,"is_svip",e)},expression:"formValidate.is_svip"}},t._l(t.templateList,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)])],1):t._e(),2==t.formValidate.attends_user?r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"",prop:2==t.formValidate.attends_user?"user_label":""}},[r("div",{staticClass:"labelInput acea-row row-between-wrapper",on:{click:t.openLabel}},[r("div",{staticStyle:{width:"90%"}},[t.dataLabel.length?r("div",t._l(t.dataLabel,(function(e,a){return r("Tag",{attrs:{closable:""},on:{"on-close":function(a){return t.closeLabel(e)}}},[t._v(t._s(e.label_name))])})),1):r("span",{staticClass:"span"},[t._v("选择用户关联标签")])]),r("div",{staticClass:"iconfont iconxiayi"})]),r("div",{staticClass:"ml100 grey"},[t._v("\n                    三个条件都设置后,必须这些条件都满足的用户才能参加抽奖\n                  ")])])],1):t._e(),5==t.formValidate.factor?r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"抽奖次数：",prop:5==t.formValidate.factor?"lottery_num_term":"","label-for":"status"}},[r("RadioGroup",{attrs:{"element-id":"lottery_num_term"},model:{value:t.formValidate.lottery_num_term,callback:function(e){t.$set(t.formValidate,"lottery_num_term",e)},expression:"formValidate.lottery_num_term"}},[r("Radio",{staticClass:"radio",attrs:{label:1}},[t._v("每天N次")]),r("Radio",{attrs:{label:2}},[t._v("每人N次")])],1)],1)],1):t._e(),5==t.formValidate.factor?r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"邀请新用户最多可获得抽奖",prop:5==t.formValidate.factor?"lottery_num":"","label-for":"lottery_num"}},[r("div",{staticClass:"acea-row row-middle"},[r("div",{staticClass:"mr10 grey"}),r("InputNumber",{staticClass:"perW20",attrs:{placeholder:"","element-id":"lottery_num",min:1,precision:0},model:{value:t.formValidate.lottery_num,callback:function(e){t.$set(t.formValidate,"lottery_num",e)},expression:"formValidate.lottery_num"}}),r("div",{staticClass:"ml10 grey"},[t._v("次")])],1)])],1):t._e(),5==t.formValidate.factor?r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"邀请一位新用户关注公众号可获得抽奖",prop:5==t.formValidate.factor?"spread_num":"","label-for":"spread_num"}},[r("div",{staticClass:"acea-row row-middle"},[r("div",{staticClass:"mr10 grey"}),r("InputNumber",{staticClass:"perW20",attrs:{placeholder:"","element-id":"spread_num",min:1,precision:0},model:{value:t.formValidate.spread_num,callback:function(e){t.$set(t.formValidate,"spread_num",e)},expression:"formValidate.spread_num"}}),r("div",{staticClass:"ml10 grey"},[t._v("次")])],1)])],1):t._e(),1==t.formValidate.factor||3==t.formValidate.factor||4==t.formValidate.factor?r("Col",{key:"factor_num",attrs:{span:"24"}},[r("FormItem",{attrs:{label:1==t.formValidate.factor?"单次抽奖消耗积分：":"抽奖次数：",prop:1==t.formValidate.factor||3==t.formValidate.factor||4==t.formValidate.factor?"factor_num":"","label-for":"factor_num"}},[r("div",{staticClass:"acea-row row-middle"},[r("div",{staticClass:"mr10 grey"}),r("InputNumber",{staticClass:"perW20",attrs:{placeholder:"","element-id":"factor_num",min:1,precision:0},model:{value:t.formValidate.factor_num,callback:function(e){t.$set(t.formValidate,"factor_num",e)},expression:"formValidate.factor_num"}}),1!=t.formValidate.factor?r("div",{staticClass:"ml10 grey"},[t._v("\n                      次\n                    ")]):t._e()],1)])],1):t._e()],1),r("Row",[r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"规则选择：",prop:"prize"}},[r("Table",{attrs:{data:t.specsData,columns:t.columns,border:"",draggable:!0},on:{"on-drag-drop":t.onDragDrop},scopedSlots:t._u([{key:"image",fn:function(e){var a=e.row,n=e.index;return[r("div",{staticClass:"acea-row row-middle row-center-wrapper",on:{click:function(e){return t.modalPicTap("dan","goods",n)}}},[a.image?r("div",{staticClass:"pictrue pictrueTab"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.image,expression:"row.image"}]})]):r("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[r("Icon",{staticClass:"iconfonts",attrs:{type:"ios-camera-outline",size:"21"}})],1)])]}},{key:"total",fn:function(e){var a=e.row,n=e.index;return[r("InputNumber",{staticClass:"priceBox",attrs:{max:99999,min:0,precision:0},on:{"on-change":function(e){t.changeTotal(e,n)}},model:{value:a.total,callback:function(e){t.$set(a,"total",e)},expression:"row.total"}})]}},{key:"chance",fn:function(e){var a=e.row,n=e.index;return[r("InputNumber",{staticClass:"priceBox",attrs:{max:100,min:1,precision:0},on:{"on-change":function(e){t.changeChance(e,n)}},model:{value:a.chance,callback:function(e){t.$set(a,"chance",e)},expression:"row.chance"}})]}},{key:"type",fn:function(e){var a=e.row;e.index;return[r("div",[t._v(t._s(t._f("typeName")(a.type)))])]}},{key:"setting",fn:function(e){e.row;var a=e.index;return[r("Button",{staticClass:"submission",staticStyle:{"background-color":"transparent","box-shadow":"none",color:"#1890ff"},attrs:{type:"text"},on:{click:function(e){return t.editGoods(a)}}},[t._v("编辑")])]}}])}),t.specsData.length<8?r("Button",{staticClass:"submission mr15 mt20",attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("添加商品")]):t._e()],1),r("FormItem",[r("div",{staticClass:"pl60 grey"},[t._v("\n                    奖品必须设置为8个，列表中拖拽可调整奖品在九宫中的位置\n                    "),r("Poptip",{attrs:{placement:"bottom",width:"380"}},[r("a",[t._v("查看位置示例图")]),r("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},[r("img",{attrs:{src:a("b0c0"),alt:""}})])])],1)])],1)],1),r("div",[3!=t.formValidate.factor&&4!=t.formValidate.factor?r("FormItem",{attrs:{prop:3!=t.formValidate.factor&&4!=t.formValidate.factor?"image":""}},[r("div",{staticClass:"custom-label",attrs:{slot:"label"},slot:"label"},[r("div",[r("div",[t._v("活动背景图")])]),r("div",[t._v("：")])]),r("div",{staticClass:"acea-row"},[t.formValidate.image?r("div",{staticClass:"pictrue"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formValidate.image,expression:"formValidate.image"}]}),r("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(e){return t.handleRemove()}}})],1):r("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:function(e){return t.modalPicTap("dan","danFrom")}}},[r("Icon",{staticClass:"iconfonts",attrs:{type:"ios-camera-outline",size:"26"}})],1)]),r("div",{staticStyle:{"margin-top":"14px","font-size":"12px","line-height":"12px",color:"#999999"}},[t._v("\n                  建议尺寸：750*750\n                ")])]):t._e(),3!=t.formValidate.factor&&4!=t.formValidate.factor?r("FormItem",{attrs:{label:"中奖名单：",prop:3!=t.formValidate.factor&&4!=t.formValidate.factor?"is_all_record":"","label-for":"is_all_record"}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,"element-id":"is_all_record",size:"large"},model:{value:t.formValidate.is_all_record,callback:function(e){t.$set(t.formValidate,"is_all_record",e)},expression:"formValidate.is_all_record"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1):t._e(),3!=t.formValidate.factor&&4!=t.formValidate.factor?r("FormItem",{attrs:{label:"个人中奖记录：",prop:3!=t.formValidate.factor&&4!=t.formValidate.factor?"is_personal_record":"","label-for":"is_personal_record"}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,"element-id":"is_personal_record",size:"large"},model:{value:t.formValidate.is_personal_record,callback:function(e){t.$set(t.formValidate,"is_personal_record",e)},expression:"formValidate.is_personal_record"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1):t._e(),3!=t.formValidate.factor&&4!=t.formValidate.factor?r("FormItem",{attrs:{label:"活动规则：",prop:"is_content","label-for":"is_content"}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,"element-id":"is_content",size:"large"},model:{value:t.formValidate.is_content,callback:function(e){t.$set(t.formValidate,"is_content",e)},expression:"formValidate.is_content"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1):t._e(),3!=t.formValidate.factor&&4!=t.formValidate.factor&&1==t.formValidate.is_content?r("FormItem",{attrs:{label:"",prop:3!=t.formValidate.factor&&4!=t.formValidate.factor&&1==t.formValidate.is_content?"content":""}},[r("WangEditor",{staticStyle:{width:"90%"},attrs:{content:t.formValidate.content},on:{editorContent:t.getEditorContent}})],1):t._e(),r("FormItem",{attrs:{label:"活动状态：",prop:"status","label-for":"status"}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,"element-id":"status",size:"large"},model:{value:t.formValidate.status,callback:function(e){t.$set(t.formValidate,"status",e)},expression:"formValidate.status"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1),t.spinShow?r("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)],1)],1),r("Card",{staticClass:"fixed-card",style:{left:t.menuCollapse?t.isMobile?"0":"80px":"200px"},attrs:{bordered:!1,"dis-hover":""}},[r("Form",[r("FormItem",{staticClass:"submit-form-item"},[r("Button",{staticClass:"submission",attrs:{type:"primary",loading:t.submitOpen},on:{click:function(e){return t.next("formValidate")}}},[t.submitOpen?r("div",[t._v("提交中")]):r("div",[t._v("提交")])])],1)],1)],1),r("Modal",{attrs:{scrollable:"",title:"请选择用户标签",closable:!1,width:"320","footer-hide":!0,"mask-closable":!1},model:{value:t.labelShow,callback:function(e){t.labelShow=e},expression:"labelShow"}},[r("userLabel",{ref:"userLabel",on:{activeData:t.activeData,close:t.labelClose}})],1),r("Modal",{attrs:{width:"960px",scrollable:"","footer-hide":"",closable:"",title:"上传商品图","mask-closable":!1,"z-index":1},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?r("uploadPictures",{attrs:{isChoice:t.isChoice},on:{getPic:t.getPic}}):t._e()],1),r("Modal",{attrs:{width:"60%",scrollable:"","footer-hide":"",closable:"",title:t.title,"mask-closable":!1,"z-index":1},model:{value:t.addGoodsModel,callback:function(e){t.addGoodsModel=e},expression:"addGoodsModel"}},[t.addGoodsModel?r("addGoods",{attrs:{editData:t.editData},on:{addGoodsData:t.addGoodsData}}):t._e()],1)],1)},n=[],i=a("1499"),o=i["a"],s=(a("2618"),a("2877")),l=Object(s["a"])(o,r,n,!1,null,"9ca2ca96",null);e["default"]=l.exports},eab1:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":90}},[a("FormItem",{attrs:{label:"奖品",prop:"type"}},[a("RadioGroup",{model:{value:t.formValidate.type,callback:function(e){t.$set(t.formValidate,"type",e)},expression:"formValidate.type"}},[a("Radio",{attrs:{label:1}},[t._v("未中奖")]),a("Radio",{attrs:{label:5}},[t._v("优惠券")]),a("Radio",{attrs:{label:2}},[t._v("积分")]),a("Radio",{attrs:{label:6}},[t._v("商品")]),a("Radio",{attrs:{label:4}},[t._v("红包")]),a("Radio",{attrs:{label:3}},[t._v("余额")])],1)],1),5==t.formValidate.type?a("FormItem",{attrs:{label:"赠送优惠券："}},[t.couponName.length?a("div",{staticClass:"mb20"},t._l(t.couponName,(function(e,r){return a("Tag",{key:r,attrs:{closable:""},on:{"on-close":function(a){return t.handleClose(e)}}},[t._v(t._s(e.title))])})),1):t._e(),t.couponName.length?t._e():a("Button",{attrs:{type:"primary"},on:{click:t.addCoupon}},[t._v("添加优惠券")])],1):t._e(),[2,3,4].includes(t.formValidate.type)?a("FormItem",{attrs:{label:[3,4].includes(t.formValidate.type)?"金额信息":"积分数量",prop:"num"}},[[3,4].includes(t.formValidate.type)?a("InputNumber",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入金额",max:4==t.formValidate.type?999:99999,min:1},model:{value:t.formValidate.num,callback:function(e){t.$set(t.formValidate,"num",e)},expression:"formValidate.num"}}):a("InputNumber",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入积分数量",max:4==t.formValidate.type?999:99999,min:1,precision:0},model:{value:t.formValidate.num,callback:function(e){t.$set(t.formValidate,"num",e)},expression:"formValidate.num"}}),a("div",{staticClass:"ml100 grey"},[t._v("\n          "+t._s(3==t.formValidate.type?"用户领取余额后会自动到账余额账户":4==t.formValidate.type?"用户领取红包后会自动到账微信零钱，添加此奖品需开通微信支付,并且账户中金额不能小于1元":"")+"\n        ")])],1):t._e(),6==t.formValidate.type?a("FormItem",{attrs:{label:"商品",prop:"goods_image"}},[t.formValidate.goods_image?[a("div",{staticClass:"upload-list"},[a("img",{attrs:{src:t.formValidate.goods_image}}),a("Icon",{attrs:{type:"ios-close-circle",size:"16"},on:{click:function(e){return t.removeGoods()}}})],1)]:a("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"},on:{click:function(e){t.modals=!0}}})],1)],2):t._e(),a("FormItem",{attrs:{label:"奖品名称",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{maxlength:10,placeholder:"请输入奖品名称"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),a("FormItem",{attrs:{label:"奖品图片",prop:"image"}},[t.formValidate.image?[a("div",{staticClass:"upload-list"},[a("img",{attrs:{src:t.formValidate.image}}),a("Icon",{attrs:{type:"ios-close-circle",size:"16"},on:{click:function(e){return t.remove()}}})],1)]:a("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"},on:{click:function(e){t.modalPic=!0}}})],1)],2),a("FormItem",{attrs:{label:"奖品数量",prop:"total"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入奖品数量",max:99999,min:0,precision:0},model:{value:t.formValidate.total,callback:function(e){t.$set(t.formValidate,"total",e)},expression:"formValidate.total"}})],1),a("FormItem",{attrs:{label:"奖品权重",prop:"chance"}},[a("InputNumber",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入奖品权重",max:100,min:1,precision:0},model:{value:t.formValidate.chance,callback:function(e){t.$set(t.formValidate,"chance",e)},expression:"formValidate.chance"}})],1),a("FormItem",{attrs:{label:"提示语",prop:"prompt"}},[a("Input",{staticStyle:{width:"300px"},attrs:{maxlength:15,placeholder:"请输入提示语"},model:{value:t.formValidate.prompt,callback:function(e){t.$set(t.formValidate,"prompt",e)},expression:"formValidate.prompt"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("提交")])],1)],1),a("Modal",{attrs:{width:"960px",scrollable:"","footer-hide":"",closable:"",title:"上传图片","mask-closable":!1,"z-index":1},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?a("uploadPictures",{attrs:{isChoice:t.isChoice},on:{getPic:t.getPic}}):t._e()],1),a("Modal",{staticClass:"paymentFooter",attrs:{title:"商品列表",footerHide:"",scrollable:"",width:"900"},on:{"on-cancel":t.cancel},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.modals?a("goods-list",{ref:"goodslist",on:{getProductId:t.getProductId}}):t._e()],1),a("coupon-list",{ref:"couponTemplates",attrs:{luckDraw:!0},on:{getCouponId:t.getCouponId}})],1)},n=[],i=a("e449"),o=a("b0e7"),s=a("c4ad"),l=a("5334"),c={components:{uploadPictures:o["a"],goodsList:s["default"],freightTemplate:l["a"],couponList:i["a"]},data:function(){return{modalPic:!1,modals:!1,isChoice:"单选",updateIds:[],updateName:[],goodsData:{pic:"",product_id:"",img:"",coverImg:""},formValidate:{type:5,name:"",num:0,image:"",chance:1,product_id:0,coupon_id:0,total:0,prompt:"",goods_image:"",coupon_title:""},ruleValidate:{name:[{required:!0,message:"奖品名称",trigger:"blur"}],goods_image:[{required:!0,message:"请添加商品",trigger:"blur"}],num:[{required:!0,type:"number",message:"请输入金额数量",trigger:"blur"}],chance:[{required:!0,type:"number",message:"请输入奖品权重",trigger:"blur"}],image:[{required:!0,message:"请选择奖品图片",trigger:"blur"}],prompt:[{required:!0,message:"请输入提示语",trigger:"blur"}]},couponName:[]}},props:{editData:{type:Object,default:function(){}}},watch:{editData:function(t){console.log(t)}},mounted:function(){var t=this,e=Object.keys(this.editData);e.forEach((function(e){t.formValidate[e]=t.editData[e],"coupon_title"===e&&t.editData[e]&&t.couponName.push({title:t.editData[e],id:t.editData.coupon_id})}))},methods:{getCouponId:function(t){console.log(t),this.formValidate.coupon_id=t.id,this.formValidate.coupon_title=t.coupon_title;var e=[];e.push(t),this.couponName=e},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?(e.$emit("addGoodsData",e.formValidate),e.$Message.success("添加成功")):e.$Message.warning("请完善数据")}))},getPic:function(t){console.log(t),this.formValidate.image=t.att_dir,this.modalPic=!1},modalPicTap:function(){this.modalPic=!0},cancel:function(){this.modals=!1},getProductId:function(t){this.formValidate.product_id=t.id,this.formValidate.goods_image=t.image,this.modals=!1},removeGoods:function(){this.formValidate.product_id="",this.formValidate.goods_image=""},remove:function(){this.formValidate.image=""},addCoupon:function(){this.$refs.couponTemplates.isTemplate=!0,this.$refs.couponTemplates.tableList()},handleClose:function(t){this.couponName.splice(0,1),this.formValidate.coupon_id=0},unique:function(t){var e=new Map;return t.filter((function(t){return!e.has(t.id)&&e.set(t.id,1)}))}}},u=c,d=(a("5f3b"),a("2877")),m=Object(d["a"])(u,r,n,!1,null,"0190e5ae",null);e["a"]=m.exports}}]);