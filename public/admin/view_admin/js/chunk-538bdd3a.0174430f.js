(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-538bdd3a"],{"28a0":function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},"2e86":function(t,e,r){},3022:function(t,e,r){(function(t){var i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},i=0;i<e.length;i++)r[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return r},a=/%[sdj%]/g;e.format=function(t){if(!C(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var i=arguments,n=i.length,o=String(t).replace(a,(function(t){if("%%"===t)return"%";if(r>=n)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return t}})),l=i[r];r<n;l=i[++r])y(l)||!P(l)?o+=" "+l:o+=" "+s(l);return o},e.deprecate=function(r,i){if("undefined"!==typeof t&&!0===t.noDeprecation)return r;if("undefined"===typeof t)return function(){return e.deprecate(r,i).apply(this,arguments)};var a=!1;function n(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return r.apply(this,arguments)}return n};var n,o={};function s(t,r){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),v(r)?i.showHidden=r:r&&e._extend(i,r),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=l),p(i,t,i.depth)}function l(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function c(t,e){return t}function u(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}function p(t,r,i){if(t.customInspect&&r&&j(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var a=r.inspect(i,t);return C(a)||(a=p(t,a,i)),a}var n=d(t,r);if(n)return n;var o=Object.keys(r),s=u(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(r)),E(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return m(r);if(0===o.length){if(j(r)){var l=r.name?": "+r.name:"";return t.stylize("[Function"+l+"]","special")}if(O(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(k(r))return t.stylize(Date.prototype.toString.call(r),"date");if(E(r))return m(r)}var c,v="",y=!1,_=["{","}"];if(b(r)&&(y=!0,_=["[","]"]),j(r)){var w=r.name?": "+r.name:"";v=" [Function"+w+"]"}return O(r)&&(v=" "+RegExp.prototype.toString.call(r)),k(r)&&(v=" "+Date.prototype.toUTCString.call(r)),E(r)&&(v=" "+m(r)),0!==o.length||y&&0!=r.length?i<0?O(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=y?f(t,r,i,s,o):o.map((function(e){return g(t,r,i,s,e,y)})),t.seen.pop(),h(c,v,_)):_[0]+v+_[1]}function d(t,e){if(x(e))return t.stylize("undefined","undefined");if(C(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return w(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function m(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,i,a){for(var n=[],o=0,s=e.length;o<s;++o)F(e,String(o))?n.push(g(t,e,r,i,String(o),!0)):n.push("");return a.forEach((function(a){a.match(/^\d+$/)||n.push(g(t,e,r,i,a,!0))})),n}function g(t,e,r,i,a,n){var o,s,l;if(l=Object.getOwnPropertyDescriptor(e,a)||{value:e[a]},l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),F(i,a)||(o="["+a+"]"),s||(t.seen.indexOf(l.value)<0?(s=y(r)?p(t,l.value,null):p(t,l.value,r-1),s.indexOf("\n")>-1&&(s=n?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n"))):s=t.stylize("[Circular]","special")),x(o)){if(n&&a.match(/^\d+$/))return s;o=JSON.stringify(""+a),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+s}function h(t,e,r){var i=t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function b(t){return Array.isArray(t)}function v(t){return"boolean"===typeof t}function y(t){return null===t}function _(t){return null==t}function w(t){return"number"===typeof t}function C(t){return"string"===typeof t}function V(t){return"symbol"===typeof t}function x(t){return void 0===t}function O(t){return P(t)&&"[object RegExp]"===S(t)}function P(t){return"object"===typeof t&&null!==t}function k(t){return P(t)&&"[object Date]"===S(t)}function E(t){return P(t)&&("[object Error]"===S(t)||t instanceof Error)}function j(t){return"function"===typeof t}function I(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t}function S(t){return Object.prototype.toString.call(t)}function D(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(x(n)&&(n=Object({NODE_ENV:"production",VUE_APP_API_URL:"",VUE_APP_BUILD_TIME:"2022-5-17 18:48:48",VUE_APP_ENV:"production",VUE_APP_TITLE:"CRMEB",VUE_APP_VERSION:"2.0.0",VUE_APP_WS_ADMIN_URL:"",VUE_APP_WS_KEFU_URL:"",BASE_URL:"/admin/"}).NODE_DEBUG||""),r=r.toUpperCase(),!o[r])if(new RegExp("\\b"+r+"\\b","i").test(n)){var i=t.pid;o[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,i,t)}}else o[r]=function(){};return o[r]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=b,e.isBoolean=v,e.isNull=y,e.isNullOrUndefined=_,e.isNumber=w,e.isString=C,e.isSymbol=V,e.isUndefined=x,e.isRegExp=O,e.isObject=P,e.isDate=k,e.isError=E,e.isFunction=j,e.isPrimitive=I,e.isBuffer=r("d60a");var $=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var t=new Date,e=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),$[t.getMonth()],e].join(" ")}function F(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",T(),e.format.apply(e,arguments))},e.inherits=r("28a0"),e._extend=function(t,e){if(!e||!P(e))return t;var r=Object.keys(e),i=r.length;while(i--)t[r[i]]=e[r[i]];return t};var U="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function z(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function N(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var a=r.pop();if("function"!==typeof a)throw new TypeError("The last argument must be of type Function");var n=this,o=function(){return a.apply(n,arguments)};e.apply(this,r).then((function(e){t.nextTick(o,null,e)}),(function(e){t.nextTick(z,e,o)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,i(e)),r}e.promisify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');if(U&&t[U]){var e=t[U];if("function"!==typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,U,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,i=new Promise((function(t,i){e=t,r=i})),a=[],n=0;n<arguments.length;n++)a.push(arguments[n]);a.push((function(t,i){t?r(t):e(i)}));try{t.apply(this,a)}catch(o){r(o)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),U&&Object.defineProperty(e,U,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},e.promisify.custom=U,e.callbackify=N}).call(this,r("f28c"))},"405e":function(t,e,r){"use strict";var i=r("2e86"),a=r.n(i);a.a},"93a9":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-submit"},[r("div",{staticClass:"i-layout-page-header"},[r("PageHeader",{staticClass:"product_tabs",attrs:{"hidden-breadcrumb":""}},[r("div",{attrs:{slot:"title"},slot:"title"},[r("router-link",{attrs:{to:{path:"/admin/marketing/store_seckill/index"}}},[r("div",{staticClass:"font-sm after-line"},[r("span",{staticClass:"iconfont iconfanhui"}),r("span",{staticClass:"pl10"},[t._v("返回")])])]),r("span",{staticClass:"mr20 ml16",domProps:{textContent:t._s(t.$route.params.id?"编辑秒杀商品":"添加秒杀商品")}})],1)])],1),r("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[r("Row",{staticClass:"mt30 acea-row row-middle row-center",attrs:{type:"flex"}},[r("Col",{attrs:{span:"20"}},[r("Steps",{attrs:{current:t.current}},[r("Step",{attrs:{title:"选择秒杀商品"}}),r("Step",{attrs:{title:"填写基础信息"}}),r("Step",{attrs:{title:"修改商品详情"}})],1)],1),r("Col",{attrs:{span:"23"}},[r("Col",{attrs:{span:"24"}},[r("div",{staticClass:"lines",staticStyle:{"margin-top":"25px"}})]),r("Form",{ref:"formValidate",staticClass:"form mt30",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[0===t.current?r("FormItem",{attrs:{label:"选择商品：",prop:"image_input"}},[r("div",{staticClass:"picBox",on:{click:t.changeGoods}},[t.formValidate.image?r("div",{staticClass:"pictrue"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formValidate.image,expression:"formValidate.image"}]})]):r("div",{staticClass:"upLoad acea-row row-center-wrapper"},[r("Icon",{staticClass:"iconfonts",attrs:{type:"ios-camera-outline",size:"26"}})],1)])]):t._e(),r("Col",{directives:[{name:"show",rawName:"v-show",value:1===t.current,expression:"current === 1"}],attrs:{type:"flex"}},[r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"秒杀活动名称：",prop:"title","label-for":"title"}},[r("Input",{staticClass:"perW40",attrs:{placeholder:"请输入秒杀活动名称","element-id":"title"},model:{value:t.formValidate.title,callback:function(e){t.$set(t.formValidate,"title",e)},expression:"formValidate.title"}})],1)],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"秒杀活动简介：",prop:"info","label-for":"info"}},[r("Input",{staticClass:"perW40",attrs:{placeholder:"请输入秒杀活动简介",type:"textarea",rows:4,"element-id":"info"},model:{value:t.formValidate.info,callback:function(e){t.$set(t.formValidate,"info",e)},expression:"formValidate.info"}})],1)],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"单位：",prop:"unit_name","label-for":"unit_name"}},[r("Select",{staticClass:"perW40",attrs:{clearable:"",placeholder:"请选择单位"},model:{value:t.formValidate.unit_name,callback:function(e){t.$set(t.formValidate,"unit_name",e)},expression:"formValidate.unit_name"}},t._l(t.unitNameList,(function(e,i){return r("Option",{key:i,attrs:{value:e.name}},[t._v(t._s(e.name))])})),1),r("span",{staticClass:"addClass",on:{click:t.addUnit}},[t._v("新增单位")])],1)],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{prop:"images"}},[r("div",{staticClass:"custom-label",attrs:{slot:"label"},slot:"label"},[r("div",[r("div",[t._v("商品轮播图")])]),r("div",[t._v("：")])]),r("div",{staticClass:"acea-row"},[t._l(t.formValidate.images,(function(e,i){return r("div",{key:i,staticClass:"pictrue",attrs:{draggable:"true"},on:{dragstart:function(r){return t.handleDragStart(r,e)},dragover:function(r){return r.preventDefault(),t.handleDragOver(r,e)},dragenter:function(r){return t.handleDragEnter(r,e)},dragend:function(r){return t.handleDragEnd(r,e)}}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"item"}]}),r("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(e){return t.handleRemove(i)}}})],1)})),t.formValidate.images.length<10?r("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:function(e){return t.modalPicTap("duo")}}},[r("Icon",{staticClass:"iconfonts",attrs:{type:"ios-camera-outline",size:"26"}})],1):t._e()],2),r("div",{staticClass:"tips"},[t._v(" 建议尺寸：800 * 800px，可拖拽改变图片顺序，默认首张图为主图，最多上传10张")])])],1),r("Col",{attrs:{span:"24"}},[r("div",{staticClass:"lines"})]),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"活动时间：",prop:"section_time"}},[r("div",{staticClass:"acea-row row-middle"},[r("DatePicker",{staticClass:"perW40",attrs:{editable:!1,type:"daterange",format:"yyyy-MM-dd",placeholder:"请选择活动时间",value:t.formValidate.section_time},on:{"on-change":t.onchangeTime},model:{value:t.formValidate.section_time,callback:function(e){t.$set(t.formValidate,"section_time",e)},expression:"formValidate.section_time"}})],1),r("div",{staticClass:"tips"},[t._v("设置活动开启结束时间，用户可以在有效时间内参与秒杀")])])],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"开始时间：",prop:"time_id"}},[r("div",{staticClass:"acea-row row-middle"},[r("Select",{staticClass:"perW40",model:{value:t.formValidate.time_id,callback:function(e){t.$set(t.formValidate,"time_id",e)},expression:"formValidate.time_id"}},t._l(t.timeList,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.time)+"点开始,持续"+t._s(e.continued)+"小时")])})),1)],1),r("div",{staticClass:"tips"},[t._v("选择产品开始时间段，该时间段内用户可参与购买；其它时间段会显示活动未开始或已结束。如活动超过一天，则活动期内，每天都会定时开启")])])],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"总购买数量限制：",prop:"num"}},[r("div",{staticClass:"acea-row row-middle"},[r("InputNumber",{staticClass:"perW40",attrs:{min:1,placeholder:"请输入数量限制","element-id":"num",precision:0},model:{value:t.formValidate.num,callback:function(e){t.$set(t.formValidate,"num",e)},expression:"formValidate.num"}}),r("span",{staticClass:"ml10"},[t._v("个")])],1),r("div",{staticClass:"tips"},[t._v("活动有效期内每个用户可购买该商品总数限制。例如设置为4，表示本次活动有效期内，每个用户最多可购买总数4个")])])],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"单次购买数量限制：",prop:"once_num"}},[r("div",{staticClass:"acea-row row-middle"},[r("InputNumber",{staticClass:"perW40",attrs:{min:1,placeholder:"请输入单次购买数量限制","element-id":"once_num",precision:0},model:{value:t.formValidate.once_num,callback:function(e){t.$set(t.formValidate,"once_num",e)},expression:"formValidate.once_num"}}),r("span",{staticClass:"ml10"},[t._v("个")])],1),r("div",{staticClass:"tips"},[t._v("用户参与秒杀时，一次购买最大数量限制。例如设置为2，表示参与秒杀时，用户一次购买数量最大可选择2个")])])],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"规格选择："}},[r("Table",{staticClass:"mt25",attrs:{data:t.specsData,columns:t.columns,border:"","highlight-row":""},on:{"on-selection-change":t.changeCheckbox},scopedSlots:t._u([{key:"pic",fn:function(e){var i=e.row,a=e.index;return[r("div",{staticClass:"acea-row row-middle row-center-wrapper",on:{click:function(e){return t.modalPicTap("dan","danTable",a)}}},[i.pic?r("div",{staticClass:"pictrue pictrueTab"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.pic,expression:"row.pic"}]})]):r("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[r("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"21"}})],1)])]}}])})],1)],1),r("Col",{attrs:{span:"24"}},[r("div",{staticClass:"lines"})]),0==t.formValidate.product_type?r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"配送方式："}},[r("CheckboxGroup",{model:{value:t.formValidate.delivery_type,callback:function(e){t.$set(t.formValidate,"delivery_type",e)},expression:"formValidate.delivery_type"}},[r("Checkbox",{attrs:{label:"1",disabled:""}},[t._v("快递")]),r("Checkbox",{attrs:{label:"3"}},[t._v("门店配送")]),r("Checkbox",{attrs:{label:"2"}},[t._v("到店自提")])],1)],1)],1):t._e(),0==t.formValidate.product_type?r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"运费设置："}},[r("RadioGroup",{model:{value:t.formValidate.freight,callback:function(e){t.$set(t.formValidate,"freight",e)},expression:"formValidate.freight"}},[r("Radio",{attrs:{label:1}},[t._v("包邮")]),r("Radio",{attrs:{label:2}},[t._v("固定邮费")]),r("Radio",{attrs:{label:3}},[t._v("运费模板")])],1)],1)],1):t._e(),2==t.formValidate.freight&&0==t.formValidate.product_type?r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"",prop:"freight"}},[r("div",{staticClass:"acea-row row-middle"},[r("InputNumber",{staticClass:"perW20 maxW",attrs:{min:0,placeholder:"请输入金额"},model:{value:t.formValidate.postage,callback:function(e){t.$set(t.formValidate,"postage",e)},expression:"formValidate.postage"}}),r("span",{staticClass:"ml10"},[t._v("元")])],1)])],1):t._e(),3==t.formValidate.freight&&0==t.formValidate.product_type?r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"",prop:""}},[r("div",{staticClass:"acea-row"},[r("Select",{staticClass:"perW20 maxW",attrs:{clearable:""},model:{value:t.formValidate.temp_id,callback:function(e){t.$set(t.formValidate,"temp_id",e)},expression:"formValidate.temp_id"}},t._l(t.templateList,(function(e,i){return r("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1),r("Button",{staticClass:"ml15",on:{click:t.addTemp}},[t._v("添加运费模板")])],1)])],1):t._e(),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"排序："}},[r("InputNumber",{staticClass:"perW20 maxW",attrs:{placeholder:"请输入排序","element-id":"sort",precision:0,min:0},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1)],1),r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"活动状态：",props:"status","label-for":"status"}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.formValidate.status,callback:function(e){t.$set(t.formValidate,"status",e)},expression:"formValidate.status"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1),t.formValidate.product_type?r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"支持退款：",props:"status","label-for":"status"}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.formValidate.is_support_refund,callback:function(e){t.$set(t.formValidate,"is_support_refund",e)},expression:"formValidate.is_support_refund"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1):t._e()],1),r("Row",{directives:[{name:"show",rawName:"v-show",value:2===t.current,expression:"current === 2"}]},[r("Col",{attrs:{span:"24"}},[r("FormItem",{attrs:{label:"内容："}},[r("WangEditor",{staticStyle:{width:"90%"},attrs:{content:t.formValidate.description},on:{editorContent:t.getEditorContent}})],1)],1)],1)],1),t.spinShow?r("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)],1),r("Card",{staticClass:"fixed-card",style:{left:t.menuCollapse?t.isMobile?"0":"80px":"200px"},attrs:{bordered:!1,"dis-hover":""}},[r("Form",[r("FormItem",[r("Button",{directives:[{name:"show",rawName:"v-show",value:0!==t.current,expression:"current !== 0"}],staticClass:"submission mr15",attrs:{disabled:t.$route.params.id&&1===t.current},on:{click:t.step}},[t._v("上一步\n                    ")]),r("Button",{staticClass:"submission",attrs:{disabled:t.submitOpen&&2===t.current,type:"primary"},domProps:{textContent:t._s(2===t.current?"提交":"下一步")},on:{click:function(e){return t.next("formValidate")}}})],1)],1)],1),r("Modal",{staticClass:"paymentFooter",attrs:{title:"商品列表",footerHide:"",scrollable:"",width:"900"},on:{"on-cancel":t.cancel},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[r("goods-list",{ref:"goodslist",attrs:{goodsType:1},on:{getProductId:t.getProductId}})],1),r("Modal",{attrs:{width:"960px;",scrollable:"","footer-hide":"",closable:"",title:"上传商品图","mask-closable":!1,"z-index":1},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?r("uploadPictures",{attrs:{isChoice:t.isChoice,gridBtn:t.gridBtn,gridPic:t.gridPic},on:{getPic:t.getPic,getPicD:t.getPicD}}):t._e()],1),r("freightTemplate",{ref:"templates",attrs:{template:t.template},on:{changeTemplate:t.changeTemplate}})],1)},a=[],n=r("a34a"),o=r.n(n),s=r("2f62"),l=r("c4ad"),c=r("ef0d"),u=r("a069"),p=r("b0e7"),d=r("b7be"),m=r("c4c8"),f=r("5334");r("3022");function g(t){return v(t)||b(t)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function b(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function v(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function y(t,e,r,i,a,n,o){try{var s=t[n](o),l=s.value}catch(c){return void r(c)}s.done?e(l):Promise.resolve(l).then(i,a)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var n=t.apply(e,r);function o(t){y(n,i,a,o,s,"next",t)}function s(t){y(n,i,a,o,s,"throw",t)}o(void 0)}))}}function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(r,!0).forEach((function(e){V(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function V(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var x={name:"storeSeckillCreate",components:{UeditorWrap:c["a"],goodsList:l["default"],uploadPictures:p["a"],WangEditor:u["a"],freightTemplate:f["a"]},data:function(){return{template:!1,submitOpen:!1,spinShow:!1,isChoice:"",current:0,modalPic:!1,grid:{xl:12,lg:20,md:24,sm:24,xs:24},grid2:{xl:8,lg:12,md:12,sm:24,xs:24},gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},myConfig:{autoHeightEnabled:!1,initialFrameHeight:500,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/admin/UEditor/",serverUrl:""},modals:!1,modal_loading:!1,images:[],unitNameList:[],formValidate:{is_support_refund:0,product_type:0,freight:1,delivery_type:["1"],images:[],info:"",title:"",image:"",unit_name:"",price:0,ot_price:0,cost:0,sales:0,stock:0,sort:0,num:1,once_num:1,give_integral:0,postage:0,section_time:[],is_postage:0,is_hot:0,status:0,description:"",id:0,product_id:0,temp_id:"",time_id:"",attrs:[],items:[]},description:"",templateList:[],timeList:[],columns:[],specsData:[],picTit:"",tableIndex:0,ruleValidate:{image:[{required:!0,message:"请选择主图",trigger:"change"}],images:[{required:!0,type:"array",message:"请选择主图",trigger:"change"},{type:"array",min:1,message:"Choose two hobbies at best",trigger:"change"}],title:[{required:!0,message:"请输入商品标题",trigger:"blur"}],info:[{required:!0,message:"请输入秒杀活动简介",trigger:"blur"}],section_time:[{required:!0,type:"array",message:"请选择活动时间",trigger:"change"}],unit_name:[{required:!0,message:"请选择单位",trigger:"change"}],price:[{required:!0,type:"number",message:"请输入秒杀价",trigger:"blur"}],ot_price:[{required:!0,type:"number",message:"请输入原价",trigger:"blur"}],cost:[{required:!0,type:"number",message:"请输入成本价",trigger:"blur"}],stock:[{required:!0,type:"number",message:"请输入库存",trigger:"blur"}],num:[{required:!0,type:"number",message:"请输入购买数量限制",trigger:"blur"}],once_num:[{required:!0,type:"number",message:"请输入单次购买数量限制",trigger:"blur"}],time_id:[{required:!0,message:"请选择开始时间",trigger:"change",type:"number"}]},copy:0}},computed:C({},Object(s["e"])("admin/layout",["isMobile","menuCollapse"]),{labelWidth:function(){return this.isMobile?void 0:135},labelPosition:function(){return this.isMobile?"top":"right"}}),mounted:function(){this.$route.params.id&&(this.copy=this.$route.params.copy,this.current=1,this.getInfo()),this.productGetTemplate(),this.seckillTimeList(),this.getAllUnit()},methods:{changeTemplate:function(t){this.template=t},addTemp:function(){this.$refs.templates.isTemplate=!0},addUnit:function(){var t=this;this.$modalForm(Object(m["bb"])()).then((function(){return t.getAllUnit()}))},getAllUnit:function(){var t=this;Object(m["x"])().then((function(e){t.unitNameList=e.data})).catch((function(e){t.$Message.error(e.msg)}))},getEditorContent:function(t){this.description=t},productAttrs:function(t){var e=this;Object(d["Q"])(t.id,1).then((function(t){var r=t.data.info,i={type:"selection",width:60,align:"center"};e.specsData=r.attrs,e.specsData.forEach((function(t,r){e.$set(e.specsData[r],"id",r)})),e.formValidate.items=r.items,e.columns=r.header,e.columns.unshift(i),e.inputChange(r)})).catch((function(t){e.$Message.error(t.msg)}))},inputChange:function(t){var e=this,r=[];t.header.forEach((function(t,e){1===t.type&&r.push({index:e,key:t.key,title:t.title})})),r.forEach((function(t,r){var i=t.title,a=t.key,n={title:i,key:a,align:"center",minWidth:120,render:function(t,r){return t("div",[t("InputNumber",{props:{min:0,value:"price"===a?r.row.price:r.row.quota},on:{"on-change":function(t){"price"===a?r.row.price=t:r.row.quota=t,e.specsData[r.index]=r.row,e.formValidate.attrs&&e.formValidate.attrs.length&&e.formValidate.attrs.forEach((function(t,i){t.id===r.row.id&&e.formValidate.attrs.splice(i,1,r.row)}))}}})])}};e.columns.splice(t.index,1,n)}))},changeCheckbox:function(t){this.formValidate.attrs=t},seckillTimeList:function(){var t=this;Object(d["Z"])().then((function(e){t.timeList=e.data.list.data})).catch((function(e){t.$Message.error(e.msg)}))},productGetTemplate:function(){var t=this;Object(m["L"])().then((function(e){t.templateList=e.data}))},validate:function(t,e,r){!1===e&&this.$Message.error(r)},getProductId:function(t){var e=this;this.modal_loading=!1,this.modals=!1,setTimeout((function(){e.formValidate={is_support_refund:t.is_support_refund,product_type:t.product_type,images:t.slider_image,info:t.store_info,title:t.store_name,image:t.image,unit_name:t.unit_name,price:0,ot_price:t.ot_price,cost:t.cost,sales:t.sales,stock:t.stock,sort:t.sort,num:1,once_num:1,give_integral:t.give_integral,postage:t.postage,section_time:[],is_postage:t.is_postage,is_hot:t.is_hot,status:0,description:t.description,id:0,product_id:t.id,temp_id:t.temp_id,freight:1,delivery_type:["1"]},e.productAttrs(t),e.$refs.goodslist.productRow=null}),500),this.description=t.description},cancel:function(){this.modals=!1},onchangeTime:function(t){this.formValidate.section_time=t},getInfo:function(){var t=this;this.spinShow=!0,Object(d["W"])(this.$route.params.id).then(function(){var e=_(o.a.mark((function e(r){var i,a,n,s,l,c;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(c in i=t,a=r.data.info,n={type:"selection",width:60,align:"center"},t.description=a.description,t.formValidate=a,t.$set(t.formValidate,"items",a.attrs.items),t.columns=a.attrs.header,t.columns.unshift(n),t.specsData=a.attrs.value,i.specsData.forEach((function(t,e){i.$set(i.specsData[e],"id",e)})),s=a.attrs,l=[],a.attrs.value)a.attrs.value[c]._checked&&l.push(a.attrs.value[c]);i.formValidate.attrs=l,i.inputChange(s),t.spinShow=!1;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))},next:function(t){var e=this;console.log("unit_name",this.formValidate.unit_name);var r=this;2===this.current?(this.formValidate.description=this.description,this.$refs[t].validate((function(t){if(!t)return!1;1==e.copy&&(e.formValidate.copy=1),e.formValidate.id=Number(e.$route.params.id)||0,e.submitOpen=!0,e.formValidate.product_type||(e.formValidate.is_support_refund=1),Object(d["V"])(e.formValidate).then(function(){var t=_(o.a.mark((function t(r){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.submitOpen=!1,e.$Message.success(r.msg),setTimeout((function(){e.$router.push({path:"/admin/marketing/store_seckill/index"})}),500);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.submitOpen=!1,e.$Message.error(t.msg)}))}))):1===this.current?this.$refs[t].validate((function(t){if(!t)return e.$Message.warning("请完善商品信息");if(!r.formValidate.attrs)return r.$Message.error("请选择属性规格");for(var i in r.formValidate.attrs)if(r.formValidate.attrs[i].quota<=0)return r.$Message.error("秒杀限量必须大于0");return 0==e.formValidate.product_type&&2==e.formValidate.freight&&e.formValidate.postage<=0?e.$Message.warning("物流设置-固定邮费不能为0"):0!=e.formValidate.product_type||3!=e.formValidate.freight||e.formValidate.temp_id?void(e.current+=1):e.$Message.warning("物流设置-运费模板不能为空")})):this.formValidate.image?this.current+=1:this.$Message.warning("请选择商品")},step:function(){this.current--},getContent:function(t){this.formValidate.description=t},modalPicTap:function(t,e,r){this.modalPic=!0,this.isChoice="dan"===t?"单选":"多选",this.picTit=e,this.tableIndex=r},getPic:function(t){switch(this.picTit){case"danFrom":this.formValidate.image=t.att_dir;break;default:this.formValidate.attrs&&this.formValidate.attrs.length&&this.$set(this.specsData[this.tableIndex],"_checked",!0),this.specsData[this.tableIndex].pic=t.att_dir}this.modalPic=!1},getPicD:function(t){var e=this;this.images=t,this.images.map((function(t){e.formValidate.images.push(t.att_dir),e.formValidate.images=e.formValidate.images.splice(0,10)})),this.modalPic=!1},handleRemove:function(t){this.images.splice(t,1),this.formValidate.images.splice(t,1)},changeGoods:function(){this.modals=!0},handleDragStart:function(t,e){this.dragging=e},handleDragEnd:function(t,e){this.dragging=null},handleDragOver:function(t){t.dataTransfer.dropEffect="move"},handleDragEnter:function(t,e){if(t.dataTransfer.effectAllowed="move",e!==this.dragging){var r=g(this.formValidate.images),i=r.indexOf(this.dragging),a=r.indexOf(e);r.splice.apply(r,[a,0].concat(g(r.splice(i,1)))),this.formValidate.images=r}},addCustomDialog:function(t){window.UE.registerUI("test-dialog",(function(t,e){var r=new window.UE.ui.Dialog({iframeUrl:"/admin/widget.images/index.html?fodder=dialog",editor:t,name:e,title:"上传图片",cssRules:"width:1200px;height:500px;padding:20px;"});this.dialog=r;var i=new window.UE.ui.Button({name:"dialog-button",title:"上传图片",cssRules:"background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;",onclick:function(){r.render(),r.open()}});return i}),37,t)}}},O=x,P=(r("405e"),r("2877")),k=Object(P["a"])(O,i,a,!1,null,"07121d6c",null);e["default"]=k.exports},d60a:function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}}}]);