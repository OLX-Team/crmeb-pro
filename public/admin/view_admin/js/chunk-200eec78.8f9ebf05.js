(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-200eec78"],{1336:function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"d",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return l})),n.d(e,"h",(function(){return u})),n.d(e,"g",(function(){return d}));var i=n("b6bd");function r(t){return Object(i["a"])({url:"cms/cms",method:"get",params:t})}function a(t){return Object(i["a"])({url:"cms/cms",method:"post",data:t})}function s(t){return Object(i["a"])({url:"cms/cms/".concat(t),method:"get"})}function c(){return Object(i["a"])({url:"cms/category/create",method:"GET"})}function o(t){return Object(i["a"])({url:"cms/category",method:"GET",params:t})}function l(t){return Object(i["a"])({url:"cms/category/".concat(t,"/edit"),method:"GET"})}function u(t){return Object(i["a"])({url:"cms/category/set_status/".concat(t.id,"/").concat(t.status),method:"put"})}function d(t,e){return Object(i["a"])({url:"cms/cms/relation/".concat(e),method:"put",data:t})}},"38ae":function(t,e,n){},"72a3":function(t,e,n){"use strict";var i=n("38ae"),r=n.n(i);r.a},"7af3":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Modal",{attrs:{scrollable:"",closable:"",title:"选择链接","mask-closable":!1,width:"860"},on:{"on-cancel":t.cancel},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[n("div",{staticClass:"table_box"},[n("div",{staticClass:"left_box"},[n("Tree",{attrs:{data:t.categoryData},on:{"on-select-change":t.handleCheckChange}})],1),"link"==t.currenType?n("div",{staticClass:"right_box"},[t.basicsList.length?n("div",[n("div",{staticClass:"cont"},[t._v("基础链接")]),n("div",{staticClass:"Box"},t._l(t.basicsList,(function(e,i){return n("div",{key:i,staticClass:"cont_box",class:t.currenId==e.id?"on":"",on:{click:function(n){return t.getUrl(e)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.userList.length?n("div",[n("div",{staticClass:"cont"},[t._v("个人中心")]),n("div",{staticClass:"Box"},t._l(t.userList,(function(e,i){return n("div",{key:i,staticClass:"cont_box",class:t.currenId==e.id?"on":"",on:{click:function(n){return t.getUrl(e)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.distributionList.length?n("div",[n("div",{staticClass:"cont"},[t._v("分销")]),n("div",{staticClass:"Box"},t._l(t.distributionList,(function(e,i){return n("div",{key:i,staticClass:"cont_box",class:t.currenId==e.id?"on":"",on:{click:function(n){return t.getUrl(e)}}},[t._v(t._s(e.name))])})),0)]):t._e()]):t._e(),"marketing_link"==t.currenType?n("div",{staticClass:"right_box"},[t.coupon.length?n("div",[n("div",{staticClass:"cont"},[t._v("优惠券")]),n("div",{staticClass:"Box"},t._l(t.coupon,(function(e,i){return n("div",{key:i,staticClass:"cont_box",class:t.currenId==e.id?"on":"",on:{click:function(n){return t.getUrl(e)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.basicsList.length?n("div",[n("div",{staticClass:"cont"},[t._v("秒杀")]),n("div",{staticClass:"Box"},t._l(t.basicsList,(function(e,i){return n("div",{key:i,staticClass:"cont_box",class:t.currenId==e.id?"on":"",on:{click:function(n){return t.getUrl(e)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.distributionList.length?n("div",[n("div",{staticClass:"cont"},[t._v("砍价")]),n("div",{staticClass:"Box"},t._l(t.distributionList,(function(e,i){return n("div",{key:i,staticClass:"cont_box",class:t.currenId==e.id?"on":"",on:{click:function(n){return t.getUrl(e)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.userList.length?n("div",[n("div",{staticClass:"cont"},[t._v("拼团")]),n("div",{staticClass:"Box"},t._l(t.userList,(function(e,i){return n("div",{key:i,staticClass:"cont_box",class:t.currenId==e.id?"on":"",on:{click:function(n){return t.getUrl(e)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.presale.length?n("div",[n("div",{staticClass:"cont"},[t._v("预售")]),n("div",{staticClass:"Box"},t._l(t.presale,(function(e,i){return n("div",{key:i,staticClass:"cont_box",class:t.currenId==e.id?"on":"",on:{click:function(n){return t.getUrl(e)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.integral.length?n("div",[n("div",{staticClass:"cont"},[t._v("积分")]),n("div",{staticClass:"Box"},t._l(t.integral,(function(e,i){return n("div",{key:i,staticClass:"cont_box",class:t.currenId==e.id?"on":"",on:{click:function(n){return t.getUrl(e)}}},[t._v(t._s(e.name))])})),0)]):t._e(),t.luckDraw.length?n("div",[n("div",{staticClass:"cont"},[t._v("抽奖")]),n("div",{staticClass:"Box"},t._l(t.luckDraw,(function(e,i){return n("div",{key:i,staticClass:"cont_box",class:t.currenId==e.id?"on":"",on:{click:function(n){return t.getUrl(e)}}},[t._v(t._s(e.name))])})),0)]):t._e()]):t._e(),"special"==t.currenType||"product_category"==t.currenType||"product"==t.currenType||"seckill"==t.currenType||"bargain"==t.currenType||"combination"==t.currenType||"news"==t.currenType||"integral"==t.currenType?n("div",{staticClass:"right_box"},["product"==t.currenType?n("Form",{ref:"formValidate",staticClass:"tabform",attrs:{model:t.formValidate}},[n("Row",{attrs:{type:"flex",gutter:24}},[n("Col",[n("FormItem",{attrs:{label:"","label-for":"pid"}},[n("Select",{staticStyle:{width:"230px"},attrs:{clearable:""},on:{"on-change":t.userSearchs},model:{value:t.formValidate.cate_id,callback:function(e){t.$set(t.formValidate,"cate_id",e)},expression:"formValidate.cate_id"}},t._l(t.treeSelect,(function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.html+e.cate_name)+"\n\t\t\t\t\t\t\t\t\t\t")])})),1)],1)],1),n("Col",[n("FormItem",{attrs:{label:"","label-for":"store_name"}},[n("Input",{staticStyle:{width:"250px"},attrs:{search:"","enter-button":"",placeholder:"请输入商品名称,关键字,编号"},on:{"on-search":t.userSearchs},model:{value:t.formValidate.store_name,callback:function(e){t.$set(t.formValidate,"store_name",e)},expression:"formValidate.store_name"}})],1)],1)],1)],1):t._e(),n("Table",{ref:"table",attrs:{"row-key":"id","no-data-text":"暂无数据","no-filtered-data-text":"暂无筛选结果",columns:"special"==t.currenType?t.columns:"product_category"==t.currenType?t.columns7:"bargain"==t.currenType||"combination"==t.currenType||"integral"==t.currenType?t.bargain:"news"==t.currenType?t.news:t.columns8,data:t.tableList,loading:t.loading,"max-height":"product_category"==t.currenType?"410":"product"==t.currenType||"seckill"==t.currenType||"bargain"==t.currenType||"combination"==t.currenType||"news"==t.currenType||"integral"==t.currenType?"400":""},scopedSlots:t._u([{key:"pic",fn:function(t){var e=t.row;t.index;return e.hasOwnProperty("pic")?[n("viewer",[n("div",{staticClass:"tabBox_img"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.pic,expression:"row.pic"}]})])])]:void 0}},{key:"image",fn:function(t){var e=t.row;t.index;return e.hasOwnProperty("image")?[n("viewer",[n("div",{staticClass:"tabBox_img"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"row.image"}]})])])]:void 0}},{key:"image_input",fn:function(t){var e=t.row;t.index;return e.hasOwnProperty("image_input")?[n("viewer",[n("div",{staticClass:"tabBox_img"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image_input[0],expression:"row.image_input[0]"}]})])])]:void 0}}],null,!0)}),"product"==t.currenType||"seckill"==t.currenType||"bargain"==t.currenType||"combination"==t.currenType||"news"==t.currenType||"integral"==t.currenType?n("div",{staticClass:"acea-row row-right page"},[n("Page",{attrs:{total:t.total,"show-elevator":"","show-total":"","page-size":t.formValidate.limit},on:{"on-change":t.pageChange}})],1):t._e()],1):t._e(),"custom"==t.currenType?n("div",{staticClass:"right_box"},[n("div",{staticStyle:{width:"340px",margin:"150px 100px 0 120px"}},[n("Form",{ref:"customdate",attrs:{model:t.customdate,rules:t.ruleValidate,"label-width":88}},[n("FormItem",{attrs:{label:"跳转路径：",prop:"url"}},[n("Input",{attrs:{placeholder:"请输入正确跳转路径"},model:{value:t.customdate.url,callback:function(e){t.$set(t.customdate,"url",e)},expression:"customdate.url"}})],1)],1)],1)]):t._e()]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{on:{click:t.cancel}},[t._v("取消")]),"custom"==t.currenType?n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("customdate")}}},[t._v("确定")]):n("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("确定")])],1)])],1)},r=[],a=n("a34a"),s=n.n(a),c=n("f478"),o=n("c4c8"),l=n("b7be"),u=n("1336");function d(t,e,n,i,r,a,s){try{var c=t[a](s),o=c.value}catch(l){return void n(l)}c.done?e(o):Promise.resolve(o).then(i,r)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(t){d(a,i,r,s,c,"next",t)}function c(t){d(a,i,r,s,c,"throw",t)}s(void 0)}))}}var p={name:"linkaddress",data:function(){return{modals:!1,categoryData:[],currenType:"link",columns:[{title:"ID",key:"id",width:60},{title:"页面名称",key:"name",width:150},{title:"页面链接",key:"url"}],columns7:[{title:"ID",key:"id",width:60},{title:"分类名称",key:"cate_name",tree:!0},{title:"分类图标",slot:"pic"}],columns8:[{title:"ID",key:"id",width:60},{title:"商品图片",slot:"image",width:90},{title:"商品名称",key:"store_name"}],bargain:[{title:"ID",key:"id",width:60},{title:"商品图片",slot:"image",width:90},{title:"商品名称",key:"title"}],news:[{title:"ID",key:"id",width:60},{title:"文章图片",slot:"image_input",width:90},{title:"文章名称",key:"title"}],formValidate:{page:1,limit:15,cate_id:"",store_name:""},total:0,basicsList:[],userList:[],distributionList:[],coupon:[],luckDraw:[],integral:[],presale:[],currenId:"",currenUrl:"",loading:!1,tableList:[],presentId:0,categoryId:"",treeSelect:[],customdate:{url:""},customNum:1,ruleValidate:{name:[{required:!0,message:"请输入链接名称",trigger:"blur"}],url:[{required:!0,message:"请输入跳转路径",trigger:"blur"}]}}},computed:{},created:function(){var t=this;this.getSort(),this.goodsCategory();var e={width:60,align:"center",render:function(e,n){var i=n.row.id,r=!1;r=t.presentId===i;var a=t;return e("div",[e("Radio",{props:{value:r},on:{"on-change":function(){a.presentId=i,t.currenUrl=n.row.url}}})])}};this.columns.unshift(e),this.columns7.unshift(e),this.columns8.unshift(e),this.bargain.unshift(e),this.news.unshift(e)},methods:{delLink:function(t,e,n){var i=this,r={title:e,num:n,url:"diy/del_link/".concat(t.id),method:"DELETE",ids:""};this.$modalSure(r).then((function(t){i.$Message.success(t.msg),i.tableList.splice(n,1),i.tableList.length||(i.customNum=2)})).catch((function(t){i.$Message.error(t.msg)}))},customLink:function(){this.customNum=2},customList:function(){this.customNum=1},getCustomList:function(){var t=this;Object(c["p"])(this.categoryId).then((function(e){e.data.list.length||(t.customNum=2),t.tableList=e.data.list})).catch((function(e){t.$Message.error(e.msg)}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?(e.$emit("linkUrl",e.customdate.url),e.modals=!1,e.reset()):e.$Message.error("请填写信息")}))},handleReset:function(t){this.$refs[t].resetFields()},pageChange:function(t){this.formValidate.page=t,this.getList()},goodsCategory:function(){var t=this;Object(o["nb"])(1).then((function(e){t.treeSelect=e.data})).catch((function(e){t.$Message.error(e.msg)}))},userSearchs:function(){this.formValidate.page=1,this.getList()},reset:function(){this.currenUrl="",this.presentId=0,this.currenId="",this.customdate.url=""},getUrl:function(t){this.currenId=t.id,this.currenUrl=t.url},getSort:function(){var t=this;Object(c["o"])().then((function(e){e.data[0].children[0].selected=!0,t.categoryData=e.data,t.handleCheckChange("",e.data[0].children[0])})).catch((function(e){t.$Message.error(e.msg)}))},getList:function(){var t=this;this.loading=!0,"product"==this.currenType?Object(o["g"])(this.formValidate).then(function(){var e=h(s.a.mark((function e(n){var i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=n.data,i.list.forEach((function(t){t.url="/pages/goods_details/index?id=".concat(t.id)})),t.tableList=i.list,t.total=n.data.count,t.loading=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)})):"seckill"==this.currenType?Object(l["X"])(this.formValidate).then(function(){var e=h(s.a.mark((function e(n){var i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=n.data,i.list.forEach((function(t){t.url="/pages/activity/goods_seckill_details/index?id=".concat(t.id,"&status=1")})),t.tableList=i.list,t.total=n.data.count,t.loading=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)})):"bargain"==this.currenType?Object(l["c"])(this.formValidate).then(function(){var e=h(s.a.mark((function e(n){var i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=n.data,i.list.forEach((function(t){t.url="/pages/activity/goods_bargain_details/index?id=".concat(t.id)})),t.tableList=i.list,t.total=n.data.count,t.loading=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)})):"combination"==this.currenType?Object(l["i"])(this.formValidate).then(function(){var e=h(s.a.mark((function e(n){var i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=n.data,i.list.forEach((function(t){t.url="/pages/activity/goods_combination_details/index?id=".concat(t.id)})),t.tableList=i.list,t.total=n.data.count,t.loading=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)})):"news"==this.currenType?Object(u["e"])(this.formValidate).then(function(){var e=h(s.a.mark((function e(n){var i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=n.data,i.list.forEach((function(t){t.url="/pages/news_details/index?id=".concat(t.id)})),t.tableList=i.list,t.total=i.count,t.loading=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)})):"integral"==this.currenType&&Object(l["K"])(this.formValidate).then(function(){var e=h(s.a.mark((function e(n){var i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=n.data,i.list.forEach((function(t){t.url="/pages/points_mall/integral_goods_details?id=".concat(t.id)})),t.tableList=i.list,t.total=n.data.count,t.loading=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},handleCheckChange:function(t,e){var n=this;this.reset();var i="";if(!e.pid)return!1;i=e.id,this.categoryId=e.id,this.loading=!0,this.currenType=e.type,"product"==this.currenType||"seckill"==this.currenType||"bargain"==this.currenType||"combination"==this.currenType||"news"==this.currenType||"integral"==this.currenType?this.getList():"custom"==this.currenType?this.getCustomList():Object(c["p"])(i).then((function(t){n.loading=!1;var e=t.data.list;if("marketing_link"==n.currenType||"link"==n.currenType){var i=[],r=[],a=[],s=[],c=[],o=[],l=[];e.forEach((function(t){1==t.type?i.push(t):2==t.type?r.push(t):3==t.type?a.push(t):4==t.type?s.push(t):5==t.type?c.push(t):6==t.type?l.push(t):o.push(t)})),n.basicsList=i,n.distributionList=r,n.userList=a,n.coupon=o,n.luckDraw=c,n.integral=s,n.presale=l}else if("special"==n.currenType){var u=[];e.forEach((function(t){t.url="/pages/annex/special/index?id=".concat(t.id),t.is_diy&&u.push(t)})),n.tableList=u}else"product_category"==n.currenType&&(e.forEach((function(t){t.hasOwnProperty("children")&&t.children.forEach((function(t){t.url="/pages/goods_list/index?sid=".concat(t.id,"&title=").concat(t.cate_name)})),t.url="/pages/goods_list/index?cid=".concat(t.id,"&title=默认")})),n.tableList=e)})).catch((function(t){n.loading=!1,n.$Message.error(t.msg)}))},ok:function(){if(""==this.currenUrl)return this.$Message.warning("请选择链接");this.$emit("linkUrl",this.currenUrl),this.modals=!1,this.reset()},cancel:function(){this.modals=!1,this.reset()}}},m=p,g=(n("72a3"),n("2877")),f=Object(g["a"])(m,i,r,!1,null,"636f70ee",null);e["a"]=f.exports}}]);