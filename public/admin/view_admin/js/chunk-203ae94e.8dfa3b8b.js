(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-203ae94e"],{"0fc4":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return n}));var r=a("b6bd");function i(){return Object(r["a"])({url:"erp/config",method:"get"})}function s(t){return Object(r["a"])({url:"store/erp/shop",method:"get",params:t})}function n(t){return Object(r["a"])({url:"product/import_erp_product",method:"post",data:t})}},"5fc0":function(t,e,a){},"62c9":function(t,e,a){},"667e":function(t,e,a){"use strict";var r=a("9f98"),i=a.n(r);i.a},"7c09":function(t,e,a){},"9f98":function(t,e,a){},a70d:function(t,e,a){"use strict";var r=a("7c09"),i=a.n(r);i.a},aab0:function(t,e,a){"use strict";var r=a("ec76"),i=a.n(r);i.a},bcbf:function(t,e,a){"use strict";var r=a("f372"),i=a.n(r);i.a},bd9b:function(t,e){t.exports="data:image/jpeg;base64,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"},c250:function(t,e,a){"use strict";var r=a("62c9"),i=a.n(r);i.a},c5e3:function(t,e,a){"use strict";var r=a("5fc0"),i=a.n(r);i.a},dfc7:function(t,e,a){},e0fc:function(t,e,a){"use strict";var r=a("dfc7"),i=a.n(r);i.a},ec76:function(t,e,a){},ed5d:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticClass:"mt15 ivu-mt",attrs:{bordered:!1,"dis-hover":"",padding:0}},[a("div",{staticClass:"new_card_pd"},[a("Form",{ref:"orderData",staticClass:"tabform",attrs:{model:t.orderData,"label-width":t.labelWidth,"label-position":t.labelPosition,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"选择门店："}},[a("Select",{staticStyle:{width:"250px"},attrs:{clearable:"",filterable:""},on:{"on-change":t.userSearchs},model:{value:t.orderData.store_id,callback:function(e){t.$set(t.orderData,"store_id",e)},expression:"orderData.store_id"}},t._l(t.staffData,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name)+"\n              ")])})),1)],1),a("FormItem",{attrs:{label:"创建时间："}},[a("DatePicker",{staticStyle:{width:"250px"},attrs:{editable:!1,value:t.timeVal,format:"yyyy/MM/dd",type:"datetimerange",placement:"bottom-start",placeholder:"自定义时间",options:t.options},on:{"on-change":t.onchangeTime}})],1),a("FormItem",{attrs:{label:"会员类型："}},[a("Select",{staticStyle:{width:"250px"},attrs:{clearable:""},on:{"on-change":t.userSearchs},model:{value:t.vipData.member_type,callback:function(e){t.$set(t.vipData,"member_type",e)},expression:"vipData.member_type"}},t._l(t.treeSelect,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"订单状态："}},[a("Select",{staticStyle:{width:"250px"},model:{value:t.orderData.status,callback:function(e){t.$set(t.orderData,"status",e)},expression:"orderData.status"}},[a("Option",{attrs:{value:""}},[t._v("全部")]),a("Option",{attrs:{value:"0"}},[t._v("未支付")]),a("Option",{attrs:{value:"1"}},[t._v("待配送")]),a("Option",{attrs:{value:"2"}},[t._v("配送中")]),a("Option",{attrs:{value:"3"}},[t._v("待评价")]),a("Option",{attrs:{value:"5"}},[t._v("待核销")]),a("Option",{attrs:{value:"6"}},[t._v("已核销")]),a("Option",{attrs:{value:"4"}},[t._v("已完成")]),a("Option",{attrs:{value:"-4"}},[t._v("已删除")])],1)],1),6==t.currentTab||7==t.currentTab||5==t.currentTab?a("FormItem",{attrs:{label:"订单号：","label-for":"real_name"}},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"订单号/商品名称"},model:{value:t.orderData.real_name,callback:function(e){t.$set(t.orderData,"real_name",e)},expression:"orderData.real_name"}})],1):t._e(),3==t.currentTab||4==t.currentTab?a("FormItem",{attrs:{label:"用户搜索：","label-for":"nickname"}},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入用户名"},model:{value:t.rechargeData.nickname,callback:function(e){t.$set(t.rechargeData,"nickname",e)},expression:"rechargeData.nickname"}})],1):t._e(),a("FormItem",[a("Button",{staticStyle:{"margin-left":"-75px"},attrs:{type:"primary"},on:{click:function(e){return t.orderSearch()}}},[t._v("查询")])],1)],1)],1)]),a("Card",{staticClass:"mt15 ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("div",{staticClass:"new_tab"},[a("Tabs",{on:{"on-click":t.onClickTab},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("TabPane",{attrs:{label:"收银台订单",name:"6"}}),a("TabPane",{attrs:{label:"配送订单",name:"7"}}),a("TabPane",{attrs:{label:"核销订单",name:"5"}}),a("TabPane",{attrs:{label:"充值订单",name:"3"}}),a("TabPane",{attrs:{label:"付费会员订单",name:"4"}})],1)],1),a("Table",{ref:"table",attrs:{columns:6==t.currentTab||7==t.currentTab||5==t.currentTab?t.columns:3==t.currentTab?t.rechargeColumns:t.vipColumns,data:t.tableList,loading:t.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:t._u([{key:"order_id",fn:function(e){var r=e.row;return[a("span",{staticStyle:{display:"block"},domProps:{textContent:t._s(r.order_id)}}),a("span",{directives:[{name:"show",rawName:"v-show",value:1===r.is_del,expression:"row.is_del === 1"}],staticStyle:{color:"#ed4014",display:"block"}},[t._v("用户已删除")])]}},{key:"userInfo",fn:function(e){var r=e.row;return[6==t.currentTab||7==t.currentTab||5==t.currentTab?a("div",[r.uid?a("a",{on:{click:function(e){return t.showUserInfo(r)}}},[t._v("\n              "+t._s(r.nickname)+"\n              "),a("span",{staticStyle:{"margin-left":"5px"}},[t._v("/"+t._s(r.uid))])]):a("span",[t._v("游客"),a("span",{staticStyle:{"margin-left":"5px"}},[t._v("/"+t._s(r.uid))])])]):t._e(),3==t.currentTab?a("div",{staticClass:"tabBox"},[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:r.avatar,expression:"row.avatar"}]})]),a("span",{staticClass:"tabBox_tit"},[t._v(t._s(r.nickname))])]):t._e(),4==t.currentTab&&r.user?a("div",{staticClass:"tabBox"},[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:r.user.avatar,expression:"row.user.avatar"}]})]),a("span",{staticClass:"tabBox_tit"},[t._v(t._s(r.user.nickname))])]):t._e()]}},{key:"info",fn:function(e){var r=e.row;return[a("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600}},[t._l(r._info,(function(e,r){return a("div",{key:r,staticClass:"tabBox"},[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.image:e.cart_info.productInfo.image,expression:"\n                    val.cart_info.productInfo.attrInfo\n                      ? val.cart_info.productInfo.attrInfo.image\n                      : val.cart_info.productInfo.image\n                  "}]})]),a("span",{staticClass:"info_title line1"},[e.cart_info.is_gift?a("span",{staticClass:"font-color-red"},[t._v("赠品")]):t._e(),t._v("\n                "+t._s(e.cart_info.productInfo.store_name+" | ")+"\n                "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:"")+"\n              ")])])})),a("div",{attrs:{slot:"content"},slot:"content"},t._l(r._info,(function(e,r){return a("div",{key:r},[e.cart_info.is_gift?a("p",{staticClass:"font-color-red"},[t._v("赠品")]):t._e(),a("p",[t._v(t._s(e.cart_info.productInfo.store_name))]),a("p",[t._v(" "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:""))]),a("p",{staticClass:"tabBox_pice"},[t._v(t._s("￥"+e.cart_info.truePrice+" x "+e.cart_info.cart_num))])])})),0)],2)]}},{key:"statusName",fn:function(e){var r=e.row;return[r.status_name&&0==r.status?a("Tag",{attrs:{color:"red",size:"medium"}},[t._v(t._s(r.status_name.status_name))]):t._e(),r.status_name&&0!==r.status?a("Tag",{attrs:{color:"green",size:"medium"}},[t._v(t._s(r.status_name.status_name))]):t._e(),a("br"),!r.is_all_refund&&r.refund.length?a("Tag",{attrs:{color:"orange",size:"medium"}},[t._v("部分退款中")]):t._e(),r.is_all_refund&&r.refund.length&&6!=r.refund_type?a("Tag",{attrs:{color:"orange",size:"medium"}},[t._v("退款中")]):t._e()]}},{key:"pay_price",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(a.paid>0?a.pay_price:0)+"\n        ")]}},{key:"action",fn:function(e){var r=e.row;return[6==t.currentTab?a("span",[a("a",{on:{click:function(e){return t.detail(r)}}},[t._v("订单详情")])]):t._e(),7==t.currentTab?a("span",[2==r._status?a("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.distribution(r)}}},[t._v("分配")]):t._e(),2==r._status?a("Divider",{attrs:{type:"vertical"}}):t._e(),a("a",{on:{click:function(e){return t.detail(r)}}},[t._v("详情")])],1):t._e(),5==t.currentTab?a("span",[11==r._status?a("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.distribution(r)}}},[t._v("分配")]):t._e(),11==r._status?a("Divider",{attrs:{type:"vertical"}}):t._e(),a("a",{on:{click:function(e){return t.detail(r)}}},[t._v("详情")])],1):t._e(),3==t.currentTab||4==t.currentTab?a("a",{on:{click:function(e){return t.remark(r)}}},[t._v("备注")]):t._e()]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:t.total,current:t.orderData.page,"show-elevator":"","show-total":"","page-size":t.orderData.limit},on:{"on-change":t.pageChange}})],1)],1),a("Distribution",{ref:"distshow"}),a("user-details",{ref:"userDetails",attrs:{fromType:"order"}}),a("edit-from",{ref:"edits",attrs:{FromData:t.FromData},on:{submitFail:t.submitFail}}),a("details-from",{ref:"detailss",attrs:{orderDatalist:t.orderDatalist,orderId:t.orderId,"row-active":t.rowActive,currentTab:t.currentTab,openErp:t.openErp}}),a("order-remark",{ref:"remarks",attrs:{orderId:t.orderId},on:{submitFail:t.submitFail}}),a("order-record",{ref:"record"}),a("order-send",{ref:"send",attrs:{orderId:t.orderId,status:t.status,pay_type:t.pay_type},on:{submitFail:t.submitFail}})],1)},i=[],s=a("a34a"),n=a.n(s),o=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"请选择门店",width:"850"},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[a("div",{staticClass:"table"},[a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:t.columns,data:t.orderList,loading:t.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:t._u([{key:"image",fn:function(t){var e=t.row;t.index;return[a("img",{attrs:{src:e.image}})]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:t.total,current:t.formValidate.page,"show-elevator":"","show-total":"","page-size":t.formValidate.limit},on:{"on-change":t.pageChange}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"})])},c=[],d=a("73f5"),u={name:"distshow",data:function(){var t=this;return{id:0,currentid:0,modals:!1,loading:!1,orderList:[],total:0,formValidate:{page:1,limit:15,id:0},columns:[{title:"选择",width:60,align:"center",render:function(e,a){var r=a.row.id,i=!1;t.currentid,i=t.currentid===r;var s=t;return e("div",[e("Radio",{props:{value:i},on:{"on-change":function(){s.currentid=r,Object(d["H"])({oid:t.id,store_id:a.row.id}).then((function(e){t.$Message.success(e.msg),s.currentid=0,t.modals=!1,t.$parent.getChart(),t.$parent.getList()})).catch((function(e){t.modals=!1,t.$Message.error(e.msg),s.currentid=0}))}}})])}},{title:"ID",key:"id",minWidth:50},{title:"门店图片",slot:"image",minWidth:80},{title:"门店名称",key:"name",minWidth:80},{title:"联系电话",key:"phone",minWidth:80},{title:"门店地址",key:"address",ellipsis:!0,minWidth:150},{title:"营业时间",key:"day_time",minWidth:120},{title:"营业状态",key:"status_name",minWidth:80}]}},props:{},mounted:function(){},methods:{getList:function(t){var e=this;this.id=t,this.formValidate.id=t,this.loading=!0,Object(d["E"])(this.formValidate).then((function(t){e.orderList=t.data.list,e.total=t.data.count,e.loading=!1}))},cancel:function(t){this.modals=!1},putRemark:function(){},pageChange:function(t){this.formValidate.page=t,this.getList()}}},m=u,v=(a("c250"),a("2877")),f=Object(v["a"])(m,l,c,!1,null,"7d710b0a",null),p=f.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tdinfo"},[a("Row",{staticClass:"expand-row"},[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("商品总价：")]),a("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.total_price)}})]),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("下单时间：")]),a("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.add_time)}})]),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("推广人：")]),a("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.spread_nickname?t.row.spread_nickname:"无")}})])],1),a("Row",[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("用户备注：")]),a("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.mark?t.row.mark:"无")}})]),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[t._v("商家备注：")]),a("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.remark?t.row.remark:"无")}})])],1)],1)},h=[],g={name:"table-expand",props:{row:Object}},b=g,y=(a("c5e3"),Object(v["a"])(b,_,h,!1,null,"e5649b00",null)),w=y.exports,I=a("a716"),C=a("31b4"),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"订单发送货",closable:!1,width:"1000"},on:{"on-visible-change":t.changeModal},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.modals?a("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":100},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"选择类型："}},[a("RadioGroup",{on:{"on-change":t.changeRadio},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[a("Radio",{attrs:{label:"1"}},[t._v("发货")]),a("Radio",{attrs:{label:"2"}},[t._v("送货")]),a("Radio",{attrs:{label:"3"}},[t._v("无需配送")])],1)],1),1==t.formItem.type?a("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.export_open,expression:"export_open"}],attrs:{label:"发货类型："}},[a("RadioGroup",{on:{"on-change":t.changeExpress},model:{value:t.formItem.express_record_type,callback:function(e){t.$set(t.formItem,"express_record_type",e)},expression:"formItem.express_record_type"}},[a("Radio",{attrs:{label:"1"}},[t._v("手动填写")]),a("Radio",{attrs:{label:"2"}},[t._v("电子面单打印")])],1)],1):t._e(),a("div",[1==t.formItem.type?a("FormItem",{attrs:{label:"快递公司："}},[a("Select",{staticStyle:{width:"80%"},attrs:{filterable:"",placeholder:"请选择快递公司"},on:{"on-change":t.expressChange},model:{value:t.formItem.delivery_name,callback:function(e){t.$set(t.formItem,"delivery_name",e)},expression:"formItem.delivery_name"}},t._l(t.express,(function(e,r){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.value)+"\n\t\t\t\t\t")])})),1)],1):t._e(),"1"===t.formItem.express_record_type&&1==t.formItem.type?a("FormItem",{attrs:{label:"快递单号："}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入快递单号"},model:{value:t.formItem.delivery_id,callback:function(e){t.$set(t.formItem,"delivery_id",e)},expression:"formItem.delivery_id"}}),"顺丰速运"==t.formItem.delivery_name?a("div",{staticClass:"trips"},[a("p",[t._v("顺丰请输入单号 :收件人或寄件人手机号后四位，")]),a("p",[t._v("例如：SF000000000000:3941")])]):t._e()],1):t._e(),"2"===t.formItem.express_record_type?[a("FormItem",{staticClass:"express_temp_id",attrs:{label:"电子面单："}},[a("Select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择电子面单"},on:{"on-change":t.expressTempChange},model:{value:t.formItem.express_temp_id,callback:function(e){t.$set(t.formItem,"express_temp_id",e)},expression:"formItem.express_temp_id"}},t._l(t.expressTemp,(function(e,r){return a("Option",{key:r,attrs:{value:e.temp_id}},[t._v(t._s(e.title)+"\n\t\t\t\t\t\t")])})),1),t.formItem.express_temp_id?a("Button",{attrs:{type:"text"},on:{click:t.preview}},[t._v("预览")]):t._e()],1),a("FormItem",{attrs:{label:"寄件人姓名："}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人姓名"},model:{value:t.formItem.to_name,callback:function(e){t.$set(t.formItem,"to_name",e)},expression:"formItem.to_name"}})],1),a("FormItem",{attrs:{label:"寄件人电话："}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人电话"},model:{value:t.formItem.to_tel,callback:function(e){t.$set(t.formItem,"to_tel",e)},expression:"formItem.to_tel"}})],1),a("FormItem",{attrs:{label:"寄件人地址："}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入寄件人地址"},model:{value:t.formItem.to_addr,callback:function(e){t.$set(t.formItem,"to_addr",e)},expression:"formItem.to_addr"}})],1)]:t._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.formItem.type,expression:"formItem.type === '2'"}]},[a("FormItem",{attrs:{label:"送货人："}},[a("Select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择送货人"},on:{"on-change":t.shDeliveryChange},model:{value:t.formItem.sh_delivery,callback:function(e){t.$set(t.formItem,"sh_delivery",e)},expression:"formItem.sh_delivery"}},t._l(t.deliveryList,(function(e,r){return a("Option",{key:r,attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t"+t._s(e.wx_name)+"（"+t._s(e.phone)+"）")])})),1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"3"===t.formItem.type,expression:"formItem.type === '3'"}]},[a("FormItem",{attrs:{label:"备注："}},[a("Input",{staticStyle:{width:"80%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:t.formItem.fictitious_content,callback:function(e){t.$set(t.formItem,"fictitious_content",e)},expression:"formItem.fictitious_content"}})],1)],1),t.splitOrder>1?a("div",[a("FormItem",{attrs:{label:"分单发货："}},[a("i-switch",{attrs:{size:"large",disabled:8===t.orderStatus||"offline"===t.pay_type},on:{"on-change":t.changeSplitStatus},model:{value:t.splitSwitch,callback:function(e){t.splitSwitch=e},expression:"splitSwitch"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),a("div",{staticClass:"trips"},[a("p",[t._v("\n\t\t\t\t\t\t可选择表格中的商品单独发货，发货后会生成新的订单且不能撤回，请谨慎操作！\n\t\t\t\t\t")])]),t.splitSwitch&&t.manyFormValidate.length?a("Table",{attrs:{data:t.manyFormValidate,columns:t.header,border:""},on:{"on-selection-change":t.selectOne},scopedSlots:t._u([{key:"image",fn:function(e){var r=e.row;e.index;return[a("div",{staticClass:"product-data"},[a("img",{staticClass:"image",attrs:{src:r.cart_info.productInfo.image}}),a("div",{staticClass:"line2"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(r.cart_info.productInfo.store_name)+"\n\t\t\t\t\t\t\t")])])]}},{key:"value",fn:function(e){var r=e.row;e.index;return[a("div",{staticClass:"product-data"},[a("div",[t._v(t._s(r.cart_info.productInfo.attrInfo.suk))])])]}},{key:"price",fn:function(e){var r=e.row;e.index;return[a("div",{staticClass:"product-data"},[a("div",[t._v(t._s(r.cart_info.truePrice))])])]}}],null,!1,3197150676)}):t._e()],1)],1):t._e()],1):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.putSend}},[t._v("提交")])],1),a("div",{directives:[{name:"viewer",rawName:"v-viewer"},{name:"show",rawName:"v-show",value:t.temp,expression:"temp"}],ref:"viewer"},[a("img",{staticStyle:{display:"none"},attrs:{src:t.temp.pic}})])],1)},x=[],k=a("f8b7");function O(t,e,a,r,i,s,n){try{var o=t[s](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,i)}function T(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var s=t.apply(e,a);function n(t){O(s,r,i,n,o,"next",t)}function o(t){O(s,r,i,n,o,"throw",t)}n(void 0)}))}}function F(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function M(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?F(a,!0).forEach((function(e){A(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):F(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function A(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var S={name:"orderSend",props:{orderId:Number,status:Number,pay_type:String},data:function(){var t=this;return{orderStatus:0,splitSwitch:!0,formItem:{type:"1",express_record_type:"1",delivery_name:"",delivery_id:"",express_temp_id:"",to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:""},modals:!1,express:[],expressTemp:[],deliveryList:[],temp:{},export_open:!0,manyFormValidate:[],header:[{type:"selection",width:60,align:"center"},{title:"商品信息",slot:"image",width:200,align:"center"},{title:"规格",slot:"value",align:"center",minWidth:120},{title:"价格",slot:"price",align:"center",minWidth:120},{title:"总数",key:"cart_num",align:"center",minWidth:120},{title:"待发数量",key:"surplus_num",align:"center",width:180,render:function(e,a){return e("div",[e("InputNumber",{props:{min:1,max:a.row.surplus_num,value:a.row.surplus_num},on:{"on-change":function(e){a.row.surplus_num=e||1,t.manyFormValidate[a.index]=a.row,t.selectData.forEach((function(e,r){e.cart_id===a.row.cart_id&&t.selectData.splice(r,1,a.row)}))}}})])}}],selectData:[]}},computed:M({},Object(o["e"])("admin/order",["splitOrder"])),methods:{selectOne:function(t){this.selectData=t},changeModal:function(t){t||this.cancel()},changeSplitStatus:function(t){var e=this;t&&Object(k["O"])(this.orderId).then((function(t){e.manyFormValidate=t.data}))},changeRadio:function(t){switch(this.$refs.formItem.resetFields(),t){case"1":this.formItem.delivery_name="",this.formItem.delivery_id="",this.formItem.express_temp_id="",this.formItem.express_record_type="1",this.expressTemp=[];break;case"2":this.formItem.sh_delivery="";break;case"3":this.formItem.fictitious_content="";break;default:break}},changeExpress:function(t){switch(t){case"2":this.formItem.delivery_name="",this.formItem.express_temp_id="",this.expressTemp=[],this.getList(2);break;case"1":this.formItem.delivery_name="",this.formItem.delivery_id="",this.getList(1);break;default:break}},reset:function(){this.formItem={type:"1",express_record_type:"1",delivery_name:"",delivery_id:"",express_temp_id:"",expressTemp:[],to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:""}},getList:function(t){var e=this,a=2===t?1:"";Object(k["i"])(a).then(function(){var t=T(n.a.mark((function t(a){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.express=a.data,e.getSheetInfo();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},putSend:function(t){var e=this,a={id:this.orderId,datas:this.formItem};if("1"===this.formItem.type&&"2"===this.formItem.express_record_type){if(""===this.formItem.delivery_name)return this.$Message.error("快递公司不能为空");if(""===this.formItem.express_temp_id)return this.$Message.error("电子面单不能为空");if(""===this.formItem.to_name)return this.$Message.error("寄件人姓名不能为空");if(""===this.formItem.to_tel)return this.$Message.error("寄件人电话不能为空");if(!/^1(3|4|5|7|8|9|6)\d{9}$/i.test(this.formItem.to_tel))return this.$Message.error("请输入正确的手机号码");if(""===this.formItem.to_addr)return this.$Message.error("寄件人地址不能为空")}if("1"===this.formItem.type&&"1"===this.formItem.express_record_type){if(""===this.formItem.delivery_name)return this.$Message.error("快递公司不能为空");if(""===this.formItem.delivery_id)return this.$Message.error("快递单号不能为空")}if("2"===this.formItem.type&&""===this.formItem.sh_delivery)return this.$Message.error("送货人不能为空");this.splitSwitch?(a.datas.cart_ids=[],this.selectData.forEach((function(t){a.datas.cart_ids.push({cart_id:t.cart_id,cart_num:t.surplus_num})})),Object(k["P"])(a).then((function(t){e.modals=!1,e.$Message.success(t.msg),e.$emit("submitFail"),e.reset(),e.splitSwitch=!1})).catch((function(t){e.$Message.error(t.msg)}))):Object(k["G"])(a).then(function(){var t=T(n.a.mark((function t(a){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.modals=!1,e.$Message.success(a.msg),e.splitSwitch=!1,e.$emit("submitFail"),e.reset();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},cancel:function(t){this.modals=!1,this.orderStatus=0,this.splitSwitch=!1,this.selectData=[],this.reset()},expressChange:function(t){var e=this,a=this.express.find((function(e){return e.value===t}));void 0!==a&&(this.formItem.delivery_code=a.code,"2"===this.formItem.express_record_type&&(this.expressTemp=[],this.formItem.express_temp_id="",Object(k["v"])({com:this.formItem.delivery_code}).then((function(t){e.expressTemp=t.data,t.data.length||e.$Message.error("请配置你所选快递公司的电子面单")})).catch((function(t){e.$Message.error(t.msg)}))))},getCartInfo:function(t,e){var a=this;this.$set(this,"orderStatus",t),this.$set(this,"splitSwitch",8===t),Object(k["O"])(this.orderId).then((function(t){a.manyFormValidate=t.data}))},getDeliveryList:function(){var t=this;Object(k["t"])().then((function(e){t.deliveryList=e.data.list})).catch((function(e){t.$Message.error(e.msg)}))},getSheetInfo:function(){var t=this;Object(k["E"])().then((function(e){var a=e.data;for(var r in a)a.hasOwnProperty(r)&&(t.formItem[r]=a[r]);t.export_open=void 0===a.export_open||a.export_open,t.export_open||(t.formItem.express_record_type="1"),t.formItem.to_addr=a.to_add})).catch((function(e){t.$Message.error(e.msg)}))},shDeliveryChange:function(t){if(t){var e=this.deliveryList.find((function(e){return e.id===t}));this.formItem.sh_delivery_name=e.wx_name,this.formItem.sh_delivery_id=e.phone,this.formItem.sh_delivery_uid=e.uid}},expressTempChange:function(t){this.temp=this.expressTemp.find((function(e){return t===e.temp_id})),void 0===this.temp&&(this.temp={})},preview:function(){this.$refs.viewer.$viewer.show()}}},j=S,$=(a("e0fc"),Object(v["a"])(j,D,x,!1,null,"e8ec4850",null)),L=$.exports,P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Drawer",{attrs:{closable:!1,width:"1000","class-name":"order_box",styles:{padding:0}},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.orderDatalist?r("div",[r("div",{staticClass:"head"},[r("div",{staticClass:"full"},[r("Icon",{attrs:{custom:"iconfont icondingdan",size:"60"}}),r("div",{staticClass:"text"},[r("div",{staticClass:"title"},[t._v(t._s(6==t.currentTab?"收银台订单":7==t.currentTab?"配送订单":"核销订单"))]),r("div",[t._v("订单编号："+t._s(t.orderDatalist.orderInfo.order_id))])]),r("div",[2==t.rowActive._status||11==t.rowActive._status?r("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.distribution}},[t._v("分配")]):t._e(),r("Button",{on:{click:t.remark}},[t._v("订单备注")])],1)],1),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",{staticClass:"title"},[t._v("订单状态")]),r("div",{staticClass:"value1"},[r("span",{domProps:{innerHTML:t._s(t.orderDatalist.orderInfo.status_name.status_name)}}),!t.orderDatalist.orderInfo.is_all_refund&&t.orderDatalist.orderInfo.refund.length?r("span",[t._v(",部分退款中")]):t._e(),t.orderDatalist.orderInfo.is_all_refund&&t.orderDatalist.orderInfo.refund.length&&6!=t.orderDatalist.orderInfo.refund_type?r("span",[t._v(",退款中")]):t._e()])]),r("li",{staticClass:"item"},[r("div",{staticClass:"title"},[t._v("实际支付")]),r("div",[t._v("¥"+t._s(t.orderDatalist.orderInfo.paid>0?t.orderDatalist.orderInfo.pay_price:0))])]),r("li",{staticClass:"item"},[r("div",{staticClass:"title"},[t._v("支付方式")]),r("div",[t._v(t._s(t.orderDatalist.orderInfo._status._payType||"-"))])]),r("li",{staticClass:"item"},[r("div",{staticClass:"title"},[t._v("支付时间")]),r("div",[t._v(t._s(t.orderDatalist.orderInfo._pay_time||"-"))])])])]),r("Tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("TabPane",{attrs:{label:"订单信息",name:"detail"}},[t.orderDatalist.orderInfo.refund_status?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("退款信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("退款原因：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_reason||"-"))])]),parseFloat(t.orderDatalist.orderInfo.refund_price)?r("li",{staticClass:"item"},[r("div",[t._v("退款金额：")]),r("div",{staticClass:"value"},[t._v(t._s(parseFloat(t.orderDatalist.orderInfo.refund_price)||0))])]):t._e(),parseFloat(t.orderDatalist.orderInfo.back_integral)?r("li",{staticClass:"item"},[r("div",[t._v("退回积分：")]),r("div",{staticClass:"value"},[t._v(t._s(parseFloat(t.orderDatalist.orderInfo.back_integral)||"-"))])]):t._e(),r("li",{staticClass:"item"},[r("div",[t._v("退款说明：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_explain||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("退款凭证：")]),r("div",{staticClass:"value"},t._l(t.orderDatalist.orderInfo.refund_img,(function(t,e){return r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0)])])]):t._e(),t.orderDatalist.orderInfo.refund_status&&t.orderDatalist.orderInfo.refund_express_name?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("退货物流信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("物流公司：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_express_name||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("物流单号：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_express||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("联系电话：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_phone||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("退货说明：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refund_goods_explain||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("退货凭证：")]),r("div",{staticClass:"value"},t._l(t.orderDatalist.orderInfo.refund_goods_img,(function(t,e){return r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0)])])]):t._e(),r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("用户信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("用户昵称：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.userInfo.uid?t.orderDatalist.userInfo.nickname:"游客"))])]),r("li",{staticClass:"item"},[r("div",[t._v("绑定电话：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.userInfo.phone||"-"))])])])]),r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("收货信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("收货人：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.real_name||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("收货电话：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.user_phone||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("收货地址：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.user_address||"-"))])])])]),t.orderDatalist.orderInfo.fictitious_content&&1!=t.orderDatalist.orderInfo.cartInfo[0].product_type?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("虚拟发货")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.fictitious_content))])])])]):t._e(),1==t.orderDatalist.orderInfo.cartInfo[0].product_type?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("卡密发货")]),t.orderDatalist.orderInfo.virtual.length?r("div",t._l(t.orderDatalist.orderInfo.virtual,(function(e,a){return r("div",{key:a,staticClass:"list"},[r("div",{staticClass:"item"},[r("div",[t._v("卡号"+t._s(a+1)+"：")]),r("div",{staticClass:"value"},[t._v(t._s(e.card_no))])]),r("div",{staticClass:"item"},[r("div",[t._v("密码"+t._s(a+1)+"：")]),r("div",{staticClass:"value"},[t._v(t._s(e.card_pwd))])])])})),0):r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.virtual_info||"-"))])])])]):t._e(),r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("订单信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("创建时间：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo._add_time||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("商品总数：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.total_num||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("商品总价：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.total_price))])]),r("li",{staticClass:"item"},[r("div",[t._v("优惠券金额：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.coupon_price||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("积分抵扣：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.deduction_price||0))])]),parseFloat(t.orderDatalist.orderInfo.use_integral)?r("li",{staticClass:"item"},[r("div",[t._v("使用积分：")]),r("div",{staticClass:"value"},[t._v(t._s(parseFloat(t.orderDatalist.orderInfo.use_integral)))])]):t._e(),r("li",{staticClass:"item"},[r("div",[t._v("支付邮费：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.pay_postage))])]),r("li",{staticClass:"item"},[r("div",[t._v("会员商品优惠：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.vip_true_price||0))])]),2===t.orderDatalist.orderInfo.shipping_type&&0===t.orderDatalist.orderInfo.refund_status&&1===t.orderDatalist.orderInfo.paid?r("li",{staticClass:"item"},[r("div",[t._v("门店名称：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo._store_name||"-"))])]):t._e(),2===t.orderDatalist.orderInfo.shipping_type&&0===t.orderDatalist.orderInfo.refund_status&&1===t.orderDatalist.orderInfo.paid?r("li",{staticClass:"item"},[r("div",[t._v("核销码：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.verify_code||"-"))])]):t._e(),r("li",{staticClass:"item"},[r("div",[t._v("推广人：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.userInfo.spread_name)+"/ID:"+t._s(t.orderDatalist.userInfo.spread_uid))])]),t.orderDatalist.orderInfo.store_order_sn?r("li",{staticClass:"item"},[r("div",[t._v("原订单号：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.store_order_sn))])]):t._e(),t._l(t.orderDatalist.orderInfo.promotions_detail,(function(e,a){return r("li",{key:a,staticClass:"item"},[r("div",[t._v(t._s(e.title)+"：")]),r("div",{staticClass:"value"},[t._v("-￥"+t._s(parseFloat(e.promotions_price).toFixed(2)))])])}))],2)]),"express"===t.orderDatalist.orderInfo.delivery_type?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("物流信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("快递公司：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.delivery_name||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("快递单号：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.delivery_id)),r("span",{staticClass:"logisticsLook",on:{click:t.openLogistics}},[t._v("查询")])])])])]):t._e(),"send"===t.orderDatalist.orderInfo.delivery_type?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("配送信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("送货人姓名：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.delivery_name||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("送货人电话：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.delivery_id||"-"))])])])]):t._e(),t.orderDatalist.orderInfo.custom_form.length?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("自定义留言")]),r("ul",{staticClass:"list"},t._l(t.orderDatalist.orderInfo.custom_form,(function(e,a){return e.value?r("li",{key:a,staticClass:"item"},[r("div",[t._v(t._s(e.title)+"：")]),"img"===e.label?r("div",{staticClass:"value"},t._l(e.value,(function(t,e){return r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0):r("div",{staticClass:"value"},[t._v(t._s(e.value||"-"))])]):t._e()})),0)]):t._e(),t.orderDatalist.orderInfo.mark?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("买家留言")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.mark))])])])]):t._e(),t.orderDatalist.orderInfo.remark?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("订单备注")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("备注：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.remark||"-"))])])])]):t._e(),t.orderDatalist.orderInfo.refuse_reason?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("拒绝退款原因")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.refuse_reason))])])])]):t._e(),t.orderDatalist.orderInfo.invoice?r("div",{staticClass:"section"},[r("div",{staticClass:"title"},[t._v("发票信息")]),r("ul",{staticClass:"list"},[r("li",{staticClass:"item"},[r("div",[t._v("发票类型：")]),r("div",{staticClass:"value"},[t._v(t._s(t._f("invoiceType")(t.orderDatalist.orderInfo.invoice.type)))])]),r("li",{staticClass:"item"},[r("div",[t._v("抬头类型：")]),r("div",{staticClass:"value"},[t._v(t._s(t._f("invoiceHeaderType")(t.orderDatalist.orderInfo.invoice.header_type)))])]),r("li",{staticClass:"item"},[r("div",[t._v("发票抬头：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.name||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("税号：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.duty_number||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("邮箱：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.email||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("开户银行：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.bank||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("企业地址：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.address||"-"))])]),r("li",{staticClass:"item"},[r("div",[t._v("企业电话：")]),r("div",{staticClass:"value"},[t._v(t._s(t.orderDatalist.orderInfo.invoice.drawer_phone||"-"))])])])]):t._e()]),r("TabPane",{attrs:{label:"商品信息",name:"product"}},[r("Table",{attrs:{columns:t.columns1,data:t.orderDatalist.orderInfo.cartInfo,border:"","highlight-row":""},scopedSlots:t._u([{key:"product",fn:function(e){var a=e.row;return[r("div",{staticClass:"product"},[r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"image"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.productInfo.attrInfo?a.productInfo.attrInfo.image:a.productInfo.image,expression:"row.productInfo.attrInfo ? row.productInfo.attrInfo.image : row.productInfo.image"}]})]),r("div",{staticClass:"title"},[a.is_gift?r("span",{staticClass:"font-color-red"},[t._v("[赠品]")]):t._e(),t._v(t._s(a.productInfo.store_name)+" | "+t._s(a.productInfo.attrInfo?a.productInfo.attrInfo.suk:""))])])]}}],null,!1,517014031)})],1),r("TabPane",{attrs:{label:"订单记录",name:"record"}},[r("Table",{attrs:{columns:t.columns2,border:"",data:t.recordData,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"}})],1)],1)],1):t._e()]),r("Modal",{staticClass:"order_box2",attrs:{scrollable:"",title:"物流查询",width:"350"},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[t.orderDatalist?r("div",{staticClass:"logistics acea-row row-top"},[r("div",{staticClass:"logistics_img"},[r("img",{attrs:{src:a("bd9b")}})]),r("div",{staticClass:"logistics_cent"},[r("span",[t._v("物流公司："+t._s(t.orderDatalist.orderInfo.delivery_name))]),r("span",[t._v("物流单号："+t._s(t.orderDatalist.orderInfo.delivery_id))])])]):t._e(),r("div",{staticClass:"acea-row row-column-around trees-coadd"},[r("div",{staticClass:"scollhide"},[r("Timeline",t._l(t.result,(function(e,a){return r("TimelineItem",{key:a},[r("p",{staticClass:"time",domProps:{textContent:t._s(e.time)}}),r("p",{staticClass:"content",domProps:{textContent:t._s(e.status)}})])})),1)],1)])])],1)},W=[];function N(t,e,a,r,i,s,n){try{var o=t[s](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,i)}function V(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var s=t.apply(e,a);function n(t){N(s,r,i,n,o,"next",t)}function o(t){N(s,r,i,n,o,"throw",t)}n(void 0)}))}}var E={name:"orderDetails",filters:{invoiceType:function(t){return 1==t?"电子普通发票":"纸质专用发票"},invoiceHeaderType:function(t){return 1==t?"个人":"企业"}},data:function(){return{modal2:!1,modals:!1,grid:{xl:8,lg:8,md:12,sm:24,xs:24},result:[],columns1:[{title:"商品信息",slot:"product",align:"center",minWidth:400},{title:"价格",key:"truePrice",align:"center"},{title:"数量",key:"cart_num",align:"center"},{title:"小计",align:"center",render:function(t,e){return t("div",e.row.truePrice*e.row.cart_num)}}],columns2:[{title:"订单ID",key:"oid",align:"center",minWidth:40},{title:"操作记录",key:"change_message",align:"center",minWidth:280},{title:"操作时间",key:"change_time",align:"center",minWidth:100}],recordData:[],loading:!1,page:{page:1,limit:10},activeName:"detail"}},props:{orderDatalist:Object,orderId:Number,rowActive:Object,currentTab:String,openErp:{type:Boolean,default:!1}},watch:{orderId:function(t){this.getList(t)}},methods:{openLogistics:function(){this.getOrderData(),this.modal2=!0},getOrderData:function(){var t=this;Object(k["h"])(this.orderId).then(function(){var e=V(n.a.mark((function e(a){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.result=a.data.result;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},getList:function(t){var e=this,a={id:t,datas:this.page};this.loading=!0,Object(k["k"])(a).then(function(){var t=V(n.a.mark((function t(a){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.recordData=a.data,e.loading=!1;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},distribution:function(){this.$parent.distribution(this.rowActive)},remark:function(){this.$parent.remark(this.rowActive)}},computed:{}},R=E,B=(a("667e"),a("a70d"),Object(v["a"])(R,P,W,!1,null,"f4312df4",null)),z=B.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"订单记录",width:"700","footer-hide":""},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[a("Card",{attrs:{bordered:!1,"dis-hover":""}},[a("Table",{attrs:{columns:t.columns,border:"",data:t.recordData,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"}})],1)],1)},G=[];function Q(t,e,a,r,i,s,n){try{var o=t[s](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,i)}function H(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var s=t.apply(e,a);function n(t){Q(s,r,i,n,o,"next",t)}function o(t){Q(s,r,i,n,o,"throw",t)}n(void 0)}))}}var J={name:"orderRecord",data:function(){return{modals:!1,loading:!1,recordData:[],page:{page:1,limit:10},columns:[{title:"订单ID",key:"oid",align:"center",minWidth:40},{title:"操作记录",key:"change_message",align:"center",minWidth:280},{title:"操作时间",key:"change_time",align:"center",minWidth:100}]}},methods:{pageChange:function(t){this.page.pageNum=t,this.getList()},getList:function(t){var e=this,a={id:t,datas:this.page};this.loading=!0,Object(k["k"])(a).then(function(){var t=H(n.a.mark((function t(a){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.recordData=a.data,e.loading=!1;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))}}},U=J,Y=(a("bcbf"),Object(v["a"])(U,q,G,!1,null,"f2908046",null)),Z=Y.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"请修改内容",closable:!1},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"备注：",prop:"remark"}},[a("Input",{staticStyle:{width:"100%"},attrs:{maxlength:"200","show-word-limit":"",type:"textarea",placeholder:"订单备注"},model:{value:t.formValidate.remark,callback:function(e){t.$set(t.formValidate,"remark",e)},expression:"formValidate.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.putRemark("formValidate")}}},[t._v("提交")]),a("Button",{on:{click:function(e){return t.cancel("formValidate")}}},[t._v("取消")])],1)],1)},X=[];function tt(t,e,a,r,i,s,n){try{var o=t[s](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,i)}function et(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var s=t.apply(e,a);function n(t){tt(s,r,i,n,o,"next",t)}function o(t){tt(s,r,i,n,o,"throw",t)}n(void 0)}))}}var at,rt={name:"orderMark",data:function(){return{tabs:"",formValidate:{remark:""},modals:!1,ruleValidate:{remark:[{required:!0,message:"请输入备注信息",trigger:"blur"}]}}},props:{orderId:Number,tab:Number},methods:{currentTab:function(t,e){this.tabs=t,this.formValidate.remark=e},cancel:function(t){this.modals=!1},putRemark:function(t){var e=this,a={id:this.orderId,remark:this.formValidate};this.$refs[t].validate((function(r){r?3==e.tabs?Object(d["q"])(a).then(function(){var a=et(n.a.mark((function a(r){return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$Message.success(r.msg),e.modals=!1,e.$refs[t].resetFields(),e.$emit("submitFail");case 4:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)})):4==e.tabs?Object(d["s"])(a).then(function(){var a=et(n.a.mark((function a(r){return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$Message.success(r.msg),e.modals=!1,e.$refs[t].resetFields(),e.$emit("submitFail");case 4:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)})):Object(d["r"])(a).then(function(){var a=et(n.a.mark((function a(r){return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$Message.success(r.msg),e.modals=!1,e.$refs[t].resetFields(),e.$emit("submitFail");case 4:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)})):e.$Message.warning("请填写备注信息")}))}}},it=rt,st=Object(v["a"])(it,K,X,!1,null,"f7e51aac",null),nt=st.exports,ot=a("0fc4"),lt=a("0b65");function ct(t,e,a,r,i,s,n){try{var o=t[s](n),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(r,i)}function dt(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var s=t.apply(e,a);function n(t){ct(s,r,i,n,o,"next",t)}function o(t){ct(s,r,i,n,o,"throw",t)}n(void 0)}))}}function ut(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function mt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ut(a,!0).forEach((function(e){vt(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ut(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function vt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var ft={name:"index",components:{userDetails:I["a"],editFrom:C["a"],detailsFrom:z,orderRecord:Z,orderRemark:nt,orderSend:L,expandRow:w,Distribution:p},data:function(){return{openErp:!1,distshow:!1,delfromData:{},pay_type:"",status:0,FromData:null,orderDatalist:null,orderId:0,treeSelect:[{id:"free",label:"试用"},{id:"month",label:"月卡"},{id:"quarter",label:"季卡"},{id:"year",label:"年卡"},{id:"ever",label:"永久"},{id:"card",label:"卡密激活"}],staffData:[],tablists:{},orderChartType:{},options:lt["a"],timeVal:[],orderData:{page:1,limit:10,type:6,status:"",time:"",real_name:"",store_id:""},rechargeData:{nickname:"",limit:15},vipData:{member_type:"",limit:15},currentTab:"6",tableList:[],total:0,loading:!1,rechargeColumns:[{title:"ID",key:"id",width:60},{title:"订单号",key:"order_id",minWidth:180},{title:"用户信息",slot:"userInfo",minWidth:160},{title:"支付金额",key:"price",minWidth:110},{title:"充值类型",key:"_recharge_type",minWidth:100},{title:"支付时间",key:"_pay_time",minWidth:130},{title:"关联店员",key:"_recharge_type",minWidth:100},{title:"操作",slot:"action",fixed:"right",minWidth:200,align:"center"}],vipColumns:[{title:"订单号",key:"order_id",minWidth:180},{title:"用户信息",slot:"userInfo",minWidth:180},{title:"会员类型",key:"member_type",minWidth:100},{title:"有效期限（天）",minWidth:100,render:function(t,e){return t("span",-1===e.row.vip_day?"永久":e.row.vip_day)}},{title:"支付金额",key:"pay_price",minWidth:100},{title:"支付方式",key:"pay_type",minWidth:100},{title:"购买时间",key:"pay_time",minWidth:130},{title:"关联店员",key:"pay_time",minWidth:130},{title:"操作",slot:"action",fixed:"right",minWidth:200,align:"center"}],columns:[{type:"expand",width:30,render:function(t,e){return t(w,{props:{row:e.row}})}},{title:"订单号",slot:"order_id",minWidth:160},{title:"用户信息",slot:"userInfo",minWidth:120},{title:"商品信息",slot:"info",minWidth:350},{title:"实际支付",slot:"pay_price",minWidth:120},{title:"支付方式",key:"pay_type_name",minWidth:120},{title:"收银店员",key:"clerk_name",minWidth:120},{title:"下单时间",key:"add_time",minWidth:150},{title:"订单状态",slot:"statusName",minWidth:120},{title:"操作",slot:"action",fixed:"right",minWidth:200,align:"center"}],rowActive:{}}},computed:mt({},Object(o["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:96},labelPosition:function(){return this.isMobile?"top":"right"}}),created:function(){this.getErpConfig(),this.getTabs(),this.getChart(),this.staffList(),this.getList()},mounted:function(){},methods:(at={getErpConfig:function(){var t=this;Object(ot["a"])().then((function(e){t.openErp=e.data.open_erp})).catch((function(e){t.$Message.error(e.msg)}))},remark:function(t){switch(this.orderId=t.id,this.$refs.remarks.modals=!0,this.currentTab){case"3":case"4":this.$refs.remarks.currentTab(this.currentTab,t.remarks);break;default:this.$refs.remarks.currentTab(this.currentTab,t.remark)}},detail:function(t){this.orderId=t.id,this.getData(t.id),this.rowActive=t},distribution:function(t){this.$refs.distshow.modals=!0,this.$refs.distshow.getList(t.id)},record:function(t){this.orderId=t.id,this.$refs.record.modals=!0,this.$refs.record.getList(t.id)},splitOrderDetail:function(t){this.$router.push({path:"split_list",query:{id:t.id}})},delOrder:function(t,e){var a=this;if(1===t.is_del)this.$modalSure(e).then((function(t){a.$Message.success(t.msg),a.getList()})).catch((function(t){a.$Message.error(t.msg)}));else{var r="错误！",i="<p>您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！</p>";this.$Modal.error({title:r,content:i})}},getData:function(t,e){var a=this;Object(d["d"])(t).then(function(){var t=dt(n.a.mark((function t(r){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e||(a.$refs.detailss.modals=!0),a.$refs.detailss.activeName="detail",a.orderDatalist=r.data,a.orderDatalist.orderInfo.refund_reason_wap_img)try{a.orderDatalist.orderInfo.refund_reason_wap_img=JSON.parse(a.orderDatalist.orderInfo.refund_reason_wap_img)}catch(i){a.orderDatalist.orderInfo.refund_reason_wap_img=[]}case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){a.$Message.error(t.msg)}))},bindWrite:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确定要核销该订单吗？",cancelText:"取消",closable:!0,maskClosable:!0,onOk:function(){Object(d["K"])(t.order_id).then((function(t){e.$Message.success(t.msg),e.getList()}))},onCancel:function(){}})},delivery:function(t){var e=this;Object(d["e"])(t.id).then(function(){var t=dt(n.a.mark((function t(a){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.FromData=a.data,e.$refs.edits.modals=!0;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},edit:function(t){this.getOrderData(t.id)},getOrderData:function(t){var e=this;Object(d["f"])(t).then(function(){var t=dt(n.a.mark((function t(a){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==a.data.status){t.next=2;break}return t.abrupt("return",e.$authLapse(a.data));case 2:e.$authLapse(a.data),e.FromData=a.data,e.$refs.edits.modals=!0;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},submitFail:function(){this.status=0,3==this.currentTab?this.getRecharge():4==this.currentTab?this.getVipOrder():(this.getList(),this.getData(this.orderId,1))},sendOrder:function(t){var e=this;this.$store.commit("admin/order/setSplitOrder",t.total_num),this.$refs.send.modals=!0,this.orderId=t.id,this.status=t._status,this.pay_type=t.pay_type,this.$refs.send.getList(),this.$refs.send.getDeliveryList(),this.$nextTick((function(a){e.$refs.send.getCartInfo(t._status,t.id)}))},showUserInfo:function(t){this.$refs.userDetails.modals=!0,this.$refs.userDetails.activeName="info",this.$refs.userDetails.getDetails(t.uid)},clearData:function(){this.orderData={page:1,limit:15,type:6,status:"",time:"",real_name:"",store_id:""},this.rechargeData={nickname:"",limit:15},this.vipData={member_type:"",limit:15}},staffList:function(){var t=this;Object(d["u"])().then((function(e){t.staffData=e.data})).catch((function(e){t.$Message.error(e.msg)}))},getTabs:function(){var t=this;Object(d["m"])().then((function(e){t.tablists=e.data})).catch((function(e){t.$Message.error(e.msg)}))},getChart:function(){var t=this;Object(d["j"])({type:this.currentTab}).then((function(e){t.orderChartType=e.data})).catch((function(e){t.$Message.error(e.msg)}))}},vt(at,"edit",(function(t){this.getOrderData(t.id)})),vt(at,"onClickTab",(function(){this.clearData(),this.orderData.type=this.currentTab,this.orderData.page=1,this.timeVal=[],this.getChart(),this.searchList()})),vt(at,"searchList",(function(){3==this.currentTab?this.getRecharge():4==this.currentTab?this.getVipOrder():this.getList()})),vt(at,"userSearchs",(function(){this.orderData.page=1,this.searchList()})),vt(at,"selectStatus",(function(){this.orderData.page=1,this.getList()})),vt(at,"getVipOrder",(function(){var t=this;this.loading=!0,this.tableList=[],this.vipData.name=this.rechargeData.nickname,this.vipData.add_time=this.orderData.time,this.vipData.store_id=this.orderData.store_id,this.vipData.page=this.orderData.page,Object(d["p"])(this.vipData).then((function(e){var a=e.data;t.tableList=a.list,t.total=a.count,t.loading=!1})).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))})),vt(at,"getRecharge",(function(){var t=this;this.loading=!0,this.tableList=[],this.rechargeData.data=this.orderData.time,this.rechargeData.store_id=this.orderData.store_id,this.rechargeData.page=this.orderData.page,Object(d["o"])(this.rechargeData).then((function(e){var a=e.data;t.tableList=a.list,t.total=a.count,t.loading=!1})).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))})),vt(at,"getList",(function(){var t=this;this.loading=!0,this.tableList=[],Object(d["n"])(this.orderData).then((function(e){var a=e.data;a.data.forEach((function(e){e.id==t.orderId&&(t.rowActive=e)})),t.tableList=a.data,t.total=a.count,t.loading=!1})).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))})),vt(at,"pageChange",(function(t){this.orderData.page=t,this.searchList()})),vt(at,"orderSearch",(function(){this.orderData.page=1,this.searchList()})),vt(at,"onchangeTime",(function(t){this.timeVal=t,this.orderData.time=this.timeVal.join("-"),this.orderData.page=1,t[0]||(this.orderData.time=""),this.searchList()})),vt(at,"selectChange",(function(){this.orderData.page=1,this.timeVal=[],this.searchList()})),vt(at,"getExcelData",(function(t){var e=this;return new Promise((function(a,r){var i=1;i=6==e.currentTab||7==e.currentTab||5==e.currentTab?1:3==e.currentTab?2:3,Object(d["l"])(t,i).then((function(t){return a(t.data)}))}))})),at)},pt=ft,_t=(a("aab0"),Object(v["a"])(pt,r,i,!1,null,"63ee9d7a",null));e["default"]=_t.exports},f372:function(t,e,a){}}]);