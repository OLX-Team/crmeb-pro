(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56bb8f84"],{"482d":function(t,e,n){},"90e7":function(t,e,n){"use strict";n.d(e,"v",(function(){return o})),n.d(e,"k",(function(){return i})),n.d(e,"Cb",(function(){return a})),n.d(e,"Bb",(function(){return c})),n.d(e,"j",(function(){return u})),n.d(e,"Z",(function(){return s})),n.d(e,"gb",(function(){return d})),n.d(e,"cb",(function(){return l})),n.d(e,"db",(function(){return m})),n.d(e,"d",(function(){return f})),n.d(e,"ab",(function(){return p})),n.d(e,"Gb",(function(){return h})),n.d(e,"eb",(function(){return b})),n.d(e,"n",(function(){return g})),n.d(e,"m",(function(){return O})),n.d(e,"c",(function(){return j})),n.d(e,"S",(function(){return v})),n.d(e,"ib",(function(){return _})),n.d(e,"R",(function(){return k})),n.d(e,"jb",(function(){return w})),n.d(e,"tb",(function(){return y})),n.d(e,"I",(function(){return C})),n.d(e,"sb",(function(){return x})),n.d(e,"q",(function(){return I})),n.d(e,"o",(function(){return P})),n.d(e,"p",(function(){return T})),n.d(e,"r",(function(){return $})),n.d(e,"s",(function(){return S})),n.d(e,"V",(function(){return D})),n.d(e,"W",(function(){return L})),n.d(e,"T",(function(){return U})),n.d(e,"U",(function(){return E})),n.d(e,"K",(function(){return M})),n.d(e,"C",(function(){return F})),n.d(e,"G",(function(){return N})),n.d(e,"F",(function(){return B})),n.d(e,"x",(function(){return R})),n.d(e,"H",(function(){return A})),n.d(e,"z",(function(){return G})),n.d(e,"E",(function(){return z})),n.d(e,"y",(function(){return J})),n.d(e,"w",(function(){return H})),n.d(e,"J",(function(){return V})),n.d(e,"i",(function(){return W})),n.d(e,"e",(function(){return q})),n.d(e,"f",(function(){return K})),n.d(e,"Db",(function(){return Q})),n.d(e,"Eb",(function(){return X})),n.d(e,"Fb",(function(){return Y})),n.d(e,"hb",(function(){return Z})),n.d(e,"ub",(function(){return tt})),n.d(e,"L",(function(){return et})),n.d(e,"wb",(function(){return nt})),n.d(e,"vb",(function(){return rt})),n.d(e,"xb",(function(){return ot})),n.d(e,"yb",(function(){return it})),n.d(e,"zb",(function(){return at})),n.d(e,"Ab",(function(){return ct})),n.d(e,"Hb",(function(){return ut})),n.d(e,"Ib",(function(){return st})),n.d(e,"M",(function(){return dt})),n.d(e,"g",(function(){return lt})),n.d(e,"Jb",(function(){return mt})),n.d(e,"kb",(function(){return ft})),n.d(e,"lb",(function(){return pt})),n.d(e,"D",(function(){return ht})),n.d(e,"A",(function(){return bt})),n.d(e,"fb",(function(){return gt})),n.d(e,"mb",(function(){return Ot})),n.d(e,"nb",(function(){return jt})),n.d(e,"ob",(function(){return vt})),n.d(e,"B",(function(){return _t})),n.d(e,"bb",(function(){return kt})),n.d(e,"Y",(function(){return wt})),n.d(e,"N",(function(){return yt})),n.d(e,"Q",(function(){return Ct})),n.d(e,"O",(function(){return xt})),n.d(e,"P",(function(){return It})),n.d(e,"h",(function(){return Pt})),n.d(e,"u",(function(){return Tt})),n.d(e,"t",(function(){return $t})),n.d(e,"X",(function(){return St})),n.d(e,"pb",(function(){return Dt})),n.d(e,"rb",(function(){return Lt})),n.d(e,"b",(function(){return Ut})),n.d(e,"qb",(function(){return Et})),n.d(e,"l",(function(){return Mt})),n.d(e,"a",(function(){return Ft}));var r=n("b6bd");function o(t){return Object(r["a"])({url:"setting/config/header_basics",method:"get",params:t})}function i(t,e){return Object(r["a"])({url:e,method:"get",params:t})}function a(t){return Object(r["a"])({url:t.url,method:"get",params:t.data})}function c(){return Object(r["a"])({url:"notify/sms/temp/create",method:"get"})}function u(t){return Object(r["a"])({url:"serve/login",method:"post",data:t})}function s(){return Object(r["a"])({url:"serve/info",method:"get"})}function d(t){return Object(r["a"])({url:"serve/sms/open",method:"get",params:t})}function l(t){return Object(r["a"])({url:"serve/opn_express",method:"post",data:t})}function m(t){return Object(r["a"])({url:"serve/open",method:"get",params:t})}function f(t){return Object(r["a"])({url:"serve/checkCode",method:"post",data:t})}function p(t){return Object(r["a"])({url:"serve/modify",method:"post",data:t})}function h(t){return Object(r["a"])({url:"serve/update_phone",method:"post",data:t})}function b(t){return Object(r["a"])({url:"serve/record",method:"get",params:t})}function g(t){return Object(r["a"])({url:"serve/export_temp",method:"get",params:t})}function O(){return Object(r["a"])({url:"serve/export_all",method:"get"})}function j(t){return Object(r["a"])({url:"serve/captcha",method:"post",data:t})}function v(t){return Object(r["a"])({url:"serve/register",method:"post",data:t})}function _(t){return Object(r["a"])({url:"serve/meal_list",method:"get",params:t})}function k(t){return Object(r["a"])({url:"serve/pay_meal",method:"post",data:t})}function w(t){return Object(r["a"])({url:"notify/sms/record",method:"get",params:t})}function y(){return Object(r["a"])({url:"merchant/store",method:"GET"})}function C(){return Object(r["a"])({url:"merchant/store/address",method:"GET"})}function x(t){return Object(r["a"])({url:"merchant/store/".concat(t.id),method:"POST",data:t})}function I(t){return Object(r["a"])({url:"freight/express",method:"get",params:t})}function P(){return Object(r["a"])({url:"/freight/express/create",method:"get"})}function T(t){return Object(r["a"])({url:"freight/express/".concat(t,"/edit"),method:"get"})}function $(t){return Object(r["a"])({url:"freight/express/set_status/".concat(t.id,"/").concat(t.status),method:"PUT"})}function S(){return Object(r["a"])({url:"freight/express/sync_express",method:"get"})}function D(t){return Object(r["a"])({url:"setting/role",method:"GET",params:t})}function L(t){return Object(r["a"])({url:"setting/role/set_status/".concat(t.id,"/").concat(t.status),method:"PUT"})}function U(t){return Object(r["a"])({url:"setting/role/".concat(t.id),method:"post",data:t})}function E(t){return Object(r["a"])({url:"setting/role/".concat(t,"/edit"),method:"get"})}function M(){return Object(r["a"])({url:"setting/role/create",method:"get"})}function F(t){return Object(r["a"])({url:"app/wechat/kefu",method:"get",params:t})}function N(t){return Object(r["a"])({url:"app/wechat/kefu/create",method:"get",params:t})}function B(){return Object(r["a"])({url:"app/wechat/kefu/add",method:"get"})}function R(t){return Object(r["a"])({url:"app/wechat/kefu",method:"post",data:t})}function A(t){return Object(r["a"])({url:"app/wechat/kefu/set_status/".concat(t.id,"/").concat(t.account_status),method:"PUT"})}function G(t){return Object(r["a"])({url:"app/wechat/kefu/".concat(t,"/edit"),method:"GET"})}function z(t,e){return Object(r["a"])({url:"app/wechat/kefu/record/".concat(e),method:"GET",params:t})}function J(t){return Object(r["a"])({url:"app/wechat/kefu/chat_list",method:"GET",params:t})}function H(){return Object(r["a"])({url:"notify/sms/is_login",method:"GET"})}function V(){return Object(r["a"])({url:"notify/sms/logout",method:"GET"})}function W(t){return Object(r["a"])({url:"setting/city/list/".concat(t),method:"get"})}function q(t){return Object(r["a"])({url:"setting/city/add/".concat(t),method:"get"})}function K(t){return Object(r["a"])({url:"setting/city/".concat(t,"/edit"),method:"get"})}function Q(t){return Object(r["a"])({url:"setting/shipping_templates/list",method:"get",params:t})}function X(t){return Object(r["a"])({url:"setting/shipping_templates/city_list",method:"get"})}function Y(t,e){return Object(r["a"])({url:"setting/shipping_templates/save/".concat(t),method:"post",data:e})}function Z(t){return Object(r["a"])({url:"setting/shipping_templates/".concat(t,"/edit"),method:"get"})}function tt(){return Object(r["a"])({url:"merchant/store/get_header",method:"get"})}function et(t){return Object(r["a"])({url:"merchant/store",method:"get",params:t})}function nt(t,e){return Object(r["a"])({url:"merchant/store/set_show/".concat(t,"/").concat(e),method:"put"})}function rt(t){return Object(r["a"])({url:"merchant/store/get_info/".concat(t),method:"get"})}function ot(t){return Object(r["a"])({url:"merchant/store_staff",method:"get",params:t})}function it(){return Object(r["a"])({url:"merchant/store_staff/create",method:"get"})}function at(t){return Object(r["a"])({url:"merchant/store_staff/".concat(t,"/edit"),method:"get"})}function ct(t,e){return Object(r["a"])({url:"merchant/store_staff/set_show/".concat(t,"/").concat(e),method:"put"})}function ut(t){return Object(r["a"])({url:"merchant/verify_order",method:"get",params:t})}function st(t){return Object(r["a"])({url:"merchant/verify/spread_info/".concat(t),method:"get"})}function dt(){return Object(r["a"])({url:"merchant/store_list",method:"get"})}function lt(){return Object(r["a"])({url:"setting/city/clean_cache",method:"get"})}function mt(t){return Object(r["a"])({url:"app/wechat/speechcraft",method:"get",params:t})}function ft(t){return Object(r["a"])({url:"app/wechat/speechcraft/create",method:"get",params:t})}function pt(t){return Object(r["a"])({url:"app/wechat/speechcraft/".concat(t,"/edit"),method:"get"})}function ht(t){return Object(r["a"])({url:"app/wechat/kefu/login/".concat(t),method:"get"})}function bt(t){return Object(r["a"])({url:"app/feedback",method:"get",params:t})}function gt(t){return Object(r["a"])({url:"serve/sms/sign",method:"PUT",data:t})}function Ot(){return Object(r["a"])({url:"app/wechat/speechcraftcate",method:"get"})}function jt(){return Object(r["a"])({url:"app/wechat/speechcraftcate/create",method:"get"})}function vt(t){return Object(r["a"])({url:"app/wechat/speechcraftcate/".concat(t,"/edit"),method:"get"})}function _t(t){return Object(r["a"])({url:"app/feedback/".concat(t,"/edit"),method:"get"})}function kt(){return Object(r["a"])({url:"serve/open",method:"get"})}function wt(){return Object(r["a"])({url:"serve/dump_open",method:"get"})}function yt(t){return Object(r["a"])({url:"setting/system_out/index",method:"get",params:t})}function Ct(t,e){return Object(r["a"])({url:"setting/system_out/set_status/".concat(t,"/").concat(e),method:"put"})}function xt(t){return Object(r["a"])({url:"setting/system_out/save",method:"post",params:t})}function It(t,e){return Object(r["a"])({url:"setting/system_out/update/".concat(t),method:"post",params:e})}function Pt(t){return Object(r["a"])({url:"city",method:"get",params:t})}function Tt(t){return Object(r["a"])({url:"setting/config/edit_new_build/"+t,method:"get"})}function $t(){return Object(r["a"])({url:"/setting/config/image",method:"get"})}function St(t){return Object(r["a"])({url:"setting/config/save_basics",method:"post",data:t})}function Dt(t){return Object(r["a"])({url:"/setting/config/storage",method:"get",params:t})}function Lt(t){return Object(r["a"])({url:"/setting/config/storage/synch/".concat(t),method:"put"})}function Ut(t){return Object(r["a"])({url:"/setting/config/storage/create/".concat(t),method:"get"})}function Et(t){return Object(r["a"])({url:"/setting/config/storage/status/".concat(t),method:"put"})}function Mt(t){return Object(r["a"])({url:"/setting/config/storage/domain/".concat(t),method:"get"})}function Ft(t){return Object(r["a"])({url:"/setting/config/storage/form/".concat(t),method:"get"})}},"9b41":function(t,e,n){"use strict";n.d(e,"V",(function(){return o})),n.d(e,"P",(function(){return i})),n.d(e,"U",(function(){return a})),n.d(e,"y",(function(){return c})),n.d(e,"v",(function(){return u})),n.d(e,"x",(function(){return s})),n.d(e,"w",(function(){return d})),n.d(e,"z",(function(){return l})),n.d(e,"s",(function(){return m})),n.d(e,"k",(function(){return f})),n.d(e,"j",(function(){return p})),n.d(e,"E",(function(){return h})),n.d(e,"u",(function(){return b})),n.d(e,"F",(function(){return g})),n.d(e,"Q",(function(){return O})),n.d(e,"G",(function(){return j})),n.d(e,"J",(function(){return v})),n.d(e,"W",(function(){return _})),n.d(e,"h",(function(){return k})),n.d(e,"g",(function(){return w})),n.d(e,"t",(function(){return y})),n.d(e,"m",(function(){return C})),n.d(e,"c",(function(){return x})),n.d(e,"b",(function(){return I})),n.d(e,"a",(function(){return P})),n.d(e,"i",(function(){return T})),n.d(e,"d",(function(){return $})),n.d(e,"D",(function(){return S})),n.d(e,"H",(function(){return D})),n.d(e,"I",(function(){return L})),n.d(e,"f",(function(){return U})),n.d(e,"N",(function(){return E})),n.d(e,"M",(function(){return M})),n.d(e,"l",(function(){return F})),n.d(e,"T",(function(){return N})),n.d(e,"e",(function(){return B})),n.d(e,"L",(function(){return R})),n.d(e,"K",(function(){return A})),n.d(e,"O",(function(){return G})),n.d(e,"B",(function(){return z})),n.d(e,"r",(function(){return J})),n.d(e,"q",(function(){return H})),n.d(e,"n",(function(){return V})),n.d(e,"o",(function(){return W})),n.d(e,"p",(function(){return q})),n.d(e,"A",(function(){return K})),n.d(e,"R",(function(){return Q})),n.d(e,"S",(function(){return X})),n.d(e,"C",(function(){return Y}));var r=n("b6bd");function o(){return Object(r["a"])({url:"work/tree",method:"get"})}function i(){return Object(r["a"])({url:"work/label",method:"get"})}function a(){return Object(r["a"])({url:"work/synchMember",method:"post"})}function c(){return Object(r["a"])({url:"work/channel/cate",method:"get"})}function u(){return Object(r["a"])({url:"work/channel/cate/create",method:"get"})}function s(t){return Object(r["a"])({url:"/work/channel/cate/".concat(t,"/edit"),method:"get"})}function d(t){return Object(r["a"])({url:"/work/channel/cate/".concat(t),method:"delete"})}function l(t){return Object(r["a"])({url:"work/channel/code",method:"get",params:t})}function m(t){return Object(r["a"])({url:"work/channel/code",method:"post",data:t})}function f(t){return Object(r["a"])({url:"work/channel/code/".concat(t),method:"get"})}function p(t){return Object(r["a"])({url:"work/channel/code/client",method:"get",params:t})}function h(t,e){return Object(r["a"])({url:"work/channel/code/".concat(t),method:"put",data:e})}function b(t){return Object(r["a"])({url:"work/channel/code/bactch/cate",method:"post",data:t})}function g(){return Object(r["a"])({url:"work/department",method:"get"})}function O(t){return Object(r["a"])({url:"work/member",method:"get",params:t})}function j(t){return Object(r["a"])({url:"work/group_chat",method:"get",params:t})}function v(){return Object(r["a"])({url:"work/group_chat/synch",method:"post"})}function _(t){return Object(r["a"])({url:"work/welcome",method:"post",data:t})}function k(t){return Object(r["a"])({url:"work/welcome",method:"get",params:t})}function w(t){return Object(r["a"])({url:"work/welcome/".concat(t),method:"get"})}function y(t,e){return Object(r["a"])({url:"work/welcome/".concat(t),method:"put",data:e})}function C(t){return Object(r["a"])({url:"work/group_chat_auth",method:"post",data:t})}function x(t){return Object(r["a"])({url:"work/group_chat_auth",method:"get",params:t})}function I(t){return Object(r["a"])({url:"work/group_chat_auth/".concat(t),method:"get"})}function P(t,e){return Object(r["a"])({url:"work/group_chat_auth/".concat(t),method:"put",data:e})}function T(t){return Object(r["a"])({url:"work/client",method:"get",params:t})}function $(t){return Object(r["a"])({url:"work/group_chat/member",method:"get",params:t})}function S(){return Object(r["a"])({url:"work/client/synch",method:"get"})}function D(t){return Object(r["a"])({url:"work/group_chat/statistics",method:"get",params:t})}function L(t){return Object(r["a"])({url:"work/group_chat/statisticsList",method:"get",params:t})}function U(t){return Object(r["a"])({url:"work/group_template",method:"get",params:t})}function E(t){return Object(r["a"])({url:"work/group_template",method:"post",data:t})}function M(t){return Object(r["a"])({url:"work/group_template/".concat(t),method:"get"})}function F(t){return Object(r["a"])({url:"work/moment",method:"get",params:t})}function N(t){return Object(r["a"])({url:"/work/moment",method:"post",data:t})}function B(t){return Object(r["a"])({url:"work/group_template_chat",method:"get",params:t})}function R(t){return Object(r["a"])({url:"work/group_template_chat",method:"post",data:t})}function A(t){return Object(r["a"])({url:"work/group_template_chat/".concat(t),method:"get"})}function G(t){return Object(r["a"])({url:"work/group_template/sendMessage",method:"post",data:t})}function z(t){return Object(r["a"])({url:"work/client/count",method:"post",data:t})}function J(t,e){return Object(r["a"])({url:"work/group_template/memberList/".concat(t),method:"get",params:e})}function H(t,e){return Object(r["a"])({url:"work/group_template/clientList/".concat(t),method:"get",params:e})}function V(t,e){return Object(r["a"])({url:"work/group_template_chat/groupChatList/".concat(t),method:"get",params:e})}function W(t,e){return Object(r["a"])({url:"work/group_template_chat/groupChatOwnerList/".concat(t),method:"get",params:e})}function q(t){return Object(r["a"])({url:"work/group_template_chat/getOwnerChatList",method:"get",params:t})}function K(t){return Object(r["a"])({url:"work/client/batchLabel",method:"post",data:t})}function Q(t){return Object(r["a"])({url:"work/moment/".concat(t),method:"get"})}function X(t){return Object(r["a"])({url:"work/moment_list",method:"get",params:t})}function Y(t,e){return Object(r["a"])({url:"work/client/".concat(t),method:"put",data:e})}},a493:function(t,e,n){},a9e1:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"i-layout-page-header"},[n("PageHeader",{staticClass:"product_tabs",attrs:{"hidden-breadcrumb":""}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("div",{staticStyle:{float:"left"}},[n("router-link",{attrs:{to:{path:"/admin/work/welcome"}}},[n("div",{staticClass:"font-sm after-line"},[n("span",{staticClass:"iconfont iconfanhui"}),n("span",{staticClass:"pl10"},[t._v("返回")])])])],1),n("span",{staticClass:"mr20 ml16"},[t._v("新建好友欢迎语")])])])],1),n("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[n("Form",{attrs:{model:t.formItem,"label-width":110,"label-colon":!0}},[n("FormItem",{attrs:{label:"类型",prop:"type"}},[n("RadioGroup",{model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[n("Radio",{attrs:{label:"0"}},[t._v("通用")]),n("Radio",{attrs:{label:"1"}},[t._v("指定企业成员")])],1),n("div",{staticClass:"desc"},[t._v("\n          一个成员如果被设置了多个欢迎语，将会使用最新设置或修改的欢迎语\n        ")])],1),"1"==t.formItem.type?[n("FormItem",{attrs:{label:"添加成员"}},[n("Button",{on:{click:function(e){return t.addUser()}}},[t._v("添加成员")]),n("div",{staticStyle:{"margin-top":"10px"}},t._l(t.formItem.userids,(function(e,r){return n("Tag",{key:r,attrs:{closable:"",name:e.name,size:"large"},on:{"on-close":t.handleDel}},[t._v(t._s(e.name))])})),1)],1)]:t._e(),n("FormItem",{attrs:{label:"欢迎语内容"}},[n("Input",{staticStyle:{width:"460px"},attrs:{type:"textarea",rows:4},model:{value:t.formItem.content,callback:function(e){t.$set(t.formItem,"content",e)},expression:"formItem.content"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary",ghost:""},on:{click:function(e){return t.insertName()}}},[t._v("插入客户名称")]),n("div",{staticClass:"desc"},[t._v("\n          可以插入客户名称，在发送给客户之前系统会自动解析成客户的名称\n        ")])],1),n("FormItem",[n("Poptip",{attrs:{trigger:"hover"}},[n("template",{slot:"content"},[n("div",{staticClass:"poptip_content"},[n("div",{on:{click:function(e){return t.modalPicTap("image")}}},[n("div",{staticClass:"add_img acea-row row-center-wrapper"},[n("span",{staticClass:"iconfont icontupian4"})]),n("span",{staticClass:"tip_tit"},[t._v("图片")])]),n("div",{on:{click:function(e){return t.addRoutine()}}},[n("div",{staticClass:"add_routine acea-row row-center-wrapper"},[n("span",{staticClass:"iconfont iconxiaochengxu"})]),n("span",{staticClass:"tip_tit"},[t._v("小程序")])])])]),n("Button",{attrs:{type:"success"}},[t._v("添加图片/小程序")])],2)],1),n("FormItem",t._l(t.formItem.attachments,(function(e,r){return n("div",{key:r},[n("div",{staticClass:"\n              ivu-tag\n              ivu-tag-dot\n              ivu-tag-size-default\n              ivu-tag-closable\n              ivu-tag-checked\n            "},["image"==e.msgtype?n("span",{staticClass:"iconfont icontupian4 tag_icon"}):t._e(),"miniprogram"==e.msgtype?n("span",{staticClass:"iconfont iconxiaochengxu tag_icon"}):t._e(),"image"==e.msgtype?n("span",{staticClass:"ivu-tag-text"},[t._v(t._s(e.image.pic_url))]):t._e(),"miniprogram"==e.msgtype?n("span",{staticClass:"ivu-tag-text"},[t._v(t._s(e.miniprogram.title))]):t._e(),"image"==e.msgtype?n("i",{staticClass:"ivu-icon ivu-icon-ios-close",on:{click:function(n){return t.wordsDel(e.image.pic_url)}}}):t._e(),"miniprogram"==e.msgtype?n("i",{staticClass:"ivu-icon ivu-icon-ios-close",on:{click:function(n){return t.wordsDel(e.miniprogram.title)}}}):t._e()])])})),0),n("FormItem",{attrs:{label:"排序"}},[n("InputNumber",{attrs:{"controls-outside":"",min:0,max:999},model:{value:t.formItem.sort,callback:function(e){t.$set(t.formItem,"sort",e)},expression:"formItem.sort"}}),n("div",{staticClass:"desc"},[t._v("\n            数字越⼤排序越靠前 \n          ")])],1)],2)],1),n("Card",{staticClass:"fixed-card",style:{left:t.menuCollapse?t.isMobile?"0":"80px":"200px"},attrs:{bordered:!1,"dis-hover":""}},[n("div",{staticClass:"acea-row row-center-wrapper"},[n("Button",{staticClass:"step_btn",attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1)]),n("Modal",{attrs:{width:"960px",scrollable:"","footer-hide":"",closable:"",title:"logo","mask-closable":!1,"z-index":9},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?n("uploadPictures",{attrs:{isChoice:t.isChoice,gridBtn:t.gridBtn,gridPic:t.gridPic},on:{getPic:t.getPic}}):t._e()],1),n("Modal",{attrs:{title:"添加小程序消息","z-index":1},on:{"on-ok":t.routineConfirm},model:{value:t.modalRoutine,callback:function(e){t.modalRoutine=e},expression:"modalRoutine"}},[n("Form",{attrs:{model:t.formItem,"label-width":110}},[n("FormItem",{attrs:{label:"封面图:"}},[n("div",{staticClass:"picBox",on:{click:function(e){return t.modalPicTap("routine")}}},[t.rontineObj.miniprogram.pic_url?n("div",{staticClass:"pictrue"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.rontineObj.miniprogram.pic_url,expression:"rontineObj.miniprogram.pic_url"}]})]):n("div",{staticClass:"upLoad"},[n("div",{staticClass:"iconfont"},[t._v("+")])])])]),n("FormItem",{attrs:{label:"小程序消息标题:"}},[n("Input",{model:{value:t.rontineObj.miniprogram.title,callback:function(e){t.$set(t.rontineObj.miniprogram,"title",e)},expression:"rontineObj.miniprogram.title"}})],1),n("FormItem",{attrs:{label:"小程序Appid:"}},[n("Input",{model:{value:t.rontineObj.miniprogram.appid,callback:function(e){t.$set(t.rontineObj.miniprogram,"appid",e)},expression:"rontineObj.miniprogram.appid"}})],1),n("FormItem",{attrs:{label:"小程序功能页:"}},[n("Input",{model:{value:t.rontineObj.miniprogram.page,callback:function(e){t.$set(t.rontineObj.miniprogram,"page",e)},expression:"rontineObj.miniprogram.page"}})],1)],1)],1),n("department",{ref:"department",attrs:{"active-department":t.activeDepartment,"is-site":t.isSite,userList:t.userList,"only-department":t.onlyDepartment},on:{changeMastart:t.changeMastart}})],1)},o=[],i=n("2f62"),a=n("b0e7"),c=n("90e7"),u=n("c297"),s=n("9b41");function d(t){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={data:function(){return{formItem:{sort:0,type:"0",userids:[],content:"",attachments:[]},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},rontineObj:{msgtype:"miniprogram",miniprogram:{pic_url:"",pic_media_id:"",title:"",appid:"",page:""}},imageObj:{msgtype:"image",image:{media_id:"",pic_url:""}},picTit:"",modalPic:!1,modalRoutine:!1,isChoice:"单选",activeDepartment:{},isSite:!0,onlyDepartment:!1,openType:"",userList:[]}},components:{uploadPictures:a["a"],department:u["a"]},computed:m({},Object(i["e"])("admin/layout",["isMobile","menuCollapse"]),{labelWidth:function(){return this.isMobile?void 0:80},labelPosition:function(){return this.isMobile?"top":"left"}}),mounted:function(){"0"!==this.$route.params.id&&this.$route.params.id?this.getInfo():this.$route.params.id},methods:{modalPicTap:function(t){this.modalPic=!0,this.picTit=t},addRoutine:function(){var t=this;Object(c["u"])("routine").then((function(e){var n=e.data;t.rontineObj.miniprogram.pic_url="",t.rontineObj.miniprogram.title=n.routine_name.value,t.rontineObj.miniprogram.appid=n.routine_appId.value,t.rontineObj.miniprogram.page="/pages/index/index"})),this.modalRoutine=!0},addUser:function(){this.userList=this.formItem.userids,this.$refs.department.memberStatus=!0},handleDel:function(t,e){var n=this.formItem.userids.findIndex((function(t){return t.name==e}));this.formItem.userids.splice(n,1)},wordsDel:function(t){var e=this.formItem.attachments.indexOf(t);this.formItem.attachments.splice(e,1)},changeMastart:function(t,e){this.formItem.userids=t.map((function(t){return{userid:t.userid,name:t.name}}))},getPic:function(t){switch(this.picTit){case"image":this.imageObj.image.pic_url=t.att_dir,this.formItem.attachments.push(this.imageObj);break;case"routine":this.rontineObj.miniprogram.pic_url=t.att_dir;break}this.modalPic=!1},insertName:function(){this.formItem.content=this.formItem.content.concat("##客户名称##")},routineConfirm:function(){var t=this.deepClone(this.rontineObj);this.formItem.attachments.push(t)},getInfo:function(){var t=this;Object(s["g"])(this.$route.params.id).then((function(e){t.formItem.type=e.data.type.toString(),t.formItem.attachments=e.data.attachments,t.formItem.content=e.data.content,t.formItem.sort=e.data.sort,e.data.userList.length?t.formItem.userids=e.data.userList.map((function(t){return{userid:t.userid,welcome_id:t.welcome_id,name:t.member.name}})):t.$set(t.formItem,"userids",[])})).catch((function(e){t.$Message.error(e.msg)}))},submit:function(){var t=this,e=this.deepClone(this.formItem);1==e.type&&(e.userids=e.userids.map((function(t){return t.userid}))),0==e.type&&e.userids.length&&(e.userids=e.userids.map((function(t){return t.userid})),delete e.userList),e.type=Number(e.type),"0"!==this.$route.params.id&&this.$route.params.id?Object(s["t"])(this.$route.params.id,e).then((function(e){t.$Message.success("欢迎语修改成功"),t.$router.push("/admin/work/welcome")})).catch((function(e){t.$Message.error(e.msg)})):this.$route.params.id||Object(s["W"])(e).then((function(e){t.$Message.success("欢迎语新建成功"),t.$router.push("/admin/work/welcome")})).catch((function(e){t.$Message.error(e.msg)}))},deepClone:function(t){var e=Array.isArray(t)?[]:{};if(t&&"object"===d(t))for(var n in t)t.hasOwnProperty(n)&&(e[n]=t&&"object"===d(t[n])?this.deepClone(t[n]):t[n]);return e}}},h=p,b=(n("d85d"),n("2877")),g=Object(b["a"])(h,r,o,!1,null,"1d9fc6ec",null);e["default"]=g.exports},c297:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex"},[n("Modal",{attrs:{width:"680px",title:"选择成员","mask-closable":!1,"z-index":9},on:{"on-ok":t.handleConfirm,"on-cancel":t.handleConcel},model:{value:t.memberStatus,callback:function(e){t.memberStatus=e},expression:"memberStatus"}},[t.isShow?n("div",{staticClass:"container"},[n("Row",[n("Col",{staticClass:"search-p",attrs:{span:24}},[n("Input",{staticClass:"input-with-select",attrs:{placeholder:"搜索成员",search:""},on:{"on-search":t.searchData},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),n("div",{ref:"treeScoll",staticClass:"tree-box",on:{scroll:t.scroll}},[t.isAppoint?t._e():n("el-tree",{ref:"tree",attrs:{data:t.treeData,props:t.defaultProps,"highlight-current":!0,"default-expand-all":!0,"expand-on-click-node":!1,"filter-node-method":t.filterNode},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.node,o=e.data;return n("div",{staticClass:"custom-tree-node"},[n("span",{staticClass:"flex-box",on:{click:function(){return t.append(r,o)}}},[n("Icon",{staticClass:"tree-icon",attrs:{type:"ios-folder",size:"15",color:"#FFCA28"}}),t._v("\n                "+t._s(r.label)+"\n                "),n("span",[t._v("("+t._s(o.member.length)+")")])],1),n("div",[o.member.length?n("div",{staticClass:"user-list"},t._l(o.member,(function(e,r){return n("div",{key:r,staticClass:"user-item",on:{click:function(n){return n.stopPropagation(),t.checkUser(e)}}},[""!==e.avatar?n("img",{attrs:{src:e.avatar,alt:""}}):t._e(),t._v("\n                    "+t._s(e.name)+"\n                  ")])})),0):t._e()])])}}],null,!1,1386218660)})],1)],1),n("div",{staticClass:"select-box"},[n("div",{staticClass:"title"},[t._v("已选择成员")]),n("div",{staticClass:"list-box"},t._l(t.checkUserList,(function(e,r){return n("div",{key:e.id,staticClass:"select-item"},[n("div",{staticClass:"left"},[n("span",[t._v(t._s(e.name))])]),e.isDelete?t._e():n("div",{staticClass:"right-box"},[n("span",{staticClass:"el-icon-close",on:{click:function(n){return t.handleDeleteUser(e,r)}}})])])})),0)])],1):t._e()])],1)},o=[],i=n("9b41"),a={name:"Department",props:{isEdit:{type:Number,default:0},activeDepartment:{type:Object,default:function(){return null}},userList:{type:Array,default:function(){return[]}},isAppoint:{type:Boolean,default:!1},appointList:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,treeData:[],selectList:{},isShow:!1,memberStatus:!1,checkUserList:[],scrollH:0,filterText:"",openType:"",defaultProps:{children:"children",label:"name"}}},watch:{userList:{handler:function(t,e){this.checkUserList=JSON.parse(JSON.stringify(t))},deep:!0},activeDepartment:{handler:function(t,e){var n=this;if(t){this.isShow=!1;var r=[],o=function(){var e=function e(n){r=n.map((function(n,r,o){return n.children?(t.hasOwnProperty(n.id)?n.isCheck=!0:n.isCheck=!1,e(n.children)):t.hasOwnProperty(n.id)?n.isCheck=!0:n.isCheck=!1,o}))};e(n.treeData)};o(),this.$nextTick((function(){n.$set(n,"treeData",r[0]),n.isShow=!0,n.selectList=t}))}},deep:!0},filterText:function(t){this.$refs.tree.filter(t)},isAppoint:{handler:function(t){console.log(this.appointList)},deep:!0}},mounted:function(){this.getTreeData()},methods:{getTreeData:function(){var t=this;Object(i["V"])().then((function(e){t.isShow=!0,t.treeData=e.data}))},handleClick:function(t,e){this.isShow=!1,this.$set(t,"isCheck",!0),this.isShow=!0,this.$set(this.selectList,t.id,t)},append:function(t,e){this.$Message.warning("只允许添加成员")},handleDelete:function(t){var e=this,n=[];this.isShow=!1,delete this.selectList[t.id];var r=function(){var r=function e(r){n=r.map((function(n,r,o){return n.children?(n.id===t.id&&(n.isCheck=!1),e(n.children)):n.id===t.id&&(n.isCheck=!1),o}))};r(e.treeData)};r(),this.$nextTick((function(){e.$set(e,"treeData",n[0]),e.isShow=!0}))},handleConfirm:function(){var t=this.checkUserList;this.$emit("changeMastart",t,this.openType),this.checkUserList=[]},reseatData:function(){var t=this;this.isShow=!1;var e=[],n=function(){var n=function t(n){e=n.map((function(e,n,r){return e.isCheck=!1,e.children?(e.user.forEach((function(t){t.isCheck=!1})),t(e.children)):e.user.forEach((function(t){t.isCheck=!1})),r}))};n(t.treeData)};n(),this.$nextTick((function(){t.checkUserList=JSON.parse(JSON.stringify(t.userList)),t.$set(t,"treeData",e[0]),t.isShow=!0}))},scroll:function(t){this.scrollH=t.target.scrollTop},checkUser:function(t){var e=this;if(0===this.checkUserList.length)this.$set(t,"isCheck",!0),this.checkUserList.push(t);else{var n=this.checkUserList.some((function(e,n){return e.userid===t.userid}));if(n)return this.$Message.warning("该人员已选择");this.$set(t,"isCheck",!0),this.checkUserList.push(t)}this.$nextTick((function(){e.isShow=!0,e.$nextTick((function(){e.$refs.treeScoll.scroll(0,e.scrollH)}))}))},handleDeleteUser:function(t,e){var n=this;this.checkUserList.splice(e,1);var r=function(){var e=function(e){e.forEach((function(e,n,r){e.member.forEach((function(e){e.id===t.id&&(e.isCheck=!1)}))}))};e(n.treeData)};r(),this.$nextTick((function(){n.isShow=!0}))},filterNode:function(t,e,n){return!t||(-1!==e.label.indexOf(t)||this.checkBelongToChooseNode(t,e,n))},checkBelongToChooseNode:function(t,e,n){var r=n.level;if(1===r)return!1;var o=n.parent;if(n.data.user.length>0)var i=n.data.user.map((function(e){return-1!==e.card.name.indexOf(t)}));if(void 0===i)return!1;for(var a=0;a<i.length;a++)if(!0===i[a])return!0;var c=0;while(c<r-1){if(-1!==o.data.label.indexOf(t))return!0;o=o.parent,c++}return!1},getItemTree:function(t){var e=this;return t&&t.forEach((function(t,n){void 0!=t.user&&t.user.length>0&&t.user.forEach((function(t){t.label=t.card.name,t.children=t})),t.children&&t.children.length>0&&e.getItemTree(t.children)})),t},searchData:function(){},handleConcel:function(){}}},c=a,u=(n("ea8a"),n("2877")),s=Object(u["a"])(c,r,o,!1,null,"c541e030",null);e["a"]=s.exports},d85d:function(t,e,n){"use strict";var r=n("482d"),o=n.n(r);o.a},ea8a:function(t,e,n){"use strict";var r=n("a493"),o=n.n(r);o.a}}]);