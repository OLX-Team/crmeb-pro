(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-users-order_confirm-index"],{"1de5":function(t,e,i){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"1f9a":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{style:t.colorStyle},[i("v-uni-view",{staticClass:"order-submission"},[0==t.product_type?i("v-uni-view",{staticClass:"allAddress",style:t.store_self_mention?"":"padding-top:10rpx"},[i("v-uni-view",{staticClass:"nav acea-row"},[t.store_self_mention?i("v-uni-view",{staticClass:"item font-num",class:0==t.shippingType?"on":"on2",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addressType(0)}}}):t._e(),t.store_self_mention?i("v-uni-view",{staticClass:"item font-num",class:1==t.shippingType?"on":"on2",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addressType(1)}}}):t._e()],1),0==t.shippingType?i("v-uni-view",{staticClass:"address acea-row row-between-wrapper",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onAddress.apply(void 0,arguments)}}},[t.addressInfo.real_name?i("v-uni-view",{staticClass:"addressCon"},[i("v-uni-view",{staticClass:"name"},[t._v(t._s(t.addressInfo.real_name)),i("v-uni-text",{staticClass:"phone"},[t._v(t._s(t.addressInfo.phone))])],1),i("v-uni-view",{staticClass:"line1"},[t.addressInfo.is_default?i("v-uni-text",{staticClass:"default font-num"},[t._v("[默认]")]):t._e(),t._v(t._s(t.addressInfo.province)+t._s(t.addressInfo.city)+t._s(t.addressInfo.district)+t._s(t.addressInfo.street)+t._s(t.addressInfo.detail))],1)],1):i("v-uni-view",{staticClass:"addressCon"},[i("v-uni-view",{staticClass:"setaddress"},[t._v("设置收货地址")])],1),i("v-uni-view",{staticClass:"iconfont icon-jiantou"})],1):i("v-uni-view",{staticClass:"address acea-row row-between-wrapper",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showStoreList.apply(void 0,arguments)}}},[t.storeList.length>0?[i("v-uni-view",{staticClass:"addressCon"},[i("v-uni-view",{staticClass:"name"},[t._v(t._s(t.system_store.name)),i("v-uni-text",{staticClass:"phone"},[t._v(t._s(t.system_store.phone))])],1),i("v-uni-view",{staticClass:"line1"},[t._v(t._s(t.system_store.address)+t._s(", "+t.system_store.detailed_address))])],1),i("v-uni-view",{staticClass:"iconfont icon-jiantou"})]:[i("v-uni-view",[t._v("暂无门店信息")])]],2),i("v-uni-view",{staticClass:"line"},[i("v-uni-image",{attrs:{src:"/static/images/line.jpg"}})],1)],1):t._e(),i("orderGoods",{attrs:{cartInfo:t.cartInfo,giveData:t.giveData,shippingType:t.shippingType,product_type:t.product_type,giveCartInfo:t.giveCartInfo}}),i("v-uni-view",{staticClass:"wrapper"},[t.pinkId||t.BargainId||t.combinationId||t.seckillId||t.noCoupon||t.discountId?t._e():i("v-uni-view",{staticClass:"item acea-row row-between-wrapper",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.couponTap.apply(void 0,arguments)}}},[i("v-uni-view",[t._v("优惠券")]),i("v-uni-view",{staticClass:"discount"},[t._v(t._s(t.couponTitle)),i("v-uni-text",{staticClass:"iconfont icon-jiantou"})],1)],1),t.pinkId||t.BargainId||t.combinationId||t.seckillId?t._e():i("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[i("v-uni-view",[t._v("积分抵扣")]),i("v-uni-view",{staticClass:"discount acea-row row-middle"},[i("v-uni-view",[t._v(t._s(t.useIntegral?"剩余积分":"当前积分")),i("v-uni-text",{staticClass:"num font-color"},[t._v(t._s(t.integral||0))])],1),i("v-uni-checkbox-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangeIntegral.apply(void 0,arguments)}}},[i("v-uni-checkbox",{attrs:{disabled:t.integral<=0&&!t.useIntegral,checked:!!t.useIntegral}})],1)],1)],1),t.invoice_func||t.special_invoice?i("v-uni-view",{staticClass:"item acea-row row-between-wrapper",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goInvoice.apply(void 0,arguments)}}},[i("v-uni-view",[t._v("开具发票")]),i("v-uni-view",{staticClass:"discount"},[t._v(t._s(t.invTitle)),i("v-uni-text",{staticClass:"iconfont icon-jiantou"})],1)],1):t._e(),1==t.shippingType?i("v-uni-view",[i("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[i("v-uni-view",[t._v("联系人")]),i("v-uni-view",{staticClass:"discount"},[i("v-uni-input",{attrs:{type:"text",placeholder:"请填写您的联系姓名","placeholder-class":"placeholder"},model:{value:t.contacts,callback:function(e){t.contacts=e},expression:"contacts"}})],1)],1),i("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[i("v-uni-view",[t._v("联系电话")]),i("v-uni-view",{staticClass:"discount"},[i("v-uni-input",{attrs:{type:"number",maxlength:"11",placeholder:"请填写您的联系电话","placeholder-class":"placeholder"},model:{value:t.contactsTel,callback:function(e){t.contactsTel=e},expression:"contactsTel"}})],1)],1)],1):t._e(),t.textareaStatus?i("v-uni-view",{staticClass:"item"},[i("v-uni-view",[t._v("备注信息")]),t.coupon.coupon?t._e():i("v-uni-textarea",{attrs:{"placeholder-class":"placeholder",placeholder:"请添加备注（150字以内）",value:t.mark,maxlength:150,name:"mark"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.bindHideKeyboard.apply(void 0,arguments)}}})],1):t._e()],1),t.confirm.length?i("v-uni-view",{staticClass:"wrapper"},t._l(t.confirm,(function(e,a){return i("v-uni-view",{key:a,staticClass:"item acea-row row-between-wrapper"},[i("v-uni-view",{staticClass:"name"},[e.status?i("span",{staticClass:"asterisk"},[t._v("*")]):t._e(),t._v(t._s(e.title))]),"text"==e.label?i("v-uni-view",{staticClass:"discount"},[i("v-uni-input",{attrs:{type:"text",placeholder:"请填写"+e.title,"placeholder-class":"placeholder"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e(),"number"==e.label?i("v-uni-view",{staticClass:"discount"},[i("v-uni-input",{attrs:{type:"number",placeholder:"请填写"+e.title,"placeholder-class":"placeholder"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e(),"email"==e.label?i("v-uni-view",{staticClass:"discount"},[i("v-uni-input",{attrs:{type:"text",placeholder:"请填写"+e.title,"placeholder-class":"placeholder"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e(),"data"==e.label?i("v-uni-view",{staticClass:"discount"},[i("v-uni-picker",{attrs:{mode:"date",value:e.value},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDateChange(e,a)}}},[i("v-uni-view",{staticClass:"acea-row row-between-wrapper"},[""==e.value?i("v-uni-view",[t._v("请选择"+t._s(e.title))]):i("v-uni-view",[t._v(t._s(e.value))]),i("v-uni-text",{staticClass:"iconfont icon-jiantou"})],1)],1)],1):t._e(),"time"==e.label?i("v-uni-view",{staticClass:"discount"},[i("v-uni-picker",{attrs:{mode:"time",value:e.value,placeholder:"请填写"+e.title},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindTimeChange(e,a)}}},[i("v-uni-view",{staticClass:"acea-row row-between-wrapper"},[""==e.value?i("v-uni-view",[t._v("请选择"+t._s(e.title))]):i("v-uni-view",[t._v(t._s(e.value))]),i("v-uni-text",{staticClass:"iconfont icon-jiantou"})],1)],1)],1):t._e(),"id"==e.label?i("v-uni-view",{staticClass:"discount"},[i("v-uni-input",{attrs:{type:"idcard",placeholder:"请填写"+e.title,"placeholder-class":"placeholder"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e(),"phone"==e.label?i("v-uni-view",{staticClass:"discount"},[i("v-uni-input",{attrs:{type:"tel",placeholder:"请填写"+e.title,"placeholder-class":"placeholder"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e(),"img"==e.label?i("v-uni-view",{staticClass:"confirmImg"},[i("v-uni-view",{staticClass:"upload acea-row row-middle"},[t._l(e.value,(function(e,s){return i("v-uni-view",{key:s,staticClass:"pictrue"},[i("v-uni-image",{attrs:{src:e,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"iconfont icon-guanbi1 font-num",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.DelPic(a,s)}}})],1)})),e.value.length<8?i("v-uni-view",{staticClass:"pictrue acea-row row-center-wrapper row-column",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadpic(a)}}},[i("v-uni-text",{staticClass:"iconfont icon-icon25201"}),i("v-uni-view",[t._v("上传图片")])],1):t._e()],2)],1):t._e()],1)})),1):t._e(),i("v-uni-view",{staticClass:"moneyList"},[i("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[i("v-uni-view",[t._v("商品总价：")]),i("v-uni-view",{staticClass:"money"},[t._v("￥"+t._s(t.priceGroup.sumPrice))])],1),t.priceGroup.storePostage>0?i("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[i("v-uni-view",[t._v("配送运费：")]),i("v-uni-view",{staticClass:"money"},[t._v("￥"+t._s((parseFloat(t.priceGroup.storePostage)+parseFloat(t.priceGroup.storePostageDiscount)).toFixed(2)))])],1):t._e(),!(t.priceGroup.vipPrice>0&&t.userInfo.vip)||t.pinkId||t.BargainId||t.combinationId||t.seckillId||t.discountId?t._e():i("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[i("v-uni-view",[t._v("会员商品优惠：")]),i("v-uni-view",{staticClass:"money"},[t._v("-￥"+t._s(parseFloat(t.priceGroup.vipPrice).toFixed(2)))])],1),t.priceGroup.storePostageDiscount>0?i("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[i("v-uni-view",[t._v("会员运费优惠：")]),i("v-uni-view",{staticClass:"money"},[t._v("-￥"+t._s(parseFloat(t.priceGroup.storePostageDiscount).toFixed(2)))])],1):t._e(),t.coupon_price>0?i("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[i("v-uni-view",[t._v("优惠券抵扣：")]),i("v-uni-view",{staticClass:"money"},[t._v("-￥"+t._s(parseFloat(t.coupon_price).toFixed(2)))])],1):t._e(),t.integral_price>0?i("v-uni-view",{staticClass:"item acea-row row-between-wrapper"},[i("v-uni-view",[t._v("积分抵扣：")]),i("v-uni-view",{staticClass:"money"},[t._v("-￥"+t._s(parseFloat(t.integral_price).toFixed(2)))])],1):t._e(),t._l(t.promotions_detail,(function(e,a){return parseFloat(e.promotions_price)?i("v-uni-view",{key:a,staticClass:"item acea-row row-between"},[i("v-uni-view",[t._v(t._s(e.title)+"：")]),i("v-uni-view",{staticClass:"money"},[t._v("-￥"+t._s(parseFloat(e.promotions_price).toFixed(2)))])],1):t._e()}))],2),i("v-uni-view",{staticStyle:{height:"120rpx"}}),i("v-uni-view",{staticClass:"footer acea-row row-between-wrapper"},[i("v-uni-view",[t._v("合计:"),i("v-uni-text",{staticClass:"font-color"},[t._v("￥"+t._s(t.totalPrice||0))])],1),(t.valid_count>0&&!t.discount_id||t.valid_count==t.cartInfo.length&&t.discount_id)&&t.shippingType||!t.shippingType&&t.addressId?i("v-uni-view",{staticClass:"settlement",staticStyle:{"z-index":"100"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.goPay.apply(void 0,arguments)}}},[t._v("立即结算")]):i("v-uni-view",{staticClass:"settlement bg-color-hui",staticStyle:{"z-index":"100"}},[t._v("立即结算")])],1)],1),i("v-uni-view",{staticClass:"alipaysubmit",domProps:{innerHTML:t._s(t.formContent)}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.isaddress,expression:"isaddress"}],staticClass:"tipaddress"},[i("v-uni-view",{staticClass:"top"}),i("v-uni-view",{staticClass:"bottom"},[i("div",{staticClass:"font1"},[t._v("更新地址")]),i("div",{staticClass:"font2"},[t._v("当前地址功能已更新，请重新修改")]),i("div",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payAddress.apply(void 0,arguments)}}},[t._v("前往修改")])])],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.isaddress,expression:"isaddress"}],staticClass:"mark"}),i("couponListWindow",{attrs:{coupon:t.coupon,openType:t.openType,cartId:t.cartId},on:{ChangCouponsClone:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangCouponsClone.apply(void 0,arguments)},ChangCoupons:function(e){arguments[0]=e=t.$handleEvent(e),t.ChangCoupons.apply(void 0,arguments)}}}),i("addressWindow",{ref:"addressWindow",attrs:{news:t.news,address:t.address,pagesUrl:t.pagesUrl},on:{changeTextareaStatus:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTextareaStatus.apply(void 0,arguments)},OnChangeAddress:function(e){arguments[0]=e=t.$handleEvent(e),t.OnChangeAddress.apply(void 0,arguments)},changeClose:function(e){arguments[0]=e=t.$handleEvent(e),t.changeClose.apply(void 0,arguments)}}}),i("home",{directives:[{name:"show",rawName:"v-show",value:!t.invShow&&t.navigation,expression:"!invShow && navigation"}]}),i("invoice-picker",{attrs:{"inv-show":t.invShow,"inv-list":t.invList,"inv-checked":t.invChecked,"is-special":t.special_invoice,"url-query":t.urlQuery},on:{"inv-close":function(e){arguments[0]=e=t.$handleEvent(e),t.invClose.apply(void 0,arguments)},"inv-change":function(e){arguments[0]=e=t.$handleEvent(e),t.invChange.apply(void 0,arguments)},"inv-cancel":function(e){arguments[0]=e=t.$handleEvent(e),t.invCancel.apply(void 0,arguments)}}}),i("payment",{attrs:{payMode:t.cartArr,pay_close:t.pay_close,isCall:!0,totalPrice:t.totalPrice.toString()},on:{changePayType:function(e){arguments[0]=e=t.$handleEvent(e),t.changePayType.apply(void 0,arguments)},onChangeFun:function(e){arguments[0]=e=t.$handleEvent(e),t.onChangeFun.apply(void 0,arguments)}}})],1)},n=[]},"4c3d":function(t,e,i){var a=i("e42f");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f065").default;s("47c4dc02",a,!0,{sourceMap:!1,shadowMode:!1})},"50a1":function(t,e,i){"use strict";var a=i("4c3d"),s=i.n(a);s.a},"6cff":function(t,e,i){t.exports=i.p+"static/img/address.4539439e.png"},"7bbc":function(t,e,i){"use strict";var a=i("4ea4");i("99af"),i("7db0"),i("4160"),i("d81d"),i("a434"),i("a9e3"),i("d3b7"),i("acd8"),i("e25e"),i("25f0"),i("498a"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("21c4"),n=i("d5e6"),o=(i("8f8b"),i("16a8")),r=(i("7b4e"),a(i("0a50"))),d=a(i("01d7")),c=a(i("aa5b")),u=a(i("f176")),l=a(i("1bd1")),p=i("fa9e"),v=i("26cb"),h=a(i("0d94")),f=a(i("d0ca")),m={components:{payment:h.default,invoicePicker:l.default,couponListWindow:r.default,addressWindow:d.default,orderGoods:c.default,home:u.default},mixins:[f.default],data:function(){return{giveData:{give_integral:0,give_coupon:[]},giveCartInfo:[],confirm:[],id:0,isaddress:!1,textareaStatus:!0,cartArr:[{name:"微信支付",icon:"icon-weixin2",value:"weixin",title:"使用微信快捷支付",payStatus:1},{name:"支付宝支付",icon:"icon-zhifubao",value:"alipay",title:"使用线上支付宝支付",payStatus:1},{name:"余额支付",icon:"icon-yuezhifu",value:"yue",title:"可用余额:",payStatus:1},{name:"线下支付",icon:"icon-yuezhifu1",value:"offline",title:"选择线下付款方式",payStatus:2}],formContent:"",payType:"weixin",openType:1,active:0,coupon:{coupon:!1,list:[],statusTile:"立即使用"},address:{address:!1},addressInfo:{},pinkId:0,addressId:0,couponId:0,cartId:"",BargainId:0,combinationId:0,seckillId:0,discountId:0,userInfo:{},mark:"",couponTitle:"请选择",coupon_price:0,promotions_detail:[],useIntegral:!1,integral_price:0,integral:0,ChangePrice:0,formIds:[],status:0,is_address:!1,toPay:!1,shippingType:0,system_store:{},storePostage:0,contacts:"",contactsTel:"",mydata:{},storeList:[],store_self_mention:0,cartInfo:[],priceGroup:{},animated:!1,totalPrice:0,integralRatio:"0",pagesUrl:"",orderKey:"",offlinePostage:"",isAuto:!1,isShowAuth:!1,from:"",news:1,invTitle:"不开发票",special_invoice:!1,invoice_func:!1,header_type:"",invShow:!1,invList:[],invChecked:"",urlQuery:"",pay_close:!1,noCoupon:0,valid_count:0,discount_id:0,storeId:0,product_type:1,newImg:[]}},computed:(0,v.mapGetters)(["isLogin"]),onLoad:function(t){if(this.from=this.$wechat.isWeixin()?"weixin":"weixinh5",!t.cartId)return this.$util.Tips({title:"请选择要购买的商品"},{tab:3,url:1});switch(this.couponId=t.couponId||0,this.noCoupon=t.noCoupon||0,this.pinkId=t.pinkId?parseInt(t.pinkId):0,this.addressId=t.addressId||0,this.cartId=t.cartId,this.is_address=!!t.is_address,this.news=t.new&&"0"!==t.new?1:0,this.invChecked=t.invoice_id||"",this.header_type=t.header_type||"1",this.couponTitle=t.couponTitle||"请选择",t.invoice_type){case"1":this.invTitle="增值税电子普通发票";break;case"2":this.invTitle="增值税电子专用发票";break}t.invoice_name&&(this.invTitle=t.invoice_name),this.textareaStatus=!0,this.isLogin&&0==this.toPay?(this.getaddressInfo(),this.getConfirm(),this.$nextTick((function(){this.$refs.addressWindow.getAddressList()}))):(0,p.toLogin)()},onShow:function(){var t=this;uni.$on("handClick",(function(e){e&&(t.system_store=e.address,t.storeId=t.system_store.id,t.cartId=e.cartId,t.news=e.new,t.pinkId=Number(e.pinkId),t.couponId=e.couponId,t.getConfirm()),uni.$off("handClick")}))},methods:{DelPic:function(t,e){var i=this;this.confirm[t].value;i.confirm[t].value.splice(e,1),i.$set(i.confirm[t],"value",i.confirm[t].value)},uploadpic:function(t){var e=this;this.$util.uploadImageOne("upload/image",(function(i){e.newImg.push(i.data.url),e.$set(e.confirm[t],"value",e.newImg)}))},invCancel:function(){this.invChecked="",this.invTitle="不开发票",this.invShow=!1},invChange:function(t){this.invChecked=t,this.invShow=!1;var e=this.invList.find((function(e){return e.id===t})),i="";i+=1===e.header_type?"个人":"企业",i+=1===e.type?"普通":"专用",i+="发票",this.invTitle=i},invClose:function(){this.invShow=!1,this.getInvoiceList()},getInvoiceList:function(){var t=this;uni.showLoading({title:"正在加载…"}),(0,n.invoiceList)().then((function(e){uni.hideLoading(),t.invList=e.data.map((function(t){return t.id=t.id.toString(),t}));var i=t.invList.find((function(e){return e.id==t.invChecked}));if(i){var a="";a+=1===i.header_type?"个人":"企业",a+=1===i.type?"普通":"专用",a+="发票",t.invTitle=a}})).catch((function(t){uni.showToast({title:t,icon:"none"})}))},goInvoice:function(){this.getInvoiceList(),this.invShow=!0,this.urlQuery="new=".concat(this.news,"&cartId=").concat(this.cartId,"&pinkId=").concat(this.pinkId,"&couponId=").concat(this.couponId,"&addressId=").concat(this.addressId,"&specialInvoice=").concat(this.special_invoice,"&couponTitle=").concat(this.couponTitle)},onLoadFun:function(){this.getaddressInfo(),this.getConfirm()},onChangeFun:function(t){var e=t,i=e.action||null,a=void 0!=e.value?e.value:null;i&&this[i]&&this[i](a)},payClose:function(){this.pay_close=!1},goPay:function(){this.pay_close=!0},payCheck:function(t){this.payType=t,this.SubOrder()},payAddress:function(){uni.navigateTo({url:"/pages/users/user_address/index?id="+this.id+"&new="+this.news+"&cartId="+this.cartId+"&pinkId="+this.pinkId+"&couponId="+this.couponId})},getList:function(){var t=this,e=uni.getStorageSync("user_longitude"),i=uni.getStorageSync("user_latitude"),a={latitude:i,longitude:e,page:1,limit:10};(0,o.storeListApi)(a).then((function(e){var i=e.data.list.list||[];t.$set(t,"storeList",i),t.$set(t,"system_store",i[0]),t.$set(t,"storeId",i[0].id),t.getConfirm()})).catch((function(t){}))},changeClose:function(){this.$set(this.address,"address",!1)},showStoreList:function(){var t=this;this.storeList.length>0&&uni.navigateTo({url:"/pages/users/goods_details_store/index?type=1&cartId=".concat(t.cartId,"&new=").concat(t.news,"&pinkId=").concat(t.pinkId,"&couponId=").concat(t.couponId)})},changePayType:function(t){this.payType=t,this.computedPrice()},computedPrice:function(){var t=this,e=this.shippingType;(0,s.postOrderComputed)(this.orderKey,{addressId:this.addressId,useIntegral:this.useIntegral?1:0,couponId:this.couponId,shipping_type:parseInt(e)+1,payType:this.payType}).then((function(i){var a=i.data.result;a&&(t.totalPrice=a.pay_price,t.integral_price=a.deduction_price,t.coupon_price=a.coupon_price,t.promotions_detail=a.promotions_detail,t.integral=t.useIntegral?a.SurplusIntegral:t.userInfo.integral,t.$set(t.priceGroup,"storePostage",1==e?0:a.pay_postage),t.$set(t.priceGroup,"storePostageDiscount",a.storePostageDiscount))})).catch((function(t){return that.$util.Tips({title:t})}))},addressType:function(t){var e=t;this.shippingType=parseInt(e),this.computedPrice(),1==e?this.getList():this.getConfirm()},bindPickerChange:function(t){var e=t.detail.value;this.shippingType=e,this.computedPrice()},ChangCouponsClone:function(){this.$set(this.coupon,"coupon",!1)},changeTextareaStatus:function(){for(var t=0,e=this.coupon.list.length;t<e;t++)this.coupon.list[t].use_title="",this.coupon.list[t].is_use=0;this.textareaStatus=!0,this.status=0,this.$set(this.coupon,"list",this.coupon.list)},ChangCoupons:function(t){for(var e=t,i=this.coupon.list,a="请选择",s=0,n=0,o=i.length;n<o;n++)n!=e&&(i[n].use_title="",i[n].is_use=0);i[e].is_use?(i[e].use_title="",i[e].is_use=0):(i[e].use_title="不使用",i[e].is_use=1,a=i[e].coupon_title,s=i[e].id),this.couponTitle=a,this.couponId=s,this.$set(this.coupon,"coupon",!1),this.$set(this.coupon,"list",i),this.getConfirm()},ChangeIntegral:function(){this.useIntegral=!this.useIntegral,this.computedPrice()},OnChangeAddress:function(t){this.textareaStatus=!0,this.addressId=t,this.address.address=!1,this.getConfirm(),this.getaddressInfo(),this.computedPrice()},bindHideKeyboard:function(t){this.mark=t.detail.value},getConfirm:function(){var t,e=this,i=this,a=parseInt(this.shippingType)+1,n=0;1==a?(n=i.addressId,t=0):(n="",t=i.storeId),(0,s.orderConfirm)(i.cartId,i.news,n,a,t,i.couponId).then((function(t){1==t.data.upgrade_addr&&(i.id=t.data.addressInfo.id,e.isaddress=!0),i.$set(i,"confirm",t.data.custom_form),i.$set(i,"userInfo",t.data.userInfo),i.$set(i,"integral",t.data.userInfo.integral),i.$set(i,"contacts",t.data.userInfo.real_name),i.$set(i,"contactsTel",t.data.userInfo.record_phone||""),i.$set(i,"integralRatio",t.data.integralRatio),i.$set(i,"offlinePostage",t.data.offlinePostage),i.$set(i,"orderKey",t.data.orderKey),i.$set(i,"valid_count",t.data.valid_count),i.$set(i,"discount_id",t.data.discount_id),i.$set(i,"priceGroup",t.data.priceGroup),i.$set(i,"seckillId",parseInt(t.data.seckill_id)),i.$set(i,"BargainId",parseInt(t.data.bargain_id)),i.$set(i,"combinationId",parseInt(t.data.combination_id)),i.$set(i,"discountId",parseInt(t.data.discount_id)),i.$set(i,"invoice_func",t.data.invoice_func),i.$set(i,"special_invoice",t.data.special_invoice),i.$set(i,"store_self_mention",t.data.store_self_mention),i.giveData.give_integral=t.data.give_integral,i.giveData.give_coupon=t.data.give_coupon;var a=t.data.cartInfo,s=[],n=[];a.forEach((function(t){1==t.is_gift?n.push(t):s.push(t)})),i.$set(i,"cartInfo",s),i.$set(i,"giveCartInfo",n);var o=-1;n.forEach((function(t){if(0==t.product_type)return o=0})),i.$set(i,"product_type",0==t.data.product_type||0==o?0:1),i.cartArr[0].payStatus=t.data.pay_weixin_open||0,i.cartArr[1].payStatus=t.data.ali_pay_status||0,i.cartArr[2].number=t.data.userInfo.now_money,i.cartArr[2].payStatus=1==t.data.yue_pay_status?t.data.yue_pay_status:0,2==t.data.offline_pay_status?i.cartArr[3].payStatus=0:i.cartArr[3].payStatus=1,i.$set(i,"ChangePrice",i.totalPrice),i.getBargainId(),i.getCouponList(),i.computedPrice(),e.addressId||e.couponId||i.$set(i,"totalPrice",i.$util.$h.Add(parseFloat(t.data.priceGroup.totalPrice),parseFloat(t.data.priceGroup.storePostage)))})).catch((function(t){return e.$util.Tips({title:t})}))},getBargainId:function(){var t=this;3==t.cartArr.length&&(t.BargainId||t.combinationId||t.seckillId||t.discountId)&&(t.cartArr[2].payStatus=0,t.$set(t,"cartArr",t.cartArr))},getCouponList:function(){var t=this,e={cartId:this.cartId,new:this.news};(0,s.getCouponsOrderPrice)(this.totalPrice,e).then((function(e){t.$set(t.coupon,"list",e.data),t.openType=1}))},getaddressInfo:function(){var t=this;t.addressId?(0,n.getAddressDetail)(t.addressId).then((function(e){e.data.is_default=parseInt(e.data.is_default),t.addressInfo=e.data||{},t.addressId=e.data.id||0,t.address.addressId=e.data.id||0})):(0,n.getAddressDefault)().then((function(e){e.data.is_default=parseInt(e.data.is_default),t.addressInfo=e.data||{},t.addressId=e.data.id||0,t.address.addressId=e.data.id||0}))},payItem:function(t){var e=this,i=t;e.active=i,e.animated=!0,e.payType=e.cartArr[i].value,e.computedPrice(),setTimeout((function(){e.car()}),500)},couponTap:function(){var t=this;this.coupon.coupon=!0,this.coupon.list.forEach((function(e,i){e.id==t.couponId?e.is_use=1:e.is_use=0})),this.$set(this.coupon,"list",this.coupon.list)},car:function(){var t=this;t.animated=!1},onAddress:function(){var t=this;t.textareaStatus=!1,t.address.address=!0,t.pagesUrl="/pages/users/user_address_list/index?news="+this.news+"&cartId="+this.cartId+"&pinkId="+this.pinkId+"&couponId="+this.couponId},payment:function(t){var e=this,i=this;(0,s.orderCreate)(i.orderKey,t).then((function(t){var a=t.data.status,s=t.data.result.orderId,n=(t.data.result.jsConfig,"/pages/order_pay_status/index?order_id="+s+"&msg="+t.msg+"&type=3&totalPrice="+e.totalPrice);switch(a){case"ORDER_EXIST":case"EXTEND_ORDER":case"PAY_ERROR":return uni.hideLoading(),i.$util.Tips({title:t.msg},{tab:5,url:n});case"SUCCESS":return uni.hideLoading(),i.BargainId||i.combinationId||i.pinkId||i.seckillId||i.discountId?i.$util.Tips({title:t.msg,icon:"success"},{tab:4,url:n}):i.$util.Tips({title:t.msg,icon:"success"},{tab:5,url:n});case"WECHAT_PAY":i.toPay=!0,e.$wechat.pay(t.data.result.jsConfig).then((function(t){return i.$util.Tips({title:"支付成功",icon:"success"},{tab:5,url:n})})).catch((function(t){if(e.$wechat.isWeixin()||uni.redirectTo({url:n+"&msg=支付失败&status=2"}),"chooseWXPay:cancel"==t.errMsg)return i.$util.Tips({title:"取消支付"},{tab:5,url:n+"&status=2"})}));break;case"PAY_DEFICIENCY":return uni.hideLoading(),i.$util.Tips({title:t.msg},{tab:5,url:n+"&status=1"});case"WECHAT_H5_PAY":uni.hideLoading(),i.$util.Tips({title:"订单创建成功!"},{tab:4,url:n+"&status=0"}),setTimeout((function(){location.href=t.data.result.jsConfig.mweb_url}),2e3);break;case"ALIPAY_PAY":"weixin"===e.from?uni.redirectTo({url:"/pages/users/alipay_invoke/index?id=".concat(s,"&pay_key=").concat(t.data.result.pay_key)}):(uni.hideLoading(),i.formContent=t.data.result.jsConfig,i.$nextTick((function(){document.getElementById("alipaysubmit").submit()})));break}})).catch((function(t){return uni.hideLoading(),i.$util.Tips({title:t})}))},clickTextArea:function(){this.$refs.textarea.focus()},bindDateChange:function(t,e){this.confirm[e].value=t.target.value},bindTimeChange:function(t,e){this.confirm[e].value=t.target.value},SubOrder:function(t){var e=this,i={};if(!e.payType)return e.$util.Tips({title:"请选择支付方式"});if(!e.addressId&&!e.shippingType&&!e.product_type)return e.$util.Tips({title:"请选择收货地址"});if(1==e.shippingType){if(""==e.contacts||""==e.contactsTel)return e.$util.Tips({title:"请填写联系人或联系人电话"});if(!/^1(3|4|5|7|8|9|6)\d{9}$/.test(e.contactsTel))return e.$util.Tips({title:"请填写正确的手机号"});if(!/^[\u4e00-\u9fa5\w]{2,16}$/.test(e.contacts))return e.$util.Tips({title:"请填写您的真实姓名"});if(0==e.storeList.length)return e.$util.Tips({title:"暂无门店,请选择其他方式"})}for(var a=0;a<e.confirm.length;a++){var s=e.confirm[a];if(s.status||"img"!==s.label&&s.value.trim()){if(("text"===s.label||"data"===s.label||"time"===s.label)&&!s.value.trim())return e.$util.Tips({title:"请填写".concat(s.title)});if("number"===s.label&&s.value<=0)return e.$util.Tips({title:"请填写大于0的".concat(s.title)});if("email"===s.label&&!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(s.value))return e.$util.Tips({title:"请填写正确的".concat(s.title)});if("phone"===s.label&&!/^1(3|4|5|7|8|9|6)\d{9}$/i.test(s.value))return e.$util.Tips({title:"请填写正确的".concat(s.title)});if("id"===s.label&&!/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/i.test(s.value))return e.$util.Tips({title:"请填写正确的".concat(s.title)});if("img"===s.label&&!s.value.length)return e.$util.Tips({title:"请上传".concat(s.title)})}}if(i={custom_form:e.confirm,real_name:e.contacts,phone:e.contactsTel,addressId:e.addressId,formId:"",couponId:e.couponId,payType:e.payType,useIntegral:e.useIntegral,bargainId:e.BargainId,combinationId:e.combinationId,discountId:e.discountId,pinkId:e.pinkId,seckill_id:e.seckillId,mark:e.mark,store_id:e.system_store?e.system_store.id:0,from:e.from,shipping_type:e.$util.$h.Add(e.shippingType,1),new:e.news,invoice_id:e.invChecked,quitUrl:location.protocol+"//"+location.hostname+"/pages/order_pay_status/index?&type=3&totalPrice="+this.totalPrice},"yue"==i.payType&&parseFloat(e.userInfo.now_money)<parseFloat(e.totalPrice))return e.$util.Tips({title:"余额不足！"});uni.showLoading({title:"订单支付中"}),e.payment(i)}}};e.default=m},bac9:function(t,e,i){"use strict";i.r(e);var a=i("7bbc"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},e42f:function(t,e,i){var a=i("24fb"),s=i("1de5"),n=i("6cff");e=a(!1);var o=s(n);e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* crmeb颜色变量 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */[data-v-603a2b9c] uni-checkbox[disabled] .uni-checkbox-input{background-color:#eee}.confirmImg[data-v-603a2b9c]{width:100%}.confirmImg .upload[data-v-603a2b9c]{padding-bottom:%?36?%}.confirmImg .upload .pictrue[data-v-603a2b9c]{margin:%?22?% %?23?% 0 0;width:%?156?%;height:%?156?%;position:relative;font-size:%?24?%;color:#bbb}.confirmImg .upload .pictrue[data-v-603a2b9c]:nth-of-type(4n){margin-right:0}.confirmImg .upload .pictrue uni-image[data-v-603a2b9c]{width:100%;height:100%;border-radius:%?3?%}.confirmImg .upload .pictrue .icon-guanbi1[data-v-603a2b9c]{position:absolute;font-size:%?45?%;top:%?-10?%;right:%?-10?%}.confirmImg .upload .pictrue .icon-icon25201[data-v-603a2b9c]{color:#bfbfbf;font-size:%?50?%}.confirmImg .upload .pictrue[data-v-603a2b9c]:nth-last-child(1){border:%?1?% solid #ddd;box-sizing:border-box}.alipaysubmit[data-v-603a2b9c]{display:none}.order-submission .line[data-v-603a2b9c]{width:100%;height:%?3?%}.order-submission .line uni-image[data-v-603a2b9c]{width:100%;height:100%;display:block}.order-submission .address[data-v-603a2b9c]{padding:%?28?% %?30?%;background-color:#fff;box-sizing:border-box}.order-submission .address .addressCon[data-v-603a2b9c]{width:%?610?%;font-size:%?26?%;color:#666}.order-submission .address .addressCon .name[data-v-603a2b9c]{font-size:%?30?%;color:#282828;font-weight:700;margin-bottom:%?10?%}.order-submission .address .addressCon .name .phone[data-v-603a2b9c]{margin-left:%?50?%}.order-submission .address .addressCon .default[data-v-603a2b9c]{margin-right:%?12?%}.order-submission .address .addressCon .setaddress[data-v-603a2b9c]{color:#333;font-size:%?28?%}.order-submission .address .iconfont[data-v-603a2b9c]{font-size:%?35?%;color:#707070}.order-submission .allAddress[data-v-603a2b9c]{width:100%;background:linear-gradient(180deg,var(--view-theme) 0,#f5f5f5);padding-top:%?100?%}.order-submission .allAddress .nav[data-v-603a2b9c]{width:%?710?%;margin:0 auto}.order-submission .allAddress .nav .item[data-v-603a2b9c]{width:%?355?%}.order-submission .allAddress .nav .item.on[data-v-603a2b9c]{position:relative;width:%?250?%}.order-submission .allAddress .nav .item.on[data-v-603a2b9c]::before{position:absolute;bottom:0;content:"快递配送";font-size:%?28?%;display:block;height:0;width:%?336?%;border-width:0 %?20?% %?80?% 0;border-style:none solid solid;border-color:transparent transparent #fff;z-index:2;border-radius:%?7?% %?30?% 0 0;text-align:center;line-height:%?80?%}.order-submission .allAddress .nav .item:nth-of-type(2).on[data-v-603a2b9c]::before{content:"到店自提";border-width:0 0 %?80?% %?20?%;border-radius:%?30?% %?7?% 0 0}.order-submission .allAddress .nav .item.on2[data-v-603a2b9c]{position:relative}.order-submission .allAddress .nav .item.on2[data-v-603a2b9c]::before{position:absolute;bottom:0;content:"到店自提";font-size:%?28?%;display:block;height:0;width:%?400?%;border-width:0 0 %?60?% %?60?%;border-style:none solid solid;border-color:transparent transparent hsla(0,0%,100%,.6);border-radius:%?40?% %?6?% 0 0;text-align:center;line-height:%?60?%}.order-submission .allAddress .nav .item:nth-of-type(1).on2[data-v-603a2b9c]::before{content:"快递配送";border-width:0 %?60?% %?60?% 0;border-radius:%?6?% %?40?% 0 0}.order-submission .allAddress .address[data-v-603a2b9c]{width:%?710?%;height:%?150?%;margin:0 auto}.order-submission .allAddress .line[data-v-603a2b9c]{width:%?710?%;margin:0 auto}.order-submission .wrapper .item .discount .placeholder[data-v-603a2b9c]{color:#ccc}.placeholder-textarea[data-v-603a2b9c]{position:relative}.placeholder-textarea .placeholder[data-v-603a2b9c]{position:absolute;color:#ccc;top:%?26?%;left:%?30?%}.order-submission .wrapper[data-v-603a2b9c]{background-color:#fff;margin-top:%?13?%}.order-submission .wrapper .item .name[data-v-603a2b9c]{position:relative}.order-submission .wrapper .item .asterisk[data-v-603a2b9c]{position:absolute;color:red;left:%?-15?%}.order-submission .wrapper .item[data-v-603a2b9c]{padding:%?27?% %?30?%;font-size:%?30?%;color:#282828;border-bottom:1px solid #f0f0f0}.order-submission .wrapper .item .discount[data-v-603a2b9c]{font-size:%?30?%;color:#999}.order-submission .wrapper .item .discount uni-input[data-v-603a2b9c]{text-align:right;width:%?450?%}.order-submission .wrapper .item .discount .iconfont[data-v-603a2b9c]{color:#515151;font-size:%?30?%;margin-left:%?15?%}.order-submission .wrapper .item .discount .num[data-v-603a2b9c]{font-size:%?32?%;margin-right:%?20?%}.order-submission .wrapper .item .shipping[data-v-603a2b9c]{font-size:%?30?%;color:#999;position:relative;padding-right:%?58?%}.order-submission .wrapper .item .shipping .iconfont[data-v-603a2b9c]{font-size:%?35?%;color:#707070;position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);margin-left:%?30?%}.order-submission .wrapper .item uni-textarea[data-v-603a2b9c]{background-color:#f9f9f9;width:%?690?%;height:%?140?%;border-radius:%?3?%;margin-top:%?30?%;padding:%?25?% %?28?%;box-sizing:border-box}.order-submission .wrapper .item .placeholder[data-v-603a2b9c]{color:#ccc}.order-submission .wrapper .item .list[data-v-603a2b9c]{margin-top:%?35?%}.order-submission .wrapper .item .list .payItem[data-v-603a2b9c]{border:1px solid #eee;border-radius:%?6?%;height:%?86?%;width:100%;box-sizing:border-box;margin-top:%?20?%;font-size:%?28?%;color:#282828}.order-submission .wrapper .item .list .payItem.on[data-v-603a2b9c]{border-color:#fc5445;color:#e93323}.order-submission .wrapper .item .list .payItem .name[data-v-603a2b9c]{width:50%;text-align:center;border-right:1px solid #eee;padding-left:%?80?%}.order-submission .wrapper .item .list .payItem .name .iconfont[data-v-603a2b9c]{width:%?44?%;height:%?44?%;border-radius:50%;text-align:center;line-height:%?44?%;background-color:#fe960f;color:#fff;font-size:%?30?%;margin-right:%?15?%}.order-submission .wrapper .item .list .payItem .name .iconfont.icon-weixin2[data-v-603a2b9c]{background-color:#41b035}.order-submission .wrapper .item .list .payItem .name .iconfont.icon-zhifubao[data-v-603a2b9c]{background-color:#1677ff}.order-submission .wrapper .item .list .payItem .tip[data-v-603a2b9c]{width:49%;text-align:center;font-size:%?26?%;color:#aaa}.order-submission .moneyList[data-v-603a2b9c]{margin-top:%?12?%;background-color:#fff;padding:%?30?%}.order-submission .moneyList .item[data-v-603a2b9c]{font-size:%?28?%;color:#282828}.order-submission .moneyList .item ~ .item[data-v-603a2b9c]{margin-top:%?20?%}.order-submission .moneyList .item .money[data-v-603a2b9c]{color:#868686}.order-submission .footer[data-v-603a2b9c]{width:100%;height:%?100?%;background-color:#fff;padding:0 %?30?%;font-size:%?28?%;color:#333;box-sizing:border-box;position:fixed;bottom:0;left:0;z-index:9}.order-submission .footer .settlement[data-v-603a2b9c]{font-size:%?30?%;color:#fff;width:%?240?%;height:%?70?%;background-color:var(--view-theme);border-radius:%?50?%;text-align:center;line-height:%?70?%}.footer .transparent[data-v-603a2b9c]{opacity:0}.tipaddress[data-v-603a2b9c]{position:fixed;left:13%;top:25%;width:%?560?%;height:%?614?%;background-color:#fff;border-radius:%?10?%;z-index:100;text-align:center}.tipaddress .top[data-v-603a2b9c]{width:%?560?%;height:%?270?%;border-top-left-radius:%?10?%;border-top-right-radius:%?10?%;background-image:url('+o+");background-repeat:round;background-color:var(--view-theme)}.tipaddress .top .tipsphoto[data-v-603a2b9c]{display:inline-block;width:%?200?%;height:%?200?%;margin-top:%?73?%}.tipaddress .bottom[data-v-603a2b9c]{font-size:%?32?%;font-weight:400}.tipaddress .bottom .font1[data-v-603a2b9c]{font-size:%?36?%;font-weight:600;color:#333;margin:%?32?% %?0?% %?22?%}.tipaddress .bottom .font2[data-v-603a2b9c]{color:#666;margin-bottom:%?48?%}.tipaddress .bottom .btn[data-v-603a2b9c]{width:%?360?%;height:%?82?%;border-radius:%?42?%;background:linear-gradient(270deg,var(--view-theme) 0,#f5f5f5);color:#fff;line-height:%?82?%;margin:0 auto}.mark[data-v-603a2b9c]{position:fixed;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.5);z-index:99}",""]),t.exports=e},e91d:function(t,e,i){"use strict";i.r(e);var a=i("1f9a"),s=i("bac9");for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("50a1");var o,r=i("f0c5"),d=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"603a2b9c",null,!1,a["a"],o);e["default"]=d.exports}}]);