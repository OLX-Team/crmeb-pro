(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-admin-store-order-index"],{"08ca":function(t,n,e){"use strict";var i;e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return i}));var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[t.loading&&!t.loaded?e("v-uni-view",{staticClass:"Loads acea-row row-center-wrapper",staticStyle:{"margin-top":".2rem"}},[t.loading?e("v-uni-view",[e("v-uni-view",{staticClass:"iconfont icon-jiazai loading acea-row row-center-wrapper"}),t._v("正在加载中")],1):e("v-uni-view",[t._v("上拉加载更多")])],1):t._e()],1)},o=[]},4918:function(t,n,e){"use strict";e.r(n);var i=e("08ca"),a=e("9d69");for(var o in a)"default"!==o&&function(t){e.d(n,t,(function(){return a[t]}))}(o);e("879e");var r,s=e("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"58f839b4",null,!1,i["a"],r);n["default"]=c.exports},"4bb0":function(t,n,e){"use strict";var i=e("4ea4");e("99af"),e("d3b7"),e("25f0"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("96cf");var a=i(e("1da1")),o=e("6722"),r=e("bc73"),s=i(e("79ad")),c=i(e("4918")),d=e("6082"),f={name:"order",components:{Loading:c.default,PriceChange:s.default},props:{},data:function(){return{openErp:!1,orderList:[],type:"",page:1,limit:15,loading:!1,loaded:!1,change:!1,orderInfo:{},status:"",isRefund:0}},onLoad:function(t){this.type=t.type,this.getErpConfig()},onShow:function(){this.settype(this.type)},computed:{},methods:{goDelivery:function(t){this.openErp||uni.navigateTo({url:"/pages/admin/store/deliverGoods/index?id="+t.order_id+"&listId="+t.id+"&totalNum="+t.total_num+"&orderStatus="+t._status+"&comeType=1&productType="+t.product_type})},getErpConfig:function(){var t=this;(0,r.erpConfig)().then((function(n){t.openErp=n.data.open_erp})).catch((function(n){t.$util.Tips({title:n})}))},settype:function(t){this.type=t,this.init(),this.getList()},init:function(){this.orderList=[],this.page=1,this.loaded=!1,this.loading=!1},getList:function(){var t=this;if(!this.loading&&!this.loaded){this.loading=!0;var n={status:this.type,page:this.page,limit:this.limit},e="";e=-3==this.type?(0,o.getRefundlistApi)(n):(0,o.getOrderlistApi)(n),e.then((function(n){t.loading=!1,t.loaded=n.data.length<t.limit,t.orderList.push.apply(t.orderList,n.data),t.page+=1}))}},onReachBottom:function(){this.getList()},toDetail:function(t){uni.navigateTo({url:"/pages/admin/store/orderDetail/index?id=".concat(t.id,"&types=").concat(this.type)})},modify:function(t,n,e){this.openErp&&1!=n||(this.change=!0,this.status=n.toString(),this.orderInfo=t,2==n&&(this.isRefund=e))},changeclose:function(t){this.change=t},offlinePay:function(t){var n=this;this.openErp||(0,o.getOrderOfflineApi)({order_id:t.order_id}).then((function(t){n.$util.Tips({title:t.msg,icon:"success"}),n.init(),n.getList()}),(function(t){n.$util.Tips(t)}))},objOrderRefund:function(t){var n=this;(0,o.OrderRefund)(t).then((function(t){n.change=!1,n.$util.Tips({title:t.msg}),n.init(),n.getList()}),(function(t){n.change=!1,n.$util.Tips({title:t})}))},savePrice:function(t){var n=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var i,a,r,s,c,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=n,a={},r=t.price,s=t.refund_price,i.orderInfo.refund_status,c=t.remark,a.order_id=i.orderInfo.order_id,0!=i.status){e.next=9;break}if((0,d.isMoney)(r)){e.next=5;break}return e.abrupt("return",i.$util.Tips({title:"请输入正确的金额"}));case 5:a.price=r,(0,o.getOrderPriceApi)(a).then((function(t){i.change=!1,i.$util.Tips({title:"改价成功",icon:"success"}),n.init(),n.getList()}),(function(t){i.change=!1,i.$util.Tips({title:"改价失败",icon:"none"})})),e.next=27;break;case 9:if(2!=i.status){e.next=21;break}if(!n.isRefund){e.next=18;break}if((0,d.isMoney)(s)){e.next=13;break}return e.abrupt("return",i.$util.Tips({title:"请输入正确的金额"}));case 13:a.price=s,a.type=t.type,n.objOrderRefund(a),e.next=19;break;case 18:1==t.type?(0,o.storeRefundAgree)(n.orderInfo.id).then((function(t){i.change=!1,i.$util.Tips({title:t.msg}),i.init(),i.getList()})).catch((function(t){i.change=!1,i.$util.Tips({title:t})})):(a.type=t.type,n.objOrderRefund(a));case 19:e.next=27;break;case 21:if(c){e.next=23;break}return e.abrupt("return",n.$util.Tips({title:"请输入备注"}));case 23:a.remark=c,f="",f=-3==i.type?(0,o.getRefundMarkApi)(a):(0,o.getOrderreMarkApi)(a),f.then((function(t){i.change=!1,n.$util.Tips({title:t.msg,icon:"success"})})).catch((function(t){i.change=!1,i.$util.Tips({title:t})}));case 27:case"end":return e.stop()}}),e)})))()}}};n.default=f},5862:function(t,n,e){var i=e("24fb");n=i(!1),n.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* crmeb颜色变量 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.nothing[data-v-2fba3dbf]{text-align:center;color:#cfcfcf}.color1[data-v-2fba3dbf]{color:#ff7e00}.color2[data-v-2fba3dbf]{color:#1890ff}\r\n/*交易额统计*/.order .navs[data-v-2fba3dbf]{width:100%;height:%?96?%;background-color:#fff;line-height:%?96?%;position:fixed;top:0;left:0;z-index:9;display:flex;justify-content:space-between;padding:%?0?% %?26?%}.order .navs .item[data-v-2fba3dbf]{font-size:%?32?%;color:#282828;display:inline-block}.order .navs .item.on[data-v-2fba3dbf]{color:#2291f8}.order .navs .item .iconfont[data-v-2fba3dbf]{font-size:%?25?%;margin-left:%?13?%}.order .cards[data-v-2fba3dbf]{padding-top:%?96?%}.order .cards .content[data-v-2fba3dbf]{margin:%?28?% auto %?16?% auto;width:%?694?%;padding-bottom:%?20?%;background:#fff;border-radius:%?12?%}.order .cards .content .pad[data-v-2fba3dbf]{padding:%?20?% %?20?% %?22?%}.order .cards .content .content_top[data-v-2fba3dbf]{align-items:center;font-weight:400;display:flex;justify-content:space-between;border-bottom:%?2?% solid #f5f5f5}.order .cards .content .content_top .state[data-v-2fba3dbf]{color:#2291f8}.order .cards .content .content_top .state.on[data-v-2fba3dbf]{font-size:%?24?%;width:%?150?%;text-align:right}.order .cards .content .content_top .content_top_left[data-v-2fba3dbf]{font-weight:700;font-size:%?30?%}.order .cards .content .content_top .content_top_left .time[data-v-2fba3dbf]{color:#666;font-size:%?24?%}.order .cards .content .content_top .content_top_right[data-v-2fba3dbf]{font-size:%?30?%;padding:%?6?% %?10?%}.order .cards .content .content_font[data-v-2fba3dbf]{font-size:%?24?%;color:#666;font-weight:400}.order .cards .content .content_font .txt[data-v-2fba3dbf]{margin-bottom:%?14?%}.order .cards .content .content_box[data-v-2fba3dbf]{border-radius:%?8?%;padding:%?27?%;padding-right:%?22?%;display:flex;justify-content:start}.order .cards .content .content_box uni-image[data-v-2fba3dbf]{width:%?140?%;height:%?140?%;border-radius:%?8?%}.order .cards .content .content_box .content_box_title[data-v-2fba3dbf]{margin-left:%?18?%;font-size:%?20?%;font-weight:400;width:%?480?%;display:flex;justify-content:space-between;font-size:%?24?%}.order .cards .content .content_box .content_box_title .textbox[data-v-2fba3dbf]{text-overflow:ellipsis;overflow:hidden}.order .cards .content .content_box .content_box_title .textbox .label[data-v-2fba3dbf]{color:#f5222d}.order .cards .content .content_box .content_box_title .text_left[data-v-2fba3dbf]{width:%?320?%}.order .cards .content .content_box .content_box_title .text_right[data-v-2fba3dbf]{text-align:right}.order .cards .content .content_box .content_box_title .text_right .info[data-v-2fba3dbf]{margin-top:%?44?%;font-size:%?24?%}.order .cards .content .content_box .content_box_title .attribute[data-v-2fba3dbf]{color:#999;width:%?340?%;text-overflow:ellipsis;overflow:hidden}.order .cards .content .content_bottom[data-v-2fba3dbf]{text-align:right;font-size:%?22?%;padding:%?0?% %?20?%;color:#666}.order .cards .content .content_bottom .money[data-v-2fba3dbf]{font-size:%?26?%;color:#f5222d}.order .cards .content .content_btn[data-v-2fba3dbf]{display:flex;padding:%?28?% %?28?%;padding-bottom:%?0?%;justify-content:flex-end}.order .cards .content .content_btn .wait[data-v-2fba3dbf]{margin-left:%?20?%;height:%?60?%;line-height:%?60?%}.order .cards .content .content_btn .box[data-v-2fba3dbf]{width:%?172?%;height:%?60?%;border-radius:%?50?%;border:%?2?% solid #eee;text-align:center;line-height:%?60?%;color:#666;margin:0 %?10?%}.order .cards .content .content_btn .box.on[data-v-2fba3dbf]{color:#c5c8ce!important;background-color:#f7f7f7!important;border-color:#dcdee2!important}.order .cards .content .content_btn .boxblue[data-v-2fba3dbf]{background-color:#1890ff;color:#fff}',""]),t.exports=n},"5a21":function(t,n,e){"use strict";e.r(n);var i=e("4bb0"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=a.a},"5e2b":function(t,n,e){var i=e("b67c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f065").default;a("6334bd0c",i,!0,{sourceMap:!1,shadowMode:!1})},"7d55":function(t,n,e){var i=e("5862");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f065").default;a("50cb7bd1",i,!0,{sourceMap:!1,shadowMode:!1})},"879e":function(t,n,e){"use strict";var i=e("5e2b"),a=e.n(i);a.a},"9d69":function(t,n,e){"use strict";e.r(n);var i=e("acbe"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=a.a},acbe:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={name:"Loading",props:{loaded:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}}};n.default=i},ade0:function(t,n,e){"use strict";var i=e("7d55"),a=e.n(i);a.a},b67c:function(t,n,e){var i=e("24fb");n=i(!1),n.push([t.i,".Loads[data-v-58f839b4]{height:%?80?%;font-size:%?25?%;color:#999}.Loads .iconfont[data-v-58f839b4]{font-size:%?30?%;margin-right:%?10?%;height:%?32?%;line-height:%?32?%}\n/*加载动画*/@-webkit-keyframes load-data-v-58f839b4{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes load-data-v-58f839b4{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.loadingpic[data-v-58f839b4]{-webkit-animation:load-data-v-58f839b4 3s linear 1s infinite;animation:load-data-v-58f839b4 3s linear 1s infinite}.loading[data-v-58f839b4]{-webkit-animation:load-data-v-58f839b4 linear 1s infinite;animation:load-data-v-58f839b4 linear 1s infinite}",""]),t.exports=n},c37c:function(t,n,e){"use strict";var i;e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return i}));var a=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",{ref:"container",staticClass:"order"},[i("v-uni-view",{staticClass:"navs"},[i("v-uni-view",{staticClass:"item",class:"0"==t.type?"on":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.settype("0")}}},[t._v("待付款")]),i("v-uni-view",{staticClass:"item",class:"1"==t.type?"on":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.settype("1")}}},[t._v("待配送")]),i("v-uni-view",{staticClass:"item",class:"5"==t.type?"on":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.settype("5")}}},[t._v("待核销")]),i("v-uni-view",{staticClass:"item",class:"3"==t.type?"on":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.settype("3")}}},[t._v("待评价")]),i("v-uni-view",{staticClass:"item",class:"-3"==t.type?"on":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.settype("-3")}}},[t._v("退款")]),i("v-uni-view",{staticClass:"item",class:""==t.type?"on":"",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.settype("")}}},[t._v("全部")])],1),i("v-uni-view",{staticClass:"cards"},[t.orderList.length?i("v-uni-view",t._l(t.orderList,(function(n,e){return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"content_top pad",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDetail(n)}}},[i("v-uni-view",{staticClass:"content_top_left"},[i("p",[t._v("订单号："+t._s(n.order_id))]),i("p",{staticClass:"time"},[t._v("下单时间："+t._s(n.add_time))])]),i("v-uni-view",{staticClass:"state",class:0==n.refund_status&&0!==t.type&&n.refund.length?"on":""},[t._v(t._s(1==n.refund_status?"退款中":2==n.refund_status?"已退款":3==n.refund_status?"拒绝退款":n.status_name.status_name)),0==n.refund_status&&0!==t.type&&n.refund.length?i("v-uni-text",[t._v(t._s(n.is_all_refund?"，退款中":"，部分退款中"))]):t._e()],1)],1),i("v-uni-view",{staticClass:"content_font"}),t._l(n._info,(function(e,a){return i("v-uni-view",{key:a,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDetail(n)}}},[i("v-uni-view",{staticClass:"content_box acea-row row-between"},[i("v-uni-image",{attrs:{src:e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.image:e.cart_info.productInfo.image,mode:""}}),i("v-uni-view",{staticClass:"content_box_title acea-row row-between"},[i("v-uni-view",{staticClass:"text_left acea-row row-between row-column"},[i("v-uni-view",{staticClass:"textbox line2"},[e.cart_info.is_gift?i("v-uni-text",{staticClass:"label"},[t._v("[赠品]")]):t._e(),t._v(t._s(e.cart_info.productInfo.store_name))],1),e.cart_info.productInfo.attrInfo?i("v-uni-view",{staticClass:"attribute line1"},[t._v("属性："+t._s(e.cart_info.productInfo.attrInfo.suk))]):t._e()],1),i("v-uni-view",{staticClass:"text_right"},[i("v-uni-view",[t._v("¥ "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.price:e.cart_info.productInfo.price))]),i("v-uni-view",[t._v("x "+t._s(e.cart_info.cart_num))]),e.cart_info.refund_num&&6!=n.refund_type?i("v-uni-view",{staticClass:"info"},[t._v(t._s(e.cart_info.refund_num)+"件退款中")]):t._e()],1)],1)],1)],1)})),i("v-uni-view",{staticClass:"content_bottom"},[t._v("共"+t._s(n.total_num)+"件商品，实付款："),i("span",{staticClass:"money"},[t._v("￥"+t._s(n.pay_price))]),t._v("( 邮费 ¥"+t._s(n.pay_postage)+"\n\t\t\t\t\t)")]),i("v-uni-view",{staticClass:"content_btn"},[1==n._status?i("v-uni-view",{staticClass:"box",class:t.openErp?"on":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.modify(n,0)}}},[t._v("一键改价")]):t._e(),i("v-uni-view",{staticClass:"box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.modify(n,1)}}},[t._v("订单备注")]),1==n._status&&"offline"==n.pay_type?i("v-uni-view",{staticClass:"box",class:t.openErp?"on":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.offlinePay(n)}}},[t._v("确认付款")]):t._e(),(0==n.refund_type||1==n.refund_type||5==n.refund_type)&&-3==t.type&&parseFloat(n.pay_price)>=0?i("v-uni-view",{staticClass:"box boxblue",class:t.openErp?"on":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.modify(n,2,1)}}},[t._v("立即退款")]):t._e(),-3==t.type&&2==n.refund_type?i("v-uni-view",{staticClass:"box boxblue",class:t.openErp?"on":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.modify(n,2,0)}}},[t._v("同意退货")]):t._e(),-3==t.type&&4==n.refund_type?i("v-uni-view",{staticClass:"wait",class:t.openErp?"on":""},[t._v("待用户发货")]):t._e(),1!=t.type||1!==n.shipping_type&&3!==n.shipping_type||null!==n.pinkStatus&&2!==n.pinkStatus?t._e():i("v-uni-view",{staticClass:"box boxblue",class:t.openErp?"on":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goDelivery(n)}}},[t._v("去发货")])],1)],2)})),1):i("v-uni-view",{staticClass:"nothing"},[t.loading?t._e():i("v-uni-image",{attrs:{src:e("e091"),alt:""}}),t.loading?t._e():i("v-uni-view",[t._v("暂无记录")])],1),i("Loading",{attrs:{loaded:t.loaded,loading:t.loading}}),i("PriceChange",{attrs:{change:t.change,orderInfo:t.orderInfo,isRefund:t.isRefund,status:t.status},on:{closechange:function(n){arguments[0]=n=t.$handleEvent(n),t.changeclose(n)},savePrice:function(n){arguments[0]=n=t.$handleEvent(n),t.savePrice.apply(void 0,arguments)}}})],1)],1)},o=[]},e091:function(t,n,e){t.exports=e.p+"static/img/no-thing.426652cb.png"},f019:function(t,n,e){"use strict";e.r(n);var i=e("c37c"),a=e("5a21");for(var o in a)"default"!==o&&function(t){e.d(n,t,(function(){return a[t]}))}(o);e("ade0");var r,s=e("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"2fba3dbf",null,!1,i["a"],r);n["default"]=c.exports}}]);